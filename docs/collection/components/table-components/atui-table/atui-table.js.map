{"version":3,"file":"atui-table.js","sourceRoot":"","sources":["../../../../src/components/table-components/atui-table/atui-table.tsx"],"names":[],"mappings":"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","sourcesContent":["import {\n    Component,\n    h,\n    Host,\n    Prop,\n    Element,\n    Method,\n    EventEmitter,\n    Event,\n    State,\n    Watch,\n} from '@stencil/core';\nimport { ColDef, createGrid, GridApi, GridOptions } from 'ag-grid-community';\nimport { AtuiTableComponentsConfigs } from '../atui-table-components-configs';\n\n/**\n * @category Data Tables\n * @description A comprehensive data table component with sorting, filtering, pagination, and selection capabilities. Features responsive design, customizable columns, and accessibility support.\n */\n\n@Component({\n    tag: 'atui-table',\n    styleUrls: ['./atui-table.scss'],\n    shadow: false,\n})\nexport class AtuiTableComponent {\n    /**\n     * Data provided to the table\n     */\n    @Prop()\n    table_data: {\n        items: any[];\n        total: number;\n    };\n\n    /**\n     * Column definitions for the table\n     */\n    @Prop()\n    col_defs: ColDef[];\n\n    /**\n     * Default page size of the table if pagination is activated\n     */\n    @Prop()\n    page_size: number = 10;\n\n    /**\n     * Disables the default sorting provided by agGrid.\n     */\n    @Prop()\n    use_custom_sorting: boolean = false;\n\n    /**\n     * Disables the default pagination provided by agGrid.\n     * When using custom pagination, the default sorting\n     * provided by ag grid will not work correctly.\n     */\n    @Prop()\n    use_custom_pagination: boolean = false;\n\n    /**\n     * If true, disables automatic grid initialization.\n     * When disabled, you must manually call createGrid().\n     * Used when the table is controlled by a parent component.\n     */\n    @Prop()\n    disable_auto_init: boolean = false;\n\n    /**\n     * The AG Grid API\n     */\n    @Prop()\n    ag_grid: GridApi;\n\n    @Element()\n    el: HTMLAtuiTableElement;\n\n    /**\n     * Emits an event when a column's sorting state changes.\n     * Used to perform sorting outside of agGrid, when use_custom_sorting is set.\n     * Data in the table should be updated using the agGrid api:\n     * ```agGrid.setGridOption(\"rowData\", yourNewData)```\n     */\n    @Event()\n    atuiSortChange: EventEmitter<{\n        colId: string;\n        sortDirection: 'asc' | 'desc' | null;\n    }>;\n\n    @State() activeFilters: { [key: string]: string } = {};\n\n    @State()\n    private agGrid: GridApi;\n\n    @State()\n    tableCreated: boolean = false;\n\n    @Watch('table_data')\n    async handleTableDataChange(newData: { items: any[]; total: number }) {\n        if (this.agGrid && this.tableCreated) {\n            this.agGrid.setGridOption('rowData', newData?.items || []);\n        }\n    }\n\n    async componentDidLoad() {\n        if (this.disable_auto_init) {\n            this.tableCreated = true;\n        }\n\n        await this.initGrid();\n    }\n\n    async componentDidUpdate() {\n        await this.initGrid();\n    }\n\n    private async initGrid() {\n        const gridInitializedByHost = this.ag_grid && !this.agGrid;\n        const gridReadyForCreation = this.col_defs && !this.tableCreated;\n\n        if (gridInitializedByHost) {\n            this.agGrid = this.ag_grid;\n            this.tableCreated = true;\n            return;\n        }\n\n        if (gridReadyForCreation) {\n            this.agGrid = await this.createGrid();\n            this.tableCreated = true;\n        }\n    }\n\n    /**\n     * Method used to initialize the table.\n     *\n     * @returns The [AG Grid API](https://www.ag-grid.com/javascript-data-grid/grid-api/)\n     */\n    @Method()\n    async createGrid(): Promise<GridApi> {\n        const gridOptions: GridOptions = {\n            domLayout: 'autoHeight',\n            rowData: this.table_data ? this.table_data.items : [],\n            columnDefs: this.col_defs,\n            components: AtuiTableComponentsConfigs.getFrameworkComponents(),\n            onSortChanged: (event) => {\n                const sortColumn = event.columns.filter(\n                    (col) => col.getSort() !== undefined,\n                )[0];\n                this.atuiSortChange.emit({\n                    colId: sortColumn.getColId(),\n                    sortDirection: sortColumn.getSort(),\n                });\n            },\n        };\n\n        if (this.use_custom_sorting) {\n            gridOptions.columnDefs = this.col_defs.map((colDef) => ({\n                ...colDef,\n                comparator: () => 0,\n            }));\n        }\n\n        if (!this.use_custom_pagination) {\n            gridOptions.pagination = true;\n            gridOptions.paginationPageSize = this.page_size;\n            gridOptions.paginationPageSizeSelector = [5, 10, 20, 50, 100];\n        } else {\n            gridOptions.pagination = false;\n        }\n\n        const gridApi = createGrid(this.el, gridOptions);\n        this.agGrid = gridApi;\n        this.tableCreated = true;\n        return gridApi;\n    }\n\n    /**\n     * Gets the AG Grid API instance\n     *\n     * @returns The AG Grid API\n     */\n    @Method()\n    async getGridApi(): Promise<GridApi> {\n        return this.agGrid;\n    }\n\n    render() {\n        return <Host class=\"ag-theme-material\"></Host>;\n    }\n}\n"]}