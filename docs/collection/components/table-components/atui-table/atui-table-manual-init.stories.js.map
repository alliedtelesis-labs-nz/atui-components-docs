{"version":3,"file":"atui-table-manual-init.stories.js","sourceRoot":"","sources":["../../../../src/components/table-components/atui-table/atui-table-manual-init.stories.ts"],"names":[],"mappings":"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","sourcesContent":["import { StoryObj } from '@storybook/web-components';\n\nconst ManualInitTemplate = (args) => `\n<div>\n  <button id=\"init-btn\" style=\"margin-bottom: 20px; padding: 10px 20px; background-color: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer;\">\n    Initialize Table\n  </button>\n  <p id=\"status\" style=\"margin-bottom: 20px; color: #666;\">\n    Table not initialized. Click the button to initialize.\n  </p>\n  <atui-table \n    id=\"manual-table\"\n    page_size=\"${args.page_size ?? 10}\" \n    disable_auto_init=\"true\"\n  />\n</div>\n<script>\n(function() {\n  const table = document.getElementById('manual-table');\n  const initBtn = document.getElementById('init-btn');\n  const status = document.getElementById('status');\n  \n  // Set up table data but don't initialize yet\n  table.table_data = ${JSON.stringify(args.table_data, null, 4)};\n  table.col_defs = ${JSON.stringify(args.col_defs, null, 4)};\n  \n  let isInitialized = false;\n  \n  initBtn.addEventListener('click', async function() {\n    if (!isInitialized) {\n      status.textContent = 'Initializing table...';\n      initBtn.disabled = true;\n      \n      try {\n        // Manual initialization using createGrid method\n        const gridApi = await table.createGrid();\n        \n        status.textContent = 'Table initialized successfully! Grid API available.';\n        status.style.color = '#28a745';\n        initBtn.textContent = 'Table Initialized';\n        isInitialized = true;\n        \n        console.log('Manual table initialization completed. Grid API:', gridApi);\n      } catch (error) {\n        status.textContent = 'Failed to initialize table: ' + error.message;\n        status.style.color = '#dc3545';\n        initBtn.disabled = false;\n      }\n    }\n  });\n})();\n</script>\n`;\n\nconst DelayedInitTemplate = (args) => `\n<div>\n  <p id=\"countdown\" style=\"margin-bottom: 20px; color: #666; font-weight: bold;\">\n    Auto-initializing in <span id=\"seconds\">5</span> seconds...\n  </p>\n  <atui-table \n    id=\"delayed-table\"\n    page_size=\"${args.page_size ?? 10}\" \n    disable_auto_init=\"true\"\n  />\n</div>\n<script>\n(function() {\n  const table = document.getElementById('delayed-table');\n  const countdown = document.getElementById('countdown');\n  const secondsSpan = document.getElementById('seconds');\n  \n  // Set up table data\n  table.table_data = ${JSON.stringify(args.table_data, null, 4)};\n  table.col_defs = ${JSON.stringify(args.col_defs, null, 4)};\n  \n  let timeLeft = 5;\n  \n  const timer = setInterval(async function() {\n    timeLeft--;\n    secondsSpan.textContent = timeLeft;\n    \n    if (timeLeft <= 0) {\n      clearInterval(timer);\n      countdown.textContent = 'Initializing table...';\n      \n      try {\n        const gridApi = await table.createGrid();\n        countdown.textContent = 'Table initialized! AG Grid is ready for use.';\n        countdown.style.color = '#28a745';\n        \n        console.log('Delayed table initialization completed. Grid API:', gridApi);\n      } catch (error) {\n        countdown.textContent = 'Failed to initialize: ' + error.message;\n        countdown.style.color = '#dc3545';\n      }\n    }\n  }, 1000);\n})();\n</script>\n`;\n\nconst ConditionalInitTemplate = (args) => `\n<div>\n  <div style=\"margin-bottom: 20px;\">\n    <label style=\"margin-right: 10px;\">\n      <input type=\"checkbox\" id=\"enable-pagination\" checked> Enable Pagination\n    </label>\n    <label style=\"margin-right: 10px;\">\n      <input type=\"checkbox\" id=\"enable-sorting\" checked> Enable Sorting\n    </label>\n    <label style=\"margin-right: 10px;\">\n      <input type=\"checkbox\" id=\"custom-pagination\"> Use Custom Pagination\n    </label>\n    <button id=\"apply-config\" style=\"padding: 8px 16px; background-color: #28a745; color: white; border: none; border-radius: 4px; cursor: pointer;\">\n      Apply Configuration & Initialize\n    </button>\n  </div>\n  <p id=\"config-status\" style=\"margin-bottom: 20px; color: #666;\">\n    Configure options above, then click \"Apply Configuration\" to initialize the table.\n  </p>\n  <atui-table \n    id=\"conditional-table\"\n    page_size=\"${args.page_size ?? 10}\" \n    disable_auto_init=\"true\"\n  />\n</div>\n<script>\n(function() {\n  const table = document.getElementById('conditional-table');\n  const enablePagination = document.getElementById('enable-pagination');\n  const enableSorting = document.getElementById('enable-sorting');\n  const customPagination = document.getElementById('custom-pagination');\n  const applyBtn = document.getElementById('apply-config');\n  const status = document.getElementById('config-status');\n  \n  // Set up base table data\n  table.table_data = ${JSON.stringify(args.table_data, null, 4)};\n  table.col_defs = ${JSON.stringify(args.col_defs, null, 4)};\n  \n  let isInitialized = false;\n  \n  applyBtn.addEventListener('click', async function() {\n    if (!isInitialized) {\n      status.textContent = 'Applying configuration...';\n      applyBtn.disabled = true;\n      \n      try {\n        // Apply conditional configuration before initialization\n        if (!enableSorting.checked) {\n          table.use_custom_sorting = true;\n        }\n        \n        if (customPagination.checked) {\n          table.use_custom_pagination = true;\n        }\n        \n        // Initialize table with applied configuration\n        const gridApi = await table.createGrid();\n        \n        const features = [];\n        if (enablePagination.checked && !customPagination.checked) features.push('built-in pagination');\n        if (customPagination.checked) features.push('custom pagination');\n        if (enableSorting.checked) features.push('sorting');\n        \n        status.textContent = \\`Table initialized with: \\${features.join(', ') || 'basic features only'}!\\`;\n        status.style.color = '#28a745';\n        applyBtn.textContent = 'Configuration Applied';\n        isInitialized = true;\n        \n        console.log('Conditional table initialization completed with features:', features);\n        console.log('Grid API:', gridApi);\n      } catch (error) {\n        status.textContent = 'Failed to apply configuration: ' + error.message;\n        status.style.color = '#dc3545';\n        applyBtn.disabled = false;\n      }\n    }\n  });\n})();\n</script>\n`;\n\nconst ExternalGridApiTemplate = (args) => `\n<div>\n  <div style=\"margin-bottom: 20px;\">\n    <button id=\"create-external-grid\" style=\"padding: 8px 16px; background-color: #6f42c1; color: white; border: none; border-radius: 4px; cursor: pointer; margin-right: 10px;\">\n      Create External Grid API\n    </button>\n    <button id=\"attach-to-table\" disabled style=\"padding: 8px 16px; background-color: #17a2b8; color: white; border: none; border-radius: 4px; cursor: pointer;\">\n      Attach to Table\n    </button>\n  </div>\n  <p id=\"external-status\" style=\"margin-bottom: 20px; color: #666;\">\n    Click \"Create External Grid API\" to create a shared grid instance, then attach it to the table.\n  </p>\n  <div id=\"external-grid-container\" style=\"margin-bottom: 20px; height: 0; overflow: hidden;\"></div>\n  <atui-table \n    id=\"external-table\"\n    page_size=\"${args.page_size ?? 10}\" \n    disable_auto_init=\"true\"\n  />\n</div>\n<script>\n(function() {\n  const table = document.getElementById('external-table');\n  const createBtn = document.getElementById('create-external-grid');\n  const attachBtn = document.getElementById('attach-to-table');\n  const status = document.getElementById('external-status');\n  \n  // Set up table data\n  table.table_data = ${JSON.stringify(args.table_data, null, 4)};\n  table.col_defs = ${JSON.stringify(args.col_defs, null, 4)};\n  \n  let externalGridApi = null;\n  let isAttached = false;\n  \n  createBtn.addEventListener('click', async function() {\n    try {\n      status.textContent = 'Creating external grid API...';\n      createBtn.disabled = true;\n      \n      // Create an external grid API that can be shared\n      // In a real scenario, this might be created by a parent component\n      externalGridApi = await table.createGrid();\n      \n      status.textContent = 'External grid API created! Now you can attach it to the table.';\n      status.style.color = '#6f42c1';\n      attachBtn.disabled = false;\n      \n      console.log('External grid API created:', externalGridApi);\n    } catch (error) {\n      status.textContent = 'Failed to create external grid: ' + error.message;\n      status.style.color = '#dc3545';\n      createBtn.disabled = false;\n    }\n  });\n  \n  attachBtn.addEventListener('click', function() {\n    if (externalGridApi && !isAttached) {\n      try {\n        status.textContent = 'Attaching external grid API to table...';\n        \n        // Set the external grid API on the table\n        table.ag_grid = externalGridApi;\n        \n        status.textContent = 'External grid API successfully attached to table!';\n        status.style.color = '#28a745';\n        attachBtn.textContent = 'Grid Attached';\n        attachBtn.disabled = true;\n        isAttached = true;\n        \n        console.log('External grid API attached to table');\n      } catch (error) {\n        status.textContent = 'Failed to attach grid: ' + error.message;\n        status.style.color = '#dc3545';\n      }\n    }\n  });\n})();\n</script>\n`;\n\nexport default {\n    title: 'Components/Table Components/Table/Manual Initialization',\n    parameters: {\n        docs: {\n            description: {\n                component:\n                    'Examples demonstrating manual table initialization using the disable_auto_init prop. This provides precise control over when and how the atui-table component is initialized, useful for complex scenarios requiring custom setup or external grid management.',\n            },\n        },\n    },\n};\n\nconst sampleData = {\n    col_defs: [\n        {\n            flex: 1,\n            field: 'product_name',\n            colId: 'product_name',\n            headerName: 'Product Name',\n            sortable: true,\n        },\n        {\n            flex: 1,\n            field: 'category',\n            colId: 'category',\n            headerName: 'Category',\n            sortable: true,\n        },\n        {\n            flex: 1,\n            field: 'price',\n            colId: 'price',\n            headerName: 'Price',\n            sortable: true,\n        },\n        {\n            flex: 1,\n            field: 'stock',\n            colId: 'stock',\n            headerName: 'Stock',\n            sortable: true,\n        },\n    ],\n    table_data: {\n        items: [\n            {\n                _id: '1',\n                product_name: 'Wireless Headphones',\n                category: 'Electronics',\n                price: '$99.99',\n                stock: '25',\n            },\n            {\n                _id: '2',\n                product_name: 'Running Shoes',\n                category: 'Sports',\n                price: '$129.99',\n                stock: '15',\n            },\n            {\n                _id: '3',\n                product_name: 'Coffee Mug',\n                category: 'Kitchen',\n                price: '$12.99',\n                stock: '100',\n            },\n            {\n                _id: '4',\n                product_name: 'Notebook',\n                category: 'Office',\n                price: '$8.99',\n                stock: '50',\n            },\n            {\n                _id: '5',\n                product_name: 'Smartphone Case',\n                category: 'Electronics',\n                price: '$24.99',\n                stock: '30',\n            },\n            {\n                _id: '6',\n                product_name: 'Desk Lamp',\n                category: 'Office',\n                price: '$45.99',\n                stock: '12',\n            },\n            {\n                _id: '7',\n                product_name: 'Water Bottle',\n                category: 'Sports',\n                price: '$19.99',\n                stock: '75',\n            },\n            {\n                _id: '8',\n                product_name: 'Kitchen Scale',\n                category: 'Kitchen',\n                price: '$35.99',\n                stock: '8',\n            },\n        ],\n        total: 8,\n    },\n};\n\nexport const ManualInitialization: StoryObj = {\n    args: {\n        ...sampleData,\n        page_size: 5,\n    },\n    render: ManualInitTemplate,\n    parameters: {\n        docs: {\n            description: {\n                story: 'Demonstrates manual table initialization where the user must click a button to initialize the table. This pattern is useful when you need to perform setup operations or wait for external dependencies before the table is created.',\n            },\n        },\n    },\n};\n\nexport const DelayedInitialization: StoryObj = {\n    args: {\n        ...sampleData,\n        page_size: 5,\n    },\n    render: DelayedInitTemplate,\n    parameters: {\n        docs: {\n            description: {\n                story: 'Shows a delayed initialization pattern where the table is automatically initialized after a countdown. This simulates scenarios where you might need to wait for external dependencies, API calls, or other asynchronous operations before initializing the table.',\n            },\n        },\n    },\n};\n\nexport const ConditionalInitialization: StoryObj = {\n    args: {\n        ...sampleData,\n        page_size: 5,\n    },\n    render: ConditionalInitTemplate,\n    parameters: {\n        docs: {\n            description: {\n                story: 'Demonstrates conditional initialization where table features are configured based on user preferences before initialization. This pattern is useful for customizable table implementations where different features like pagination and sorting can be enabled/disabled dynamically.',\n            },\n        },\n    },\n};\n\nexport const ExternalGridApiManagement: StoryObj = {\n    args: {\n        ...sampleData,\n        page_size: 5,\n    },\n    render: ExternalGridApiTemplate,\n    parameters: {\n        docs: {\n            description: {\n                story: 'Shows how to use external grid API management where a grid is created independently and then attached to the table component. This pattern is useful for scenarios where multiple components need to share a grid instance or when the grid lifecycle is managed by a parent component.',\n            },\n        },\n    },\n};\n"]}