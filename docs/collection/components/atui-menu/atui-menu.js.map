{"version":3,"file":"atui-menu.js","sourceRoot":"","sources":["../../../src/components/atui-menu/atui-menu.tsx"],"names":[],"mappings":"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","sourcesContent":["import {\n    Component,\n    h,\n    Host,\n    Prop,\n    State,\n    Element,\n    Method,\n    Event,\n    EventEmitter,\n} from '@stencil/core';\nimport { cva } from 'class-variance-authority';\nimport {\n    computePosition,\n    flip,\n    shift,\n    offset,\n    autoUpdate,\n    type Placement,\n} from '@floating-ui/dom';\n\n/**\n * @category Actions\n * @description A versatile menu component for actions with keyboard support and positioning. Features auto-open behavior, customizable triggers, and accessible menu item management.\n */\n\nexport type Position = 'top' | 'bottom' | 'left' | 'right';\nexport type Align = 'start' | 'end';\nexport type OpenOn = 'hover' | 'click';\nexport type AriaRole = 'menu' | 'listbox';\n\nconst variants = cva(\n    'z-menu w-full rounded-md border border-solid border-light bg-white p-4 shadow-md',\n    {\n        variants: {\n            open: {\n                true: null,\n                false: 'hidden',\n            },\n        },\n    },\n);\n\n@Component({\n    tag: 'atui-menu',\n    shadow: false,\n})\nexport class AtuiMenu {\n    /**\n     * Menu's x offset from edge in pixels. Only applied for origin_x = 'start' | 'end'\n     */\n    @Prop() offset_x: number = 0;\n\n    /**\n     * Menu's y offset from edge in pixels. Only applied for origin_y = 'top' | 'bottom'\n     */\n    @Prop() offset_y: number = 0;\n\n    /**\n     * Position of opened menu element relative to trigger element.\n     */\n    @Prop() position: Position = 'bottom';\n\n    /**\n     * Alignment of opened menu element relative to trigger element.\n     */\n    @Prop() align: Align = 'start';\n\n    /**\n     * String representing the 'width' style of the menu element ('auto' or 'NUMpx'). Use auto when you want the menu to inherit the host's width..\n     */\n    @Prop() width?: string = '280px';\n\n    /**\n     * Prevent closing of menu when options are selected. Used for multi-selection controls.\n     */\n    @Prop() autoclose: boolean = true;\n\n    /**\n     * Event type that triggers the menu open state. Click or Hover.\n     */\n    @Prop() trigger: OpenOn = 'click';\n\n    /**\n     * Close the menu when the user clicks within the menu panel. Default for single selection menus.\n     */\n    @Prop() role: AriaRole = 'menu';\n\n    /**\n     * Prevent opening menu\n     */\n    @Prop() disabled: boolean = false;\n\n    /**\n     * Use portal-style positioning (fixed to viewport) instead of relative positioning - required for ag-grid cell components\n     */\n    @Prop() portal: boolean = false;\n\n    @State() isOpen = false;\n    triggerEl: HTMLElement;\n    menuEl: HTMLElement;\n    private portalContainer: HTMLElement | null = null;\n    private cleanupAutoUpdate?: () => void;\n    private updatePosition = async () => {\n        if (this.triggerEl && this.menuEl && this.isOpen) {\n            await this.updateFloatingPosition();\n        }\n    };\n\n    @Element() el: HTMLElement;\n\n    /**\n     * Toggles the dropdown menu's open state.\n     */\n    @Method()\n    async toggleMenu(): Promise<void> {\n        this.atuiMenuStateChange.emit(!this.isOpen);\n        this.isOpen = !this.isOpen;\n\n        if (this.isOpen && this.portal) {\n            this.moveMenuToPortal();\n        } else if (!this.isOpen && this.portal) {\n            this.cleanupPortalContainer();\n        }\n\n        this.updatePosition();\n    }\n\n    /**\n     * Toggles the dropdown menu's open state.\n     */\n    @Method()\n    async openMenu(): Promise<void> {\n        this.isOpen = true;\n        this.atuiMenuStateChange.emit(true);\n\n        if (this.portal) {\n            this.moveMenuToPortal();\n        }\n\n        await this.updatePosition();\n    }\n\n    /**\n     * Toggles the dropdown menu's open state.\n     */\n    @Method()\n    async closeMenu(): Promise<void> {\n        this.isOpen = false;\n        this.atuiMenuStateChange.emit(false);\n\n        if (this.portal) {\n            this.cleanupPortalContainer();\n        }\n    }\n\n    /**\n     * Return the current menu open state\n     */\n    @Method()\n    async getIsOpen(): Promise<boolean> {\n        return this.isOpen;\n    }\n\n    /**\n     * Emits an event containing the open menu state.\n     */\n    @Event() atuiMenuStateChange: EventEmitter<boolean>;\n\n    private timedOutCloser;\n\n    componentDidLoad() {\n        window.addEventListener('click', this.handleOutsideClick);\n        this.setupFloatingUI();\n    }\n\n    disconnectedCallback() {\n        window.removeEventListener('click', this.handleOutsideClick);\n        this.cleanupFloatingUI();\n        this.cleanupPortalContainer();\n    }\n\n    private mouseEnterHandler(): void {\n        if (this.timedOutCloser) clearTimeout(this.timedOutCloser);\n        if (!this.isOpen) {\n            this.isOpen = true;\n            this.atuiMenuStateChange.emit(true);\n            if (this.portal) {\n                this.moveMenuToPortal();\n            }\n            this.updatePosition();\n        }\n    }\n\n    private mouseLeaveHandler(): void {\n        this.isOpen = false;\n        this.atuiMenuStateChange.emit(false);\n        if (this.portal) {\n            this.cleanupPortalContainer();\n        }\n    }\n\n    private handleOutsideClick = (event: MouseEvent) => {\n        if (\n            this.isOpen &&\n            !this.el.contains(event.target as Node) &&\n            !this.portalContainer?.contains(event.target as Node)\n        ) {\n            this.mouseLeaveHandler();\n        }\n    };\n\n    //TODO: Replace floatingUI positioning with CSS popover and anchor positioning when supported in a browsers\n    private createPortalContainer(): void {\n        if (!this.portalContainer) {\n            this.portalContainer = document.createElement('div');\n            Object.assign(this.portalContainer.style, {\n                position: 'fixed',\n                top: '0',\n                left: '0',\n                width: '100%',\n                height: '100%',\n                pointerEvents: 'none',\n                zIndex: '9999',\n            });\n            this.portalContainer.setAttribute('data-atui-menu-portal', 'true');\n            document.body.appendChild(this.portalContainer);\n        }\n    }\n\n    private moveMenuToPortal(): void {\n        if (this.portal && this.menuEl && this.isOpen) {\n            this.createPortalContainer();\n            this.portalContainer.innerHTML = '';\n            this.portalContainer.appendChild(this.menuEl);\n            this.menuEl.style.display = '';\n            Object.assign(this.menuEl.style, {\n                pointerEvents: 'auto',\n                display: 'block',\n                visibility: 'visible',\n                position: 'fixed',\n                width: this.width,\n                zIndex: '9999',\n            });\n\n            this.setupFloatingUI();\n        }\n    }\n\n    private cleanupPortalContainer(): void {\n        if (this.portalContainer && this.portalContainer.parentNode) {\n            // Move menu back to original location before removing portal\n            if (this.menuEl) {\n                const menuWrapper = this.el.querySelector(\n                    '[data-name=\"menu-content-wrapper\"]',\n                );\n                if (menuWrapper) {\n                    menuWrapper.appendChild(this.menuEl);\n                }\n                Object.assign(this.menuEl.style, {\n                    display: '',\n                    visibility: '',\n                    pointerEvents: '',\n                    position: '',\n                });\n            }\n            this.portalContainer.parentNode.removeChild(this.portalContainer);\n            this.portalContainer = null;\n        }\n    }\n\n    private setupFloatingUI() {\n        if (this.cleanupAutoUpdate) {\n            this.cleanupAutoUpdate();\n        }\n\n        if (this.triggerEl && this.menuEl) {\n            const observer = new IntersectionObserver(\n                (entries) => {\n                    if (!entries[0].isIntersecting && this.isOpen) {\n                        this.mouseLeaveHandler();\n                    }\n                },\n                { threshold: 0 },\n            );\n            observer.observe(this.triggerEl);\n\n            this.cleanupAutoUpdate = autoUpdate(\n                this.triggerEl,\n                this.menuEl,\n                () => {\n                    if (this.isOpen) {\n                        const placement = this.getFloatingUIPlacement();\n                        const strategy = this.portal ? 'fixed' : 'absolute';\n\n                        computePosition(this.triggerEl, this.menuEl, {\n                            placement,\n                            strategy,\n                            middleware: [\n                                offset(\n                                    this.position === 'bottom' ||\n                                        this.position === 'top'\n                                        ? this.offset_y\n                                        : this.offset_x,\n                                ),\n                                flip({\n                                    fallbackStrategy: 'bestFit',\n                                    padding: 8,\n                                }),\n                                shift({\n                                    padding: 8,\n                                    mainAxis: true,\n                                    crossAxis: true,\n                                }),\n                            ],\n                        }).then(({ x, y }) => {\n                            Object.assign(this.menuEl.style, {\n                                position: strategy,\n                                left: `${x}px`,\n                                top: `${y}px`,\n                                width: this.width,\n                                zIndex: '9999',\n                            });\n                        });\n                    }\n                },\n                {\n                    ancestorScroll: true,\n                    ancestorResize: true,\n                    elementResize: true,\n                    layoutShift: true,\n                    animationFrame: true,\n                },\n            );\n\n            const originalCleanup = this.cleanupAutoUpdate;\n            this.cleanupAutoUpdate = () => {\n                originalCleanup();\n                observer.disconnect();\n            };\n        }\n    }\n\n    private cleanupFloatingUI() {\n        if (this.cleanupAutoUpdate) {\n            this.cleanupAutoUpdate();\n            this.cleanupAutoUpdate = undefined;\n        }\n    }\n\n    private async updateFloatingPosition(): Promise<void> {\n        if (!this.triggerEl || !this.menuEl) return;\n        this.setupFloatingUI();\n    }\n\n    private getFloatingUIPlacement(): Placement {\n        const positionMap: Record<string, string> = {\n            top: 'top',\n            bottom: 'bottom',\n            left: 'left',\n            right: 'right',\n        };\n\n        const alignMap: Record<string, string> = {\n            start: 'start',\n            end: 'end',\n        };\n\n        const position = positionMap[this.position] || 'bottom';\n        const align = alignMap[this.align] || 'start';\n\n        return `${position}-${align}` as Placement;\n    }\n\n    render() {\n        const classname = variants({\n            open: this.isOpen && !this.disabled,\n        });\n\n        return (\n            <Host>\n                <div\n                    class=\"relative\"\n                    onBlur={() =>\n                        this.trigger === 'click' && !this.disabled\n                            ? this.mouseLeaveHandler()\n                            : null\n                    }\n                >\n                    <div\n                        aria-haspopup=\"true\"\n                        data-name=\"menu-trigger\"\n                        ref={(el) => (this.triggerEl = el)}\n                        aria-expanded={`${this.isOpen ? 'true' : 'false'}`}\n                        onMouseEnter={() =>\n                            this.trigger === 'hover' && !this.disabled\n                                ? this.mouseEnterHandler()\n                                : null\n                        }\n                        onKeyDown={async (event) => {\n                            if (event.key === 'Escape') {\n                                await this.closeMenu();\n                            }\n                        }}\n                        onMouseLeave={() =>\n                            this.trigger === 'hover' && !this.disabled\n                                ? this.mouseLeaveHandler()\n                                : null\n                        }\n                        onClick={() =>\n                            this.trigger === 'click' && !this.disabled\n                                ? this.toggleMenu()\n                                : null\n                        }\n                        class={this.disabled ? 'contents' : ''}\n                    >\n                        <slot name=\"menu-trigger\" />\n                    </div>\n\n                    <div\n                        role={this.role}\n                        data-position={this.position}\n                        data-align={this.align}\n                        ref={(el) => (this.menuEl = el)}\n                        aria-hidden={`${this.isOpen ? 'false' : 'true'}`}\n                        onMouseEnter={() =>\n                            this.trigger === 'hover' &&\n                            !this.disabled &&\n                            this.mouseEnterHandler()\n                        }\n                        onMouseLeave={() =>\n                            this.trigger === 'hover' &&\n                            !this.disabled &&\n                            this.mouseLeaveHandler()\n                        }\n                        onKeyDown={(event) => {\n                            if (\n                                event.key === 'Enter' ||\n                                event.key === ' ' ||\n                                event.key === 'Escape'\n                            ) {\n                                if (this.autoclose) {\n                                    this.mouseLeaveHandler();\n                                }\n                            }\n                        }}\n                        onClick={() =>\n                            this.autoclose && this.mouseLeaveHandler()\n                        }\n                        class={classname}\n                        data-name=\"menu-content-wrapper\"\n                    >\n                        <slot name=\"menu-content\" />\n                    </div>\n                </div>\n            </Host>\n        );\n    }\n}\n"]}