import{r as t,h as s,H as i}from"./p-Cd7WF2gX.js";import{C as e,a as o,D as a,A as n,f as r,g as h,i as c,h as l}from"./p-Dpe9AFEu.js";import"./p-BEufhCLE.js";import"./p-C5Sle45O.js";const p="#0f172a";const d={xs:"h-[70px]",sm:"h-[160px]",md:"h-[235px]",lg:"h-[330px]",xl:"h-[440px]",auto:"h-full"};const f=class{constructor(s){t(this,s);this.height="md";this.legend_format={labels:{boxWidth:10,boxHeight:10,fontSize:11},onHover:t=>{if(t.native){t.native.target.style.cursor="pointer"}},display:true};this.tooltip_options={mode:"index",intersect:false,position:"nearest"};this.color_palette=e.CATEGORICAL;this.cutout=70;this.defaultPieTooltipOptions={mode:"index",intersect:true,position:"nearest",animation:{duration:150}}}async getConfig(){return this.config}getDrawCenterTextPlugin(){return{id:"DrawCenterTextPlugin",afterDatasetDraw:t=>{const s=(t.chartArea.left+t.chartArea.right)/2;const i=(t.chartArea.top+t.chartArea.bottom)/2;const e=t.ctx;if(!e){return}e.restore();const o=t.chartArea.bottom-t.chartArea.top;const a=(o/250).toFixed(2)+"em sans-serif";const n=(o/180).toFixed(2)+"em sans-serif";e.fillStyle=p;e.textAlign="center";e.textBaseline="middle";e.font="500 "+n;const r=(t,s,i,o,a)=>{e.font="500 "+t;const n=e.measureText(s);const r=n.actualBoundingBoxAscent+n.actualBoundingBoxDescent;if(a!="middle"){o=a==="top"?o-r:o+r}e.fillText(s,i,o)};if(this.center_value){r(n,this.center_value,s,i,"top");r(a,this.center_text,s,i,"bottom")}else if(this.center_text){r(a,this.center_text,s,i,"middle")}e.save()}}}initChart(){o.register(a,n,r,h,c);const t=l(this.color_palette);if(t){this.applyPresetPalette(t)}const s=this.plugins?[...this.plugins]:[];if(this.center_text||this.center_value){s.push(this.getDrawCenterTextPlugin())}this.config={type:"doughnut",data:Object.assign(Object.assign({},this.data),{datasets:this.data.datasets.map((t=>Object.assign(Object.assign({},t),{cutout:`${this.cutout}%`})))}),options:Object.assign(Object.assign({animation:this.animations},this.options),{maintainAspectRatio:true,aspectRatio:1,layout:{padding:16},plugins:{legend:this.legend_format,tooltip:this.tooltip_options||this.defaultPieTooltipOptions}}),plugins:s};new o(this.canvasEl,this.config);this.canvasEl.style.width="100%";this.canvasEl.style.height="100%"}applyPresetPalette(t){if(this.color_palette===e.CUSTOM){return}this.data.datasets=this.data.datasets.map((s=>{const i=s.data.map(((s,i)=>t[i%t.length]));return Object.assign(Object.assign({},s),{backgroundColor:i,hoverBackgroundColor:i,borderColor:i,hoverBorderColor:i})}))}componentDidUpdate(){if(this.data&&this.data.datasets.length){this.initChart()}}componentDidLoad(){if(this.data&&this.data.datasets.length){this.initChart()}}render(){return s(i,{key:"ac5921e9c348e6129466b454aca434fe1aebb9e7",role:"region",class:`relative flex w-full flex-col items-center justify-center ${d[this.height]}`},s("canvas",{key:"84ca4b0bca6b234b8336ab6ff9a3228c97d2b35a",ref:t=>this.canvasEl=t,style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",maxWidth:"100%",maxHeight:"100%"}}))}};export{f as atui_chart_donut};
//# sourceMappingURL=p-5d718236.entry.js.map