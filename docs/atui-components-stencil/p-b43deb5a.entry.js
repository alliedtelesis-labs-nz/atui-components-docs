import{r as t,c as n,h as e,H as i,g as s}from"./p-Cd7WF2gX.js";import{c as o}from"./p-CVoOBWGd.js";const r=Math.min;const c=Math.max;const a=Math.round;const l=Math.floor;const f=t=>({x:t,y:t});const u={left:"right",right:"left",bottom:"top",top:"bottom"};const h={start:"end",end:"start"};function d(t,n,e){return c(t,r(n,e))}function m(t,n){return typeof t==="function"?t(n):t}function p(t){return t.split("-")[0]}function y(t){return t.split("-")[1]}function g(t){return t==="x"?"y":"x"}function w(t){return t==="y"?"height":"width"}const b=new Set(["top","bottom"]);function v(t){return b.has(p(t))?"y":"x"}function x(t){return g(v(t))}function k(t,n,e){if(e===void 0){e=false}const i=y(t);const s=x(t);const o=w(s);let r=s==="x"?i===(e?"end":"start")?"right":"left":i==="start"?"bottom":"top";if(n.reference[o]>n.floating[o]){r=P(r)}return[r,P(r)]}function A(t){const n=P(t);return[S(t),n,S(n)]}function S(t){return t.replace(/start|end/g,(t=>h[t]))}const F=["left","right"];const M=["right","left"];const R=["top","bottom"];const O=["bottom","top"];function C(t,n,e){switch(t){case"top":case"bottom":if(e)return n?M:F;return n?F:M;case"left":case"right":return n?R:O;default:return[]}}function E(t,n,e,i){const s=y(t);let o=C(p(t),e==="start",i);if(s){o=o.map((t=>t+"-"+s));if(n){o=o.concat(o.map(S))}}return o}function P(t){return t.replace(/left|right|bottom|top/g,(t=>u[t]))}function z(t){return{top:0,right:0,bottom:0,left:0,...t}}function I(t){return typeof t!=="number"?z(t):{top:t,right:t,bottom:t,left:t}}function T(t){const{x:n,y:e,width:i,height:s}=t;return{width:i,height:s,top:e,left:n,right:n+i,bottom:e+s,x:n,y:e}}function D(t,n,e){let{reference:i,floating:s}=t;const o=v(n);const r=x(n);const c=w(r);const a=p(n);const l=o==="y";const f=i.x+i.width/2-s.width/2;const u=i.y+i.height/2-s.height/2;const h=i[c]/2-s[c]/2;let d;switch(a){case"top":d={x:f,y:i.y-s.height};break;case"bottom":d={x:f,y:i.y+i.height};break;case"right":d={x:i.x+i.width,y:u};break;case"left":d={x:i.x-s.width,y:u};break;default:d={x:i.x,y:i.y}}switch(y(n)){case"start":d[r]-=h*(e&&l?-1:1);break;case"end":d[r]+=h*(e&&l?-1:1);break}return d}const L=async(t,n,e)=>{const{placement:i="bottom",strategy:s="absolute",middleware:o=[],platform:r}=e;const c=o.filter(Boolean);const a=await(r.isRTL==null?void 0:r.isRTL(n));let l=await r.getElementRects({reference:t,floating:n,strategy:s});let{x:f,y:u}=D(l,i,a);let h=i;let d={};let m=0;for(let e=0;e<c.length;e++){const{name:o,fn:p}=c[e];const{x:y,y:g,data:w,reset:b}=await p({x:f,y:u,initialPlacement:i,placement:h,strategy:s,middlewareData:d,rects:l,platform:r,elements:{reference:t,floating:n}});f=y!=null?y:f;u=g!=null?g:u;d={...d,[o]:{...d[o],...w}};if(b&&m<=50){m++;if(typeof b==="object"){if(b.placement){h=b.placement}if(b.rects){l=b.rects===true?await r.getElementRects({reference:t,floating:n,strategy:s}):b.rects}({x:f,y:u}=D(l,h,a))}e=-1}}return{x:f,y:u,placement:h,strategy:s,middlewareData:d}};async function j(t,n){var e;if(n===void 0){n={}}const{x:i,y:s,platform:o,rects:r,elements:c,strategy:a}=t;const{boundary:l="clippingAncestors",rootBoundary:f="viewport",elementContext:u="floating",altBoundary:h=false,padding:d=0}=m(n,t);const p=I(d);const y=u==="floating"?"reference":"floating";const g=c[h?y:u];const w=T(await o.getClippingRect({element:((e=await(o.isElement==null?void 0:o.isElement(g)))!=null?e:true)?g:g.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(c.floating)),boundary:l,rootBoundary:f,strategy:a}));const b=u==="floating"?{x:i,y:s,width:r.floating.width,height:r.floating.height}:r.reference;const v=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c.floating));const x=await(o.isElement==null?void 0:o.isElement(v))?await(o.getScale==null?void 0:o.getScale(v))||{x:1,y:1}:{x:1,y:1};const k=T(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:b,offsetParent:v,strategy:a}):b);return{top:(w.top-k.top+p.top)/x.y,bottom:(k.bottom-w.bottom+p.bottom)/x.y,left:(w.left-k.left+p.left)/x.x,right:(k.right-w.right+p.right)/x.x}}const $=function(t){if(t===void 0){t={}}return{name:"flip",options:t,async fn(n){var e,i;const{placement:s,middlewareData:o,rects:r,initialPlacement:c,platform:a,elements:l}=n;const{mainAxis:f=true,crossAxis:u=true,fallbackPlacements:h,fallbackStrategy:d="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:g=true,...w}=m(t,n);if((e=o.arrow)!=null&&e.alignmentOffset){return{}}const b=p(s);const x=v(c);const S=p(c)===c;const F=await(a.isRTL==null?void 0:a.isRTL(l.floating));const M=h||(S||!g?[P(c)]:A(c));const R=y!=="none";if(!h&&R){M.push(...E(c,g,y,F))}const O=[c,...M];const C=await j(n,w);const z=[];let I=((i=o.flip)==null?void 0:i.overflows)||[];if(f){z.push(C[b])}if(u){const t=k(s,r,F);z.push(C[t[0]],C[t[1]])}I=[...I,{placement:s,overflows:z}];if(!z.every((t=>t<=0))){var T,D;const t=(((T=o.flip)==null?void 0:T.index)||0)+1;const n=O[t];if(n){const e=u==="alignment"?x!==v(n):false;if(!e||I.every((t=>t.overflows[0]>0&&v(t.placement)===x))){return{data:{index:t,overflows:I},reset:{placement:n}}}}let e=(D=I.filter((t=>t.overflows[0]<=0)).sort(((t,n)=>t.overflows[1]-n.overflows[1]))[0])==null?void 0:D.placement;if(!e){switch(d){case"bestFit":{var L;const t=(L=I.filter((t=>{if(R){const n=v(t.placement);return n===x||n==="y"}return true})).map((t=>[t.placement,t.overflows.filter((t=>t>0)).reduce(((t,n)=>t+n),0)])).sort(((t,n)=>t[1]-n[1]))[0])==null?void 0:L[0];if(t){e=t}break}case"initialPlacement":e=c;break}}if(s!==e){return{reset:{placement:e}}}}return{}}}};const B=new Set(["left","top"]);async function H(t,n){const{placement:e,platform:i,elements:s}=t;const o=await(i.isRTL==null?void 0:i.isRTL(s.floating));const r=p(e);const c=y(e);const a=v(e)==="y";const l=B.has(r)?-1:1;const f=o&&a?-1:1;const u=m(n,t);let{mainAxis:h,crossAxis:d,alignmentAxis:g}=typeof u==="number"?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};if(c&&typeof g==="number"){d=c==="end"?g*-1:g}return a?{x:d*f,y:h*l}:{x:h*l,y:d*f}}const N=function(t){if(t===void 0){t=0}return{name:"offset",options:t,async fn(n){var e,i;const{x:s,y:o,placement:r,middlewareData:c}=n;const a=await H(n,t);if(r===((e=c.offset)==null?void 0:e.placement)&&(i=c.arrow)!=null&&i.alignmentOffset){return{}}return{x:s+a.x,y:o+a.y,data:{...a,placement:r}}}}};const U=function(t){if(t===void 0){t={}}return{name:"shift",options:t,async fn(n){const{x:e,y:i,placement:s}=n;const{mainAxis:o=true,crossAxis:r=false,limiter:c={fn:t=>{let{x:n,y:e}=t;return{x:n,y:e}}},...a}=m(t,n);const l={x:e,y:i};const f=await j(n,a);const u=v(p(s));const h=g(u);let y=l[h];let w=l[u];if(o){const t=h==="y"?"top":"left";const n=h==="y"?"bottom":"right";const e=y+f[t];const i=y-f[n];y=d(e,y,i)}if(r){const t=u==="y"?"top":"left";const n=u==="y"?"bottom":"right";const e=w+f[t];const i=w-f[n];w=d(e,w,i)}const b=c.fn({...n,[h]:y,[u]:w});return{...b,data:{x:b.x-e,y:b.y-i,enabled:{[h]:o,[u]:r}}}}}};function q(){return typeof window!=="undefined"}function K(t){if(X(t)){return(t.nodeName||"").toLowerCase()}return"#document"}function V(t){var n;return(t==null||(n=t.ownerDocument)==null?void 0:n.defaultView)||window}function W(t){var n;return(n=(X(t)?t.ownerDocument:t.document)||window.document)==null?void 0:n.documentElement}function X(t){if(!q()){return false}return t instanceof Node||t instanceof V(t).Node}function _(t){if(!q()){return false}return t instanceof Element||t instanceof V(t).Element}function G(t){if(!q()){return false}return t instanceof HTMLElement||t instanceof V(t).HTMLElement}function Y(t){if(!q()||typeof ShadowRoot==="undefined"){return false}return t instanceof ShadowRoot||t instanceof V(t).ShadowRoot}const J=new Set(["inline","contents"]);function Q(t){const{overflow:n,overflowX:e,overflowY:i,display:s}=ut(t);return/auto|scroll|overlay|hidden|clip/.test(n+i+e)&&!J.has(s)}const Z=new Set(["table","td","th"]);function tt(t){return Z.has(K(t))}const nt=[":popover-open",":modal"];function et(t){return nt.some((n=>{try{return t.matches(n)}catch(t){return false}}))}const it=["transform","translate","scale","rotate","perspective"];const st=["transform","translate","scale","rotate","perspective","filter"];const ot=["paint","layout","strict","content"];function rt(t){const n=at();const e=_(t)?ut(t):t;return it.some((t=>e[t]?e[t]!=="none":false))||(e.containerType?e.containerType!=="normal":false)||!n&&(e.backdropFilter?e.backdropFilter!=="none":false)||!n&&(e.filter?e.filter!=="none":false)||st.some((t=>(e.willChange||"").includes(t)))||ot.some((t=>(e.contain||"").includes(t)))}function ct(t){let n=dt(t);while(G(n)&&!ft(n)){if(rt(n)){return n}else if(et(n)){return null}n=dt(n)}return null}function at(){if(typeof CSS==="undefined"||!CSS.supports)return false;return CSS.supports("-webkit-backdrop-filter","none")}const lt=new Set(["html","body","#document"]);function ft(t){return lt.has(K(t))}function ut(t){return V(t).getComputedStyle(t)}function ht(t){if(_(t)){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}return{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function dt(t){if(K(t)==="html"){return t}const n=t.assignedSlot||t.parentNode||Y(t)&&t.host||W(t);return Y(n)?n.host:n}function mt(t){const n=dt(t);if(ft(n)){return t.ownerDocument?t.ownerDocument.body:t.body}if(G(n)&&Q(n)){return n}return mt(n)}function pt(t,n,e){var i;if(n===void 0){n=[]}if(e===void 0){e=true}const s=mt(t);const o=s===((i=t.ownerDocument)==null?void 0:i.body);const r=V(s);if(o){const t=yt(r);return n.concat(r,r.visualViewport||[],Q(s)?s:[],t&&e?pt(t):[])}return n.concat(s,pt(s,[],e))}function yt(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function gt(t){const n=ut(t);let e=parseFloat(n.width)||0;let i=parseFloat(n.height)||0;const s=G(t);const o=s?t.offsetWidth:e;const r=s?t.offsetHeight:i;const c=a(e)!==o||a(i)!==r;if(c){e=o;i=r}return{width:e,height:i,$:c}}function wt(t){return!_(t)?t.contextElement:t}function bt(t){const n=wt(t);if(!G(n)){return f(1)}const e=n.getBoundingClientRect();const{width:i,height:s,$:o}=gt(n);let r=(o?a(e.width):e.width)/i;let c=(o?a(e.height):e.height)/s;if(!r||!Number.isFinite(r)){r=1}if(!c||!Number.isFinite(c)){c=1}return{x:r,y:c}}const vt=f(0);function xt(t){const n=V(t);if(!at()||!n.visualViewport){return vt}return{x:n.visualViewport.offsetLeft,y:n.visualViewport.offsetTop}}function kt(t,n,e){if(n===void 0){n=false}if(!e||n&&e!==V(t)){return false}return n}function At(t,n,e,i){if(n===void 0){n=false}if(e===void 0){e=false}const s=t.getBoundingClientRect();const o=wt(t);let r=f(1);if(n){if(i){if(_(i)){r=bt(i)}}else{r=bt(t)}}const c=kt(o,e,i)?xt(o):f(0);let a=(s.left+c.x)/r.x;let l=(s.top+c.y)/r.y;let u=s.width/r.x;let h=s.height/r.y;if(o){const t=V(o);const n=i&&_(i)?V(i):i;let e=t;let s=yt(e);while(s&&i&&n!==e){const t=bt(s);const n=s.getBoundingClientRect();const i=ut(s);const o=n.left+(s.clientLeft+parseFloat(i.paddingLeft))*t.x;const r=n.top+(s.clientTop+parseFloat(i.paddingTop))*t.y;a*=t.x;l*=t.y;u*=t.x;h*=t.y;a+=o;l+=r;e=V(s);s=yt(e)}}return T({width:u,height:h,x:a,y:l})}function St(t,n){const e=ht(t).scrollLeft;if(!n){return At(W(t)).left+e}return n.left+e}function Ft(t,n,e){if(e===void 0){e=false}const i=t.getBoundingClientRect();const s=i.left+n.scrollLeft-(e?0:St(t,i));const o=i.top+n.scrollTop;return{x:s,y:o}}function Mt(t){let{elements:n,rect:e,offsetParent:i,strategy:s}=t;const o=s==="fixed";const r=W(i);const c=n?et(n.floating):false;if(i===r||c&&o){return e}let a={scrollLeft:0,scrollTop:0};let l=f(1);const u=f(0);const h=G(i);if(h||!h&&!o){if(K(i)!=="body"||Q(r)){a=ht(i)}if(G(i)){const t=At(i);l=bt(i);u.x=t.x+i.clientLeft;u.y=t.y+i.clientTop}}const d=r&&!h&&!o?Ft(r,a,true):f(0);return{width:e.width*l.x,height:e.height*l.y,x:e.x*l.x-a.scrollLeft*l.x+u.x+d.x,y:e.y*l.y-a.scrollTop*l.y+u.y+d.y}}function Rt(t){return Array.from(t.getClientRects())}function Ot(t){const n=W(t);const e=ht(t);const i=t.ownerDocument.body;const s=c(n.scrollWidth,n.clientWidth,i.scrollWidth,i.clientWidth);const o=c(n.scrollHeight,n.clientHeight,i.scrollHeight,i.clientHeight);let r=-e.scrollLeft+St(t);const a=-e.scrollTop;if(ut(i).direction==="rtl"){r+=c(n.clientWidth,i.clientWidth)-s}return{width:s,height:o,x:r,y:a}}function Ct(t,n){const e=V(t);const i=W(t);const s=e.visualViewport;let o=i.clientWidth;let r=i.clientHeight;let c=0;let a=0;if(s){o=s.width;r=s.height;const t=at();if(!t||t&&n==="fixed"){c=s.offsetLeft;a=s.offsetTop}}return{width:o,height:r,x:c,y:a}}const Et=new Set(["absolute","fixed"]);function Pt(t,n){const e=At(t,true,n==="fixed");const i=e.top+t.clientTop;const s=e.left+t.clientLeft;const o=G(t)?bt(t):f(1);const r=t.clientWidth*o.x;const c=t.clientHeight*o.y;const a=s*o.x;const l=i*o.y;return{width:r,height:c,x:a,y:l}}function zt(t,n,e){let i;if(n==="viewport"){i=Ct(t,e)}else if(n==="document"){i=Ot(W(t))}else if(_(n)){i=Pt(n,e)}else{const e=xt(t);i={x:n.x-e.x,y:n.y-e.y,width:n.width,height:n.height}}return T(i)}function It(t,n){const e=dt(t);if(e===n||!_(e)||ft(e)){return false}return ut(e).position==="fixed"||It(e,n)}function Tt(t,n){const e=n.get(t);if(e){return e}let i=pt(t,[],false).filter((t=>_(t)&&K(t)!=="body"));let s=null;const o=ut(t).position==="fixed";let r=o?dt(t):t;while(_(r)&&!ft(r)){const n=ut(r);const e=rt(r);if(!e&&n.position==="fixed"){s=null}const c=o?!e&&!s:!e&&n.position==="static"&&!!s&&Et.has(s.position)||Q(r)&&!e&&It(t,r);if(c){i=i.filter((t=>t!==r))}else{s=n}r=dt(r)}n.set(t,i);return i}function Dt(t){let{element:n,boundary:e,rootBoundary:i,strategy:s}=t;const o=e==="clippingAncestors"?et(n)?[]:Tt(n,this._c):[].concat(e);const a=[...o,i];const l=a[0];const f=a.reduce(((t,e)=>{const i=zt(n,e,s);t.top=c(i.top,t.top);t.right=r(i.right,t.right);t.bottom=r(i.bottom,t.bottom);t.left=c(i.left,t.left);return t}),zt(n,l,s));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}}function Lt(t){const{width:n,height:e}=gt(t);return{width:n,height:e}}function jt(t,n,e){const i=G(n);const s=W(n);const o=e==="fixed";const r=At(t,true,o,n);let c={scrollLeft:0,scrollTop:0};const a=f(0);function l(){a.x=St(s)}if(i||!i&&!o){if(K(n)!=="body"||Q(s)){c=ht(n)}if(i){const t=At(n,true,o,n);a.x=t.x+n.clientLeft;a.y=t.y+n.clientTop}else if(s){l()}}if(o&&!i&&s){l()}const u=s&&!i&&!o?Ft(s,c):f(0);const h=r.left+c.scrollLeft-a.x-u.x;const d=r.top+c.scrollTop-a.y-u.y;return{x:h,y:d,width:r.width,height:r.height}}function $t(t){return ut(t).position==="static"}function Bt(t,n){if(!G(t)||ut(t).position==="fixed"){return null}if(n){return n(t)}let e=t.offsetParent;if(W(t)===e){e=e.ownerDocument.body}return e}function Ht(t,n){const e=V(t);if(et(t)){return e}if(!G(t)){let n=dt(t);while(n&&!ft(n)){if(_(n)&&!$t(n)){return n}n=dt(n)}return e}let i=Bt(t,n);while(i&&tt(i)&&$t(i)){i=Bt(i,n)}if(i&&ft(i)&&$t(i)&&!rt(i)){return e}return i||ct(t)||e}const Nt=async function(t){const n=this.getOffsetParent||Ht;const e=this.getDimensions;const i=await e(t.floating);return{reference:jt(t.reference,await n(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function Ut(t){return ut(t).direction==="rtl"}const qt={convertOffsetParentRelativeRectToViewportRelativeRect:Mt,getDocumentElement:W,getClippingRect:Dt,getOffsetParent:Ht,getElementRects:Nt,getClientRects:Rt,getDimensions:Lt,getScale:bt,isElement:_,isRTL:Ut};function Kt(t,n){return t.x===n.x&&t.y===n.y&&t.width===n.width&&t.height===n.height}function Vt(t,n){let e=null;let i;const s=W(t);function o(){var t;clearTimeout(i);(t=e)==null||t.disconnect();e=null}function a(f,u){if(f===void 0){f=false}if(u===void 0){u=1}o();const h=t.getBoundingClientRect();const{left:d,top:m,width:p,height:y}=h;if(!f){n()}if(!p||!y){return}const g=l(m);const w=l(s.clientWidth-(d+p));const b=l(s.clientHeight-(m+y));const v=l(d);const x=-g+"px "+-w+"px "+-b+"px "+-v+"px";const k={rootMargin:x,threshold:c(0,r(1,u))||1};let A=true;function S(n){const e=n[0].intersectionRatio;if(e!==u){if(!A){return a()}if(!e){i=setTimeout((()=>{a(false,1e-7)}),1e3)}else{a(false,e)}}if(e===1&&!Kt(h,t.getBoundingClientRect())){a()}A=false}try{e=new IntersectionObserver(S,{...k,root:s.ownerDocument})}catch(t){e=new IntersectionObserver(S,k)}e.observe(t)}a(true);return o}function Wt(t,n,e,i){if(i===void 0){i={}}const{ancestorScroll:s=true,ancestorResize:o=true,elementResize:r=typeof ResizeObserver==="function",layoutShift:c=typeof IntersectionObserver==="function",animationFrame:a=false}=i;const l=wt(t);const f=s||o?[...l?pt(l):[],...pt(n)]:[];f.forEach((t=>{s&&t.addEventListener("scroll",e,{passive:true});o&&t.addEventListener("resize",e)}));const u=l&&c?Vt(l,e):null;let h=-1;let d=null;if(r){d=new ResizeObserver((t=>{let[i]=t;if(i&&i.target===l&&d){d.unobserve(n);cancelAnimationFrame(h);h=requestAnimationFrame((()=>{var t;(t=d)==null||t.observe(n)}))}e()}));if(l&&!a){d.observe(l)}d.observe(n)}let m;let p=a?At(t):null;if(a){y()}function y(){const n=At(t);if(p&&!Kt(p,n)){e()}p=n;m=requestAnimationFrame(y)}e();return()=>{var t;f.forEach((t=>{s&&t.removeEventListener("scroll",e);o&&t.removeEventListener("resize",e)}));u==null||u();(t=d)==null||t.disconnect();d=null;if(a){cancelAnimationFrame(m)}}}const Xt=N;const _t=U;const Gt=$;const Yt=(t,n,e)=>{const i=new Map;const s={platform:qt,...e};const o={...s.platform,_c:i};return L(t,n,{...s,platform:o})};const Jt=o("z-menu w-full rounded-md border border-solid border-light bg-white p-4 shadow-md",{variants:{open:{true:null,false:"hidden"}}});const Qt=class{constructor(e){t(this,e);this.atuiMenuStateChange=n(this,"atuiMenuStateChange",7);this.offset_x=0;this.offset_y=0;this.position="bottom";this.align="start";this.width="280px";this.autoclose=true;this.trigger="click";this.role="menu";this.disabled=false;this.portal=false;this.isOpen=false;this.portalContainer=null;this.updatePosition=async()=>{if(this.triggerEl&&this.menuEl&&this.isOpen){await this.updateFloatingPosition()}};this.handleOutsideClick=t=>{var n;if(this.isOpen&&!this.el.contains(t.target)&&!((n=this.portalContainer)===null||n===void 0?void 0:n.contains(t.target))){this.mouseLeaveHandler()}}}async toggleMenu(){this.atuiMenuStateChange.emit(!this.isOpen);this.isOpen=!this.isOpen;if(this.isOpen&&this.portal){this.moveMenuToPortal()}else if(!this.isOpen&&this.portal){this.cleanupPortalContainer()}this.updatePosition()}async openMenu(){this.isOpen=true;this.atuiMenuStateChange.emit(true);if(this.portal){this.moveMenuToPortal()}await this.updatePosition()}async closeMenu(){this.isOpen=false;this.atuiMenuStateChange.emit(false);if(this.portal){this.cleanupPortalContainer()}}async getIsOpen(){return this.isOpen}componentDidLoad(){window.addEventListener("click",this.handleOutsideClick);this.setupFloatingUI()}disconnectedCallback(){window.removeEventListener("click",this.handleOutsideClick);this.cleanupFloatingUI();this.cleanupPortalContainer()}mouseEnterHandler(){if(this.timedOutCloser)clearTimeout(this.timedOutCloser);if(!this.isOpen){this.isOpen=true;this.atuiMenuStateChange.emit(true);if(this.portal){this.moveMenuToPortal()}this.updatePosition()}}mouseLeaveHandler(){this.isOpen=false;this.atuiMenuStateChange.emit(false);if(this.portal){this.cleanupPortalContainer()}}createPortalContainer(){if(!this.portalContainer){this.portalContainer=document.createElement("div");Object.assign(this.portalContainer.style,{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",pointerEvents:"none",zIndex:"9999"});this.portalContainer.setAttribute("data-atui-menu-portal","true");document.body.appendChild(this.portalContainer)}}moveMenuToPortal(){if(this.portal&&this.menuEl&&this.isOpen){this.createPortalContainer();this.portalContainer.innerHTML="";this.portalContainer.appendChild(this.menuEl);this.menuEl.style.display="";Object.assign(this.menuEl.style,{pointerEvents:"auto",display:"block",visibility:"visible",position:"fixed",width:this.width,zIndex:"9999"});this.setupFloatingUI()}}cleanupPortalContainer(){if(this.portalContainer&&this.portalContainer.parentNode){if(this.menuEl){const t=this.el.querySelector('[data-name="menu-content-wrapper"]');if(t){t.appendChild(this.menuEl)}Object.assign(this.menuEl.style,{display:"",visibility:"",pointerEvents:"",position:""})}this.portalContainer.parentNode.removeChild(this.portalContainer);this.portalContainer=null}}setupFloatingUI(){if(this.cleanupAutoUpdate){this.cleanupAutoUpdate()}if(this.triggerEl&&this.menuEl){const t=new IntersectionObserver((t=>{if(!t[0].isIntersecting&&this.isOpen){this.mouseLeaveHandler()}}),{threshold:0});t.observe(this.triggerEl);this.cleanupAutoUpdate=Wt(this.triggerEl,this.menuEl,(()=>{if(this.isOpen){const t=this.getFloatingUIPlacement();const n=this.portal?"fixed":"absolute";Yt(this.triggerEl,this.menuEl,{placement:t,strategy:n,middleware:[Xt(this.position==="bottom"||this.position==="top"?this.offset_y:this.offset_x),Gt({fallbackStrategy:"bestFit",padding:8}),_t({padding:8,mainAxis:true,crossAxis:true})]}).then((({x:t,y:e})=>{Object.assign(this.menuEl.style,{position:n,left:`${t}px`,top:`${e}px`,width:this.width,zIndex:"9999"})}))}}),{ancestorScroll:true,ancestorResize:true,elementResize:true,layoutShift:true,animationFrame:true});const n=this.cleanupAutoUpdate;this.cleanupAutoUpdate=()=>{n();t.disconnect()}}}cleanupFloatingUI(){if(this.cleanupAutoUpdate){this.cleanupAutoUpdate();this.cleanupAutoUpdate=undefined}}async updateFloatingPosition(){if(!this.triggerEl||!this.menuEl)return;this.setupFloatingUI()}getFloatingUIPlacement(){const t={top:"top",bottom:"bottom",left:"left",right:"right"};const n={start:"start",end:"end"};const e=t[this.position]||"bottom";const i=n[this.align]||"start";return`${e}-${i}`}render(){const t=Jt({open:this.isOpen&&!this.disabled});return e(i,{key:"83a497cd8d6ceca4b80ec5e77d718d32b2f4b951"},e("div",{key:"59949df121168f6081fa085ed072552c7bc1f5ec",class:"relative",onBlur:()=>this.trigger==="click"&&!this.disabled?this.mouseLeaveHandler():null},e("div",{key:"a5bf5d6da2649f490c31e28afda9872a4a4174a9","aria-haspopup":"true","data-name":"menu-trigger",ref:t=>this.triggerEl=t,"aria-expanded":`${this.isOpen?"true":"false"}`,onMouseEnter:()=>this.trigger==="hover"&&!this.disabled?this.mouseEnterHandler():null,onKeyDown:async t=>{if(t.key==="Escape"){await this.closeMenu()}},onMouseLeave:()=>this.trigger==="hover"&&!this.disabled?this.mouseLeaveHandler():null,onClick:()=>this.trigger==="click"&&!this.disabled?this.toggleMenu():null,class:this.disabled?"contents":""},e("slot",{key:"2dea8c529fd7b681d8a4eb32ec2ca17968179310",name:"menu-trigger"})),e("div",{key:"07375e819154dbc08b7e2093d5fec3bfd708b0e7",role:this.role,"data-position":this.position,"data-align":this.align,ref:t=>this.menuEl=t,"aria-hidden":`${this.isOpen?"false":"true"}`,onMouseEnter:()=>this.trigger==="hover"&&!this.disabled&&this.mouseEnterHandler(),onMouseLeave:()=>this.trigger==="hover"&&!this.disabled&&this.mouseLeaveHandler(),onKeyDown:t=>{if(t.key==="Enter"||t.key===" "||t.key==="Escape"){if(this.autoclose){this.mouseLeaveHandler()}}},onClick:()=>this.autoclose&&this.mouseLeaveHandler(),class:t,"data-name":"menu-content-wrapper"},e("slot",{key:"5e784a58018549f396e23f4861ff764397617638",name:"menu-content"}))))}get el(){return s(this)}};export{Qt as atui_menu};
//# sourceMappingURL=p-b43deb5a.entry.js.map