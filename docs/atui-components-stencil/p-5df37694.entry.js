import{r as t,h as i,H as s}from"./p-HJO1YDmC.js";import{C as e,a,L as n,B as o,b as r,c as h,T as c,d as l,e as d,P as p,p as f,f as m,g as u,i as b,h as x}from"./p-Dpe9AFEu.js";import{T as y}from"./p-B4EnUa_F.js";import"./p-BEufhCLE.js";import"./p-C5Sle45O.js";const g={xs:"h-[70px]",sm:"h-[160px]",md:"h-[235px]",lg:"h-[330px]",xl:"h-[440px]",auto:"h-full"};const j=class{constructor(i){t(this,i);this.height="md";this.color_palette=e.CATEGORICAL;this.formatThresholds=()=>{if(!this.thresholds){return[]}const t=[];this.thresholds.forEach((i=>{t.push({type:"line",label:i.label,borderColor:i.color,borderCapStyle:"butt",backgroundColor:"white",fill:false,data:i.data,pointRadius:0,borderDash:i.dashLine?[6,3]:undefined,tension:0,stepped:i.stepped,order:1})}));return t}}async getConfig(){return this.config}initChart(){a.register(n,o,r,h,c,l,d,p,f,m,u,b);const t=x(this.color_palette);if(t){this.applyPresetPalette(t)}if(this.point_styles){this.pointStylesSetup()}this.config={type:this.type,data:{labels:this.data.labels,datasets:[...this.data.datasets,...this.formatThresholds()]},options:Object.assign(Object.assign({devicePixelRatio:2,maintainAspectRatio:false,scales:{y:this.y_axis_format||{beginAtZero:true,type:"linear",min:0},x:this.x_axis_format||{type:"time",time:{displayFormats:{day:"ddd",minute:"MMM D H:mm",hour:"MMM D H:mm"}},ticks:{font:{size:11},autoSkip:true,align:"center",maxRotation:0,minRotation:0}}}},this.options),{plugins:{tooltip:this.tooltip_options||{mode:"index",intersect:false,position:"nearest",animation:{duration:150}},legend:this.legend_format||{labels:{boxWidth:8,boxHeight:8,fontSize:10,borderRadius:2},onHover:t=>{if(t.native){t.native.target.style.cursor="pointer"}},display:true}},clip:false,elements:{line:{tension:0,borderWidth:2}}})};if(this.time_range){const t=this.getMinMaxDateStrings(this.time_range);this.config.options.scales.x["min"]=t.min;this.config.options.scales.x["max"]=t.max}new a(this.canvasEl,this.config);this.canvasEl.style.width="";this.canvasEl.style.height=""}componentDidUpdate(){if(this.data&&this.data.datasets.length){this.initChart()}}componentDidLoad(){if(this.data&&this.data.datasets.length){this.initChart()}}pointStylesSetup(){this.data.datasets=this.data.datasets.map((t=>Object.assign(Object.assign({},t),this.point_styles)))}applyPresetPalette(t){if(this.color_palette===e.CUSTOM){return}this.data.datasets=this.data.datasets.map(((i,s)=>{const e=t[s%t.length];return Object.assign(Object.assign({},i),{backgroundColor:e,borderColor:e})}))}getMinMaxDateStrings(t){const i=t.selected;const s=t.custom?y.getAbsoluteDateRange(t.custom):null;const{startDate:e,endDate:a}=y.getDateRange(s,i,null);return{min:e.toString(),max:a.toString()}}render(){return i(s,{key:"d1273c6bc468c71205d31f726446ac1980e67008",style:{height:"100%",width:"100%"}},i("section",{key:"341a3bfcbf6fca76a1fec9c709a6fc068002e79a",class:`min-w-100 ${g[this.height]}`},i("canvas",{key:"47ceb12a09422c27f5ae18e8f609b633fcd92220",ref:t=>this.canvasEl=t})))}};export{j as atui_chart_bar_line};
//# sourceMappingURL=p-5df37694.entry.js.map