import{r as t,c as s,h as i,F as o,H as e,g as a}from"./p-C8uvvL0O.js";import{c as l}from"./p-Bfa-pAao.js";import{f as n}from"./p-DuLooPsr.js";var d;(function(t){t[t["None"]=0]="None";t[t["Up"]=1]="Up";t[t["Down"]=-1]="Down"})(d||(d={}));const h={variants:{role:{user:"bg-surface-2 text-dark ml-auto inline-block p-8",assistant:"text-dark mr-auto"},loading:{true:"animate-pulse",false:""}},defaultVariants:{role:"user",loading:false}};const r=l("rounded-lg py-4 text-base",h);const v=class{constructor(i){t(this,i);this.atCopy=s(this,"atCopy",7);this.atVote=s(this,"atVote",7);this.atRetry=s(this,"atRetry",7);this.atEdit=s(this,"atEdit",7);this.role="user";this.content="";this.loading=false;this.error=false;this.vote_status=d.None;this.enable_vote=false;this.enable_copy=false;this.enable_edit=false;this.copyFeedbackVisible=false;this.handleCopy=async()=>{try{await navigator.clipboard.writeText(this.content);this.copyFeedbackVisible=true;this.atCopy.emit(this.content);setTimeout((()=>{this.copyFeedbackVisible=false}),2e3)}catch(t){console.error("Failed to copy text:",t)}};this.handleRetry=()=>{this.atRetry.emit()};this.handleEdit=()=>{this.atEdit.emit(this.content)};this.handleVote=t=>{const s=this.vote_status===t?d.None:t;this.atVote.emit({messageId:this.message_id,score:s})}}async componentWillLoad(){this.translations=await n(this.el)}renderActions(){var t,s,e,a,l,n,h,r,v,p,c,u,g,m,f,x,w,y;if(this.loading)return null;return i("div",{class:"mt-2 flex items-center justify-end gap-2","data-name":"message-actions"},this.role==="user"&&this.enable_edit&&i("at-tooltip",{position:"top"},i("at-button",{slot:"tooltip-trigger",size:"sm",type:"secondaryText",icon:"edit",class:"text-xs",onClick:this.handleEdit,"data-name":"edit-button"}),i("span",null,((e=(s=(t=this.translations)===null||t===void 0?void 0:t.ATUI)===null||s===void 0?void 0:s.PROMPT)===null||e===void 0?void 0:e.EDIT)||"Edit")),this.role==="assistant"&&this.enable_vote&&i(o,null,i("at-tooltip",{position:"top"},i("at-button",{slot:"tooltip-trigger",size:"sm",type:"secondaryText",onClick:()=>this.handleVote(d.Up),"data-name":"vote-up-button"},this.vote_status===d.Up?i("svg",{xmlns:"http://www.w3.org/2000/svg",height:"15px",viewBox:"0 -960 960 960",width:"15px",fill:"#000000"},i("path",{d:"M720-144H264v-480l288-288 32 22q18 13 26.5 33t3.5 41l-38 192h264q30 0 51 21t21 51v57q0 8-1.5 14.5T906-467L787-188q-9 20-27 32t-40 12Z"})):i("svg",{xmlns:"http://www.w3.org/2000/svg",height:"15px",viewBox:"0 -960 960 960",width:"15px",fill:"#adb5bd"},i("path",{d:"M720-144H264v-480l288-288 32 22q17 12 26 30.5t5 38.5l-1 5-38 192h264q30 0 51 21t21 51v57q0 8-1.5 14.5T906-467L786.93-187.8Q778-168 760-156t-40 12Zm-384-72h384l120-279v-57H488l49-243-201 201v378Zm0-378v378-378Z"}))),i("span",null,((n=(l=(a=this.translations)===null||a===void 0?void 0:a.ATUI)===null||l===void 0?void 0:l.PROMPT)===null||n===void 0?void 0:n.HELPFUL)||"Helpful")),i("at-tooltip",{position:"top"},i("at-button",{slot:"tooltip-trigger",size:"sm",type:"secondaryText",onClick:()=>this.handleVote(d.Down),"data-name":"vote-down-button"},this.vote_status===d.Down?i("svg",{xmlns:"http://www.w3.org/2000/svg",height:"15px",viewBox:"0 -960 960 960",width:"15px",fill:"#000000"},i("path",{d:"M240-816h456v480L408-48l-32-22q-18-13-26.5-33t-3.5-41l38-192H120q-30 0-51-21t-21-51v-57q0-8 1.5-14.5T54-493l119-279q8-20 26.5-32t40.5-12Z"})):i("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15px",viewBox:"0 -960 960 960",height:"15px",fill:"#adb5bd"},i("path",{d:"M240-816h456v480L408-48l-32-22q-17-12-26-30.5t-5-38.5l1-5 38-192H120q-30 0-51-21t-21-51v-57q0-8 1.5-14.5T54-493l119-279q8-20 26.5-32t40.5-12Zm384 72H240L120-465v57h352l-49 243 201-201v-378Zm0 378v-378 378Z"}))),i("span",null,((v=(r=(h=this.translations)===null||h===void 0?void 0:h.ATUI)===null||r===void 0?void 0:r.PROMPT)===null||v===void 0?void 0:v.NOT_HELPFUL)||"Not Helpful"))),this.role==="assistant"&&this.enable_copy&&i("at-tooltip",{position:"top"},i("at-button",{slot:"tooltip-trigger",size:"sm",icon:this.copyFeedbackVisible?"check":"content_copy",type:"secondaryText",onClick:this.handleCopy,"data-name":"copy-button"}),i("span",null,this.copyFeedbackVisible?((u=(c=(p=this.translations)===null||p===void 0?void 0:p.ATUI)===null||c===void 0?void 0:c.PROMPT)===null||u===void 0?void 0:u.COPIED)||"Copied":((f=(m=(g=this.translations)===null||g===void 0?void 0:g.ATUI)===null||m===void 0?void 0:m.PROMPT)===null||f===void 0?void 0:f.COPY)||"Copy")),this.role==="assistant"&&this.error&&i("at-tooltip",{position:"top"},i("at-button",{slot:"tooltip-trigger",size:"sm",type:"secondaryText",icon:"refresh",onClick:this.handleRetry,"data-name":"retry-button"}),i("span",null,((y=(w=(x=this.translations)===null||x===void 0?void 0:x.ATUI)===null||w===void 0?void 0:w.PROMPT)===null||y===void 0?void 0:y.RETRY)||"Retry")))}renderContent(){var t,s,o;if(this.loading){return i("div",{class:"py-8","data-name":"loading-wrapper"},i("at-loading",{class:"flex items-center gap-4 py-8","data-name":"loading-content",variant:"typing",size:"sm"}))}if(this.error){return i("div",{class:"space-y-2",ref:t=>this.errorEl=t,"data-name":"error-content"},i("p",{class:"text-destructive-foreground"},this.error_message||((o=(s=(t=this.translations)===null||t===void 0?void 0:t.ATUI)===null||s===void 0?void 0:s.PROMPT)===null||o===void 0?void 0:o.ERROR_GENERATING_RESPONSE)||"Error generating response"))}return i("div",{class:"prose prose-sm preserve-newlines max-w-none","data-name":"message-content"},i("slot",null),this.content)}render(){const t=r({role:this.role,loading:this.loading});return i(e,{key:"b2ac2b0548c3975282eed5f2f3b95bf5bdf2d5c1",class:"flex w-full gap-8","data-name":"message-container","data-role":this.role},i("div",{key:"9fad5bd48c6a8cd5d2451a485878ec4e4f6dfed3",class:"flex flex-1 flex-col"},this.name&&i("span",{key:"4fe377808a604eab393172ec48f1942d9a5d151a",class:"text-light self-start text-sm","data-name":"message-name"},this.name),i("div",{key:"6fe967b72ad81d269aceb3b0bdd0269ac1255435",class:t},this.renderContent()),this.renderActions()))}get el(){return a(this)}};export{v as A,d as V};
//# sourceMappingURL=p-Dv2D4ENc.js.map