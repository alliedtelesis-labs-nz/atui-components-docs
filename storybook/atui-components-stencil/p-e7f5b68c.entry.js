import{r as a,c as i,g as t,h as e,H as s}from"./p-7z-rGOwX.js";const o=class{constructor(t){a(this,t),this.atuiDialogChange=i(this,"atuiDialogChange",7)}get el(){return t(this)}role="dialog";backdrop=!0;close_backdrop=!1;trigger_id;isOpen=!1;atuiDialogChange;dialog;dialogWrapper;triggerEls=[];externalTriggerListeners=[];async toggleDialog(){this.isOpen?await this.closeDialog():await this.openDialog()}async openDialog(){this.dialog&&!this.isOpen&&(!0===this.backdrop?this.dialog.showModal():this.dialog.show(),this.isOpen=!0,this.atuiDialogChange.emit(this.isOpen))}async closeDialog(){this.dialog&&this.isOpen&&(this.dialog.close(),this.isOpen=!1,this.atuiDialogChange.emit(this.isOpen),this.dialog.removeAttribute("open"))}async getIsOpen(){return this.isOpen}handleDialogClose=()=>{this.isOpen&&this.closeDialog()};handleKeyDown=a=>{"Escape"===a.key&&this.isOpen&&(a.preventDefault(),this.closeDialog())};offClickHandler(a){this.close_backdrop&&this.dialog?.open&&(this.dialogWrapper?.contains(a.target)||this.handleDialogClose())}async componentDidLoad(){if(this.trigger_id){if(this.triggerEls=Array.from(document.querySelectorAll(`[data-dialog="${this.trigger_id}"]`)),0===this.triggerEls.length)return void console.warn(`atui-dialog: No elements found with data-dialog="${this.trigger_id}"`);this.setupExternalTriggerListeners()}}disconnectedCallback(){this.cleanupExternalTriggerListeners()}cleanupExternalTriggerListeners(){this.externalTriggerListeners.forEach((({element:a,event:i,handler:t})=>{a.removeEventListener(i,t)})),this.externalTriggerListeners=[]}setupExternalTriggerListeners(){if(!this.triggerEls||0===this.triggerEls.length)return;const a=async a=>{a.preventDefault(),a.stopPropagation(),await this.toggleDialog()},i=async a=>{switch(a.key){case"Enter":case" ":a.preventDefault(),await this.toggleDialog()}};this.triggerEls.forEach((t=>{t.addEventListener("click",a),t.addEventListener("keydown",i),this.externalTriggerListeners.push({element:t,event:"click",handler:a},{element:t,event:"keydown",handler:i})}))}render(){return e(s,{key:"908154c53ad6a53c3a5c5cce2bdba0321d4a3a88","data-open":this.isOpen},e("dialog",{key:"8eb6b6d5fb134a3f51200bbd9e3dc00c31fccd3d",ref:a=>this.dialog=a,"data-name":"dialog",class:this.backdrop?"backdrop":"",role:this.role,"aria-modal":"true",onClose:this.handleDialogClose,onKeyDown:this.handleKeyDown},e("div",{key:"03263674ac19c8b2923715c0bf7da0ffbf3e98e0","data-name":"content",ref:a=>this.dialogWrapper=a},e("slot",{key:"cf336e40b34bae5e01ec9475b0d424a51a90e5ce"}))))}};o.style="@keyframes fadeIn{from{background-color:rgba(0, 0, 0, 0)}to{background-color:rgba(0, 0, 0, 0.2)}}@keyframes animInUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes animOut{from{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(0.95)}}dialog.backdrop.sc-at-dialog::backdrop{margin:0;inset:0;background:rgba(0, 0, 0, 0.2);animation:fadeIn 0.3s ease forwards;transition:opacity var(--token-transition-time) ease-in-out allow-discrete}dialog.backdrop.sc-at-dialog::backdrop{z-index:var(--z-backdrop, 1000)}.sc-at-dialog-h{display:contents}.sc-at-dialog-h dialog.sc-at-dialog{position:fixed;inset:0;margin:0;display:flex;align-items:center;justify-content:center;min-width:100vw;min-height:100vh;overflow:hidden;border:0;padding:0;background:transparent;z-index:var(--token-z-index-modal);transform-origin:center;opacity:0;box-shadow:var(--token-shadow-3);visibility:hidden;transition:translate 0.3s ease, scale 0.3s ease, opacity 0.3s ease, visibility 0s linear 0.3s}.sc-at-dialog-h dialog.backdrop.sc-at-dialog{display:flex;width:100vw;height:100vh}.sc-at-dialog-h dialog[open].sc-at-dialog{translate:0 0;scale:1;opacity:1;visibility:visible;transition:translate 0.3s ease, scale 0.3s ease, opacity 0.3s ease, visibility 0s linear}@starting-style{.sc-at-dialog-h dialog[open]{opacity:0}}.sc-at-dialog-h dialog.sc-at-dialog:not([open]){opacity:0;visibility:hidden}";export{o as at_dialog}