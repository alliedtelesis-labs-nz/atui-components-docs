import{r as t,c as i,h as s,F as o,H as e,g as a}from"./p-BvDeEv6o.js";import{c as l}from"./p-CVoOBWGd.js";import{f as n}from"./p-DuLooPsr.js";var d;(function(t){t[t["None"]=0]="None";t[t["Up"]=1]="Up";t[t["Down"]=-1]="Down"})(d||(d={}));const h=l("text-base rounded-lg py-4",{variants:{role:{user:"ml-auto inline-block bg-surface-2 p-8 text-dark",assistant:"mr-auto text-dark"},loading:{true:"animate-pulse",false:""}},defaultVariants:{role:"user",loading:false}});const r=class{constructor(s){t(this,s);this.atuiCopy=i(this,"atuiCopy",7);this.atuiVote=i(this,"atuiVote",7);this.atuiRetry=i(this,"atuiRetry",7);this.atuiEdit=i(this,"atuiEdit",7);this.role="user";this.content="";this.loading=false;this.error=false;this.vote_status=d.None;this.enable_vote=false;this.enable_copy=false;this.enable_edit=false;this.copyFeedbackVisible=false;this.handleCopy=async()=>{try{await navigator.clipboard.writeText(this.content);this.copyFeedbackVisible=true;this.atuiCopy.emit(this.content);setTimeout((()=>{this.copyFeedbackVisible=false}),2e3)}catch(t){console.error("Failed to copy text:",t)}};this.handleRetry=()=>{this.atuiRetry.emit()};this.handleEdit=()=>{this.atuiEdit.emit(this.content)};this.handleVote=t=>{const i=this.vote_status===t?d.None:t;this.atuiVote.emit({messageId:this.message_id,score:i})}}async componentWillLoad(){this.translations=await n(this.el)}renderActions(){var t,i,e,a,l,n,h,r,p,v,u,c,g,m,f,x,w,y;if(this.loading)return null;return s("div",{class:"mt-2 flex items-center justify-end gap-2","data-name":"message-actions"},this.role==="user"&&this.enable_edit&&s("atui-tooltip",{position:"top"},s("atui-button",{slot:"tooltip-trigger",size:"sm",type:"secondaryText",icon:"edit",class:"text-xs",onClick:this.handleEdit,"data-name":"edit-button"}),s("span",{slot:"tooltip-content"},((e=(i=(t=this.translations)===null||t===void 0?void 0:t.ATUI)===null||i===void 0?void 0:i.PROMPT)===null||e===void 0?void 0:e.EDIT)||"Edit")),this.role==="assistant"&&this.enable_vote&&s(o,null,s("atui-tooltip",{position:"top"},s("atui-button",{slot:"tooltip-trigger",size:"sm",type:"secondaryText",onClick:()=>this.handleVote(d.Up),"data-name":"vote-up-button"},this.vote_status===d.Up?s("svg",{xmlns:"http://www.w3.org/2000/svg",height:"15px",viewBox:"0 -960 960 960",width:"15px",fill:"#000000"},s("path",{d:"M720-144H264v-480l288-288 32 22q18 13 26.5 33t3.5 41l-38 192h264q30 0 51 21t21 51v57q0 8-1.5 14.5T906-467L787-188q-9 20-27 32t-40 12Z"})):s("svg",{xmlns:"http://www.w3.org/2000/svg",height:"15px",viewBox:"0 -960 960 960",width:"15px",fill:"#adb5bd"},s("path",{d:"M720-144H264v-480l288-288 32 22q17 12 26 30.5t5 38.5l-1 5-38 192h264q30 0 51 21t21 51v57q0 8-1.5 14.5T906-467L786.93-187.8Q778-168 760-156t-40 12Zm-384-72h384l120-279v-57H488l49-243-201 201v378Zm0-378v378-378Z"}))),s("span",{slot:"tooltip-content"},((n=(l=(a=this.translations)===null||a===void 0?void 0:a.ATUI)===null||l===void 0?void 0:l.PROMPT)===null||n===void 0?void 0:n.HELPFUL)||"Helpful")),s("atui-tooltip",{position:"top"},s("atui-button",{slot:"tooltip-trigger",size:"sm",type:"secondaryText",onClick:()=>this.handleVote(d.Down),"data-name":"vote-down-button"},this.vote_status===d.Down?s("svg",{xmlns:"http://www.w3.org/2000/svg",height:"15px",viewBox:"0 -960 960 960",width:"15px",fill:"#000000"},s("path",{d:"M240-816h456v480L408-48l-32-22q-18-13-26.5-33t-3.5-41l38-192H120q-30 0-51-21t-21-51v-57q0-8 1.5-14.5T54-493l119-279q8-20 26.5-32t40.5-12Z"})):s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15px",viewBox:"0 -960 960 960",height:"15px",fill:"#adb5bd"},s("path",{d:"M240-816h456v480L408-48l-32-22q-17-12-26-30.5t-5-38.5l1-5 38-192H120q-30 0-51-21t-21-51v-57q0-8 1.5-14.5T54-493l119-279q8-20 26.5-32t40.5-12Zm384 72H240L120-465v57h352l-49 243 201-201v-378Zm0 378v-378 378Z"}))),s("span",{slot:"tooltip-content"},((p=(r=(h=this.translations)===null||h===void 0?void 0:h.ATUI)===null||r===void 0?void 0:r.PROMPT)===null||p===void 0?void 0:p.NOT_HELPFUL)||"Not Helpful"))),this.role==="assistant"&&this.enable_copy&&s("atui-tooltip",{position:"top"},s("atui-button",{slot:"tooltip-trigger",size:"sm",icon:this.copyFeedbackVisible?"check":"content_copy",type:"secondaryText",onClick:this.handleCopy,"data-name":"copy-button"}),s("span",{slot:"tooltip-content"},this.copyFeedbackVisible?((c=(u=(v=this.translations)===null||v===void 0?void 0:v.ATUI)===null||u===void 0?void 0:u.PROMPT)===null||c===void 0?void 0:c.COPIED)||"Copied":((f=(m=(g=this.translations)===null||g===void 0?void 0:g.ATUI)===null||m===void 0?void 0:m.PROMPT)===null||f===void 0?void 0:f.COPY)||"Copy")),this.role==="assistant"&&this.error&&s("atui-tooltip",{position:"top"},s("atui-button",{slot:"tooltip-trigger",size:"sm",type:"secondaryText",icon:"refresh",onClick:this.handleRetry,"data-name":"retry-button"}),s("span",{slot:"tooltip-content"},((y=(w=(x=this.translations)===null||x===void 0?void 0:x.ATUI)===null||w===void 0?void 0:w.PROMPT)===null||y===void 0?void 0:y.RETRY)||"Retry")))}renderContent(){var t,i,o;if(this.loading){return s("div",{class:"py-8","data-name":"loading-wrapper"},s("atui-loading",{class:"flex items-center gap-4 py-8","data-name":"loading-content",variant:"typing",size:"sm"}))}if(this.error){return s("div",{class:"space-y-2",ref:t=>this.errorEl=t,"data-name":"error-content"},s("p",{class:"text-destructive-foreground"},this.error_message||((o=(i=(t=this.translations)===null||t===void 0?void 0:t.ATUI)===null||i===void 0?void 0:i.PROMPT)===null||o===void 0?void 0:o.ERROR_GENERATING_RESPONSE)||"Error generating response"))}return s("div",{class:"prose prose-sm preserve-newlines max-w-none","data-name":"message-content"},s("slot",null),this.content)}render(){const t=h({role:this.role,loading:this.loading});return s(e,{key:"9e3bd33653e63685fe07ce845c7675f2219d1548",class:"flex w-full gap-8","data-name":"message-container","data-role":this.role},s("div",{key:"2a71b744b7e7690f37cee010278aacd71efc6dbd",class:"flex flex-1 flex-col"},this.name&&s("span",{key:"c8da2be6f55c8762d9b9d4295e22c03fdb546a01",class:"self-start text-sm text-light","data-name":"message-name"},this.name),s("div",{key:"6aa116577468031e0b26e9c101b1b9ebba64615d",class:t},this.renderContent()),this.renderActions()))}get el(){return a(this)}};export{r as A,d as V};
//# sourceMappingURL=p-CHSKh4v1.js.map