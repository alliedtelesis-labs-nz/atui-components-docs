import{r as t,c as e,g as a,h as i,H as s}from"./p-EP34iaAr.js";const n=class{constructor(a){t(this,a);this.atuiChange=e(this,"atuiChange",7)}get el(){return a(this)}tabs=[];layout="horizontal";hide_nav=false;active_tab;fill=false;atuiChange;tabEls=[];tabManualAdded=[];componentDidLoad(){this.tabEls=this.getTabsElements();requestAnimationFrame((()=>{this.initializeTabs();this.addEventListenersToTabs();requestAnimationFrame((()=>{this.updateIndicatorPosition()}))}))}initializeTabs(){this.tabEls.forEach((t=>{this.tabManualAdded.push({id:t.tab_id,title:t.tab_title});t.layout=this.layout;if(!this.active_tab&&t.is_active){this.active_tab=t.tab_id}t.is_active=!!this.active_tab&&t.tab_id===this.active_tab;t.fill=this.fill}))}addEventListenersToTabs(){this.tabEls.forEach((t=>{t.addEventListener("click",(()=>{this.handleTabChange(t.tab_id)}))}))}getTabsElements(){return Array.from(this.el.querySelectorAll("at-tab-trigger"))}componentDidUpdate(){this.updateIndicatorPosition()}handleActiveTabChange(t){const e=this.tabs.find((e=>e.id===t));const a=this.tabManualAdded.find((e=>e.id===t));if(e){this.atuiChange.emit(e.id);this.updateTabActiveStates(t);requestAnimationFrame((()=>{this.updateIndicatorPosition()}))}else if(a){this.atuiChange.emit(a.id);this.updateTabActiveStates(t);requestAnimationFrame((()=>{this.updateIndicatorPosition()}))}}updateTabActiveStates(t){this.tabEls.forEach((e=>{e.is_active=e.tab_id===t}))}tabsetId=`tabset-${Math.random().toString(36).substring(2,11)}`;get indicatorRef(){return this.el.querySelector(`#indicator-${this.tabsetId}`)}get containerRef(){return this.el.querySelector(`#container-${this.tabsetId}`)}handleTabChange(t){this.active_tab=t}async getActiveTab(){return this.active_tab}async setActiveTab(t){this.active_tab=t}get tabOptions(){if(this.tabs){return this.tabs.map((t=>i("at-tab-trigger",{tab_id:t.id,tab_title:t.title,layout:this.layout,is_active:this.active_tab===t.id,fill:this.fill,onClick:()=>this.handleTabChange(t.id)})))}}updateIndicatorPosition(){if(!this.indicatorRef||!this.containerRef)return;const t=this.el.querySelector('at-tab-trigger[data-active="true"]');if(t){const e=this.containerRef.getBoundingClientRect();const a=t.getBoundingClientRect();this.indicatorRef.style.width=`${a.width-16}px`;this.indicatorRef.style.left=`${a.left-e.left}px`;this.indicatorRef.style.opacity="1"}}checkLayoutAndRender(){if(this.layout==="horizontal"){return i("at-layout",{class:"flex flex-grow",template:"tabset","data-name":"navigation-top"},!this.hide_nav&&i("div",{slot:"tabset-navigation"},i("nav",{role:"tablist",class:"relative flex flex-wrap gap-2 border-b border-gray-200 px-2 text-center text-sm font-medium",id:`container-${this.tabsetId}`},this.tabOptions,i("slot",{name:"tab-list"}),i("slot",{name:"tab-nav"}),i("div",{id:`indicator-${this.tabsetId}`,class:"bg-active-foreground pointer-events-none absolute bottom-0 z-10 mx-8 h-2 rounded-sm transition-[left] duration-150 ease-in-out",style:{left:"0",opacity:"0"},"aria-hidden":"true",role:"presentation"}))),i("div",{role:"tabpanel",slot:"tabset-content"},i("slot",{name:"tab-content"})))}if(this.layout==="vertical"){return i("at-layout",{class:"flex flex-grow",template:"master-detail","data-name":"navigation-left"},i("div",{slot:"master"},i("nav",{role:"tablist",class:"flex flex-grow flex-col pr-16"},this.tabOptions,i("slot",{name:"tab-list"}),i("slot",{name:"tab-nav"}))),i("div",{role:"tabpanel",slot:"detail",class:"flex flex-grow flex-col"},i("slot",{name:"tab-content"})))}}render(){return i(s,{key:"627ea8b9ca290933a0b8e62fc9119ef4f9477f6a"},this.checkLayoutAndRender())}static get watchers(){return{active_tab:["handleActiveTabChange"]}}};export{n as at_tabs};
//# sourceMappingURL=p-f06aeca6.entry.js.map