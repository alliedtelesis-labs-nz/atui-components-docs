import{r as t,c as n,h as e,H as i,g as o}from"./p-BvDeEv6o.js";const s=Math.min;const r=Math.max;const c=Math.round;const a=Math.floor;const l=t=>({x:t,y:t});const f={left:"right",right:"left",bottom:"top",top:"bottom"};const u={start:"end",end:"start"};function h(t,n,e){return r(t,s(n,e))}function d(t,n){return typeof t==="function"?t(n):t}function m(t){return t.split("-")[0]}function p(t){return t.split("-")[1]}function y(t){return t==="x"?"y":"x"}function g(t){return t==="y"?"height":"width"}const w=new Set(["top","bottom"]);function b(t){return w.has(m(t))?"y":"x"}function v(t){return y(b(t))}function x(t,n,e){if(e===void 0){e=false}const i=p(t);const o=v(t);const s=g(o);let r=o==="x"?i===(e?"end":"start")?"right":"left":i==="start"?"bottom":"top";if(n.reference[s]>n.floating[s]){r=C(r)}return[r,C(r)]}function k(t){const n=C(t);return[A(t),n,A(n)]}function A(t){return t.replace(/start|end/g,(t=>u[t]))}const S=["left","right"];const F=["right","left"];const M=["top","bottom"];const R=["bottom","top"];function E(t,n,e){switch(t){case"top":case"bottom":if(e)return n?F:S;return n?S:F;case"left":case"right":return n?M:R;default:return[]}}function O(t,n,e,i){const o=p(t);let s=E(m(t),e==="start",i);if(o){s=s.map((t=>t+"-"+o));if(n){s=s.concat(s.map(A))}}return s}function C(t){return t.replace(/left|right|bottom|top/g,(t=>f[t]))}function D(t){return{top:0,right:0,bottom:0,left:0,...t}}function L(t){return typeof t!=="number"?D(t):{top:t,right:t,bottom:t,left:t}}function P(t){const{x:n,y:e,width:i,height:o}=t;return{width:i,height:o,top:e,left:n,right:n+i,bottom:e+o,x:n,y:e}}function T(t,n,e){let{reference:i,floating:o}=t;const s=b(n);const r=v(n);const c=g(r);const a=m(n);const l=s==="y";const f=i.x+i.width/2-o.width/2;const u=i.y+i.height/2-o.height/2;const h=i[c]/2-o[c]/2;let d;switch(a){case"top":d={x:f,y:i.y-o.height};break;case"bottom":d={x:f,y:i.y+i.height};break;case"right":d={x:i.x+i.width,y:u};break;case"left":d={x:i.x-o.width,y:u};break;default:d={x:i.x,y:i.y}}switch(p(n)){case"start":d[r]-=h*(e&&l?-1:1);break;case"end":d[r]+=h*(e&&l?-1:1);break}return d}const $=async(t,n,e)=>{const{placement:i="bottom",strategy:o="absolute",middleware:s=[],platform:r}=e;const c=s.filter(Boolean);const a=await(r.isRTL==null?void 0:r.isRTL(n));let l=await r.getElementRects({reference:t,floating:n,strategy:o});let{x:f,y:u}=T(l,i,a);let h=i;let d={};let m=0;for(let e=0;e<c.length;e++){const{name:s,fn:p}=c[e];const{x:y,y:g,data:w,reset:b}=await p({x:f,y:u,initialPlacement:i,placement:h,strategy:o,middlewareData:d,rects:l,platform:r,elements:{reference:t,floating:n}});f=y!=null?y:f;u=g!=null?g:u;d={...d,[s]:{...d[s],...w}};if(b&&m<=50){m++;if(typeof b==="object"){if(b.placement){h=b.placement}if(b.rects){l=b.rects===true?await r.getElementRects({reference:t,floating:n,strategy:o}):b.rects}({x:f,y:u}=T(l,h,a))}e=-1}}return{x:f,y:u,placement:h,strategy:o,middlewareData:d}};async function z(t,n){var e;if(n===void 0){n={}}const{x:i,y:o,platform:s,rects:r,elements:c,strategy:a}=t;const{boundary:l="clippingAncestors",rootBoundary:f="viewport",elementContext:u="floating",altBoundary:h=false,padding:m=0}=d(n,t);const p=L(m);const y=u==="floating"?"reference":"floating";const g=c[h?y:u];const w=P(await s.getClippingRect({element:((e=await(s.isElement==null?void 0:s.isElement(g)))!=null?e:true)?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(c.floating)),boundary:l,rootBoundary:f,strategy:a}));const b=u==="floating"?{x:i,y:o,width:r.floating.width,height:r.floating.height}:r.reference;const v=await(s.getOffsetParent==null?void 0:s.getOffsetParent(c.floating));const x=await(s.isElement==null?void 0:s.isElement(v))?await(s.getScale==null?void 0:s.getScale(v))||{x:1,y:1}:{x:1,y:1};const k=P(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:b,offsetParent:v,strategy:a}):b);return{top:(w.top-k.top+p.top)/x.y,bottom:(k.bottom-w.bottom+p.bottom)/x.y,left:(w.left-k.left+p.left)/x.x,right:(k.right-w.right+p.right)/x.x}}const I=function(t){if(t===void 0){t={}}return{name:"flip",options:t,async fn(n){var e,i;const{placement:o,middlewareData:s,rects:r,initialPlacement:c,platform:a,elements:l}=n;const{mainAxis:f=true,crossAxis:u=true,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:g=true,...w}=d(t,n);if((e=s.arrow)!=null&&e.alignmentOffset){return{}}const v=m(o);const A=b(c);const S=m(c)===c;const F=await(a.isRTL==null?void 0:a.isRTL(l.floating));const M=h||(S||!g?[C(c)]:k(c));const R=y!=="none";if(!h&&R){M.push(...O(c,g,y,F))}const E=[c,...M];const D=await z(n,w);const L=[];let P=((i=s.flip)==null?void 0:i.overflows)||[];if(f){L.push(D[v])}if(u){const t=x(o,r,F);L.push(D[t[0]],D[t[1]])}P=[...P,{placement:o,overflows:L}];if(!L.every((t=>t<=0))){var T,$;const t=(((T=s.flip)==null?void 0:T.index)||0)+1;const n=E[t];if(n){const e=u==="alignment"?A!==b(n):false;if(!e||P.every((t=>b(t.placement)===A?t.overflows[0]>0:true))){return{data:{index:t,overflows:P},reset:{placement:n}}}}let e=($=P.filter((t=>t.overflows[0]<=0)).sort(((t,n)=>t.overflows[1]-n.overflows[1]))[0])==null?void 0:$.placement;if(!e){switch(p){case"bestFit":{var I;const t=(I=P.filter((t=>{if(R){const n=b(t.placement);return n===A||n==="y"}return true})).map((t=>[t.placement,t.overflows.filter((t=>t>0)).reduce(((t,n)=>t+n),0)])).sort(((t,n)=>t[1]-n[1]))[0])==null?void 0:I[0];if(t){e=t}break}case"initialPlacement":e=c;break}}if(o!==e){return{reset:{placement:e}}}}return{}}}};const j=new Set(["left","top"]);async function B(t,n){const{placement:e,platform:i,elements:o}=t;const s=await(i.isRTL==null?void 0:i.isRTL(o.floating));const r=m(e);const c=p(e);const a=b(e)==="y";const l=j.has(r)?-1:1;const f=s&&a?-1:1;const u=d(n,t);let{mainAxis:h,crossAxis:y,alignmentAxis:g}=typeof u==="number"?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};if(c&&typeof g==="number"){y=c==="end"?g*-1:g}return a?{x:y*f,y:h*l}:{x:h*l,y:y*f}}const H=function(t){if(t===void 0){t=0}return{name:"offset",options:t,async fn(n){var e,i;const{x:o,y:s,placement:r,middlewareData:c}=n;const a=await B(n,t);if(r===((e=c.offset)==null?void 0:e.placement)&&(i=c.arrow)!=null&&i.alignmentOffset){return{}}return{x:o+a.x,y:s+a.y,data:{...a,placement:r}}}}};const q=function(t){if(t===void 0){t={}}return{name:"shift",options:t,async fn(n){const{x:e,y:i,placement:o}=n;const{mainAxis:s=true,crossAxis:r=false,limiter:c={fn:t=>{let{x:n,y:e}=t;return{x:n,y:e}}},...a}=d(t,n);const l={x:e,y:i};const f=await z(n,a);const u=b(m(o));const p=y(u);let g=l[p];let w=l[u];if(s){const t=p==="y"?"top":"left";const n=p==="y"?"bottom":"right";const e=g+f[t];const i=g-f[n];g=h(e,g,i)}if(r){const t=u==="y"?"top":"left";const n=u==="y"?"bottom":"right";const e=w+f[t];const i=w-f[n];w=h(e,w,i)}const v=c.fn({...n,[p]:g,[u]:w});return{...v,data:{x:v.x-e,y:v.y-i,enabled:{[p]:s,[u]:r}}}}}};const N=function(t){if(t===void 0){t={}}return{name:"size",options:t,async fn(n){var e,i;const{placement:o,rects:c,platform:a,elements:l}=n;const{apply:f=()=>{},...u}=d(t,n);const h=await z(n,u);const y=m(o);const g=p(o);const w=b(o)==="y";const{width:v,height:x}=c.floating;let k;let A;if(y==="top"||y==="bottom"){k=y;A=g===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"}else{A=y;k=g==="end"?"top":"bottom"}const S=x-h.top-h.bottom;const F=v-h.left-h.right;const M=s(x-h[k],S);const R=s(v-h[A],F);const E=!n.middlewareData.shift;let O=M;let C=R;if((e=n.middlewareData.shift)!=null&&e.enabled.x){C=F}if((i=n.middlewareData.shift)!=null&&i.enabled.y){O=S}if(E&&!g){const t=r(h.left,0);const n=r(h.right,0);const e=r(h.top,0);const i=r(h.bottom,0);if(w){C=v-2*(t!==0||n!==0?t+n:r(h.left,h.right))}else{O=x-2*(e!==0||i!==0?e+i:r(h.top,h.bottom))}}await f({...n,availableWidth:C,availableHeight:O});const D=await a.getDimensions(l.floating);if(v!==D.width||x!==D.height){return{reset:{rects:true}}}return{}}}};function U(){return typeof window!=="undefined"}function W(t){if(V(t)){return(t.nodeName||"").toLowerCase()}return"#document"}function K(t){var n;return(t==null||(n=t.ownerDocument)==null?void 0:n.defaultView)||window}function _(t){var n;return(n=(V(t)?t.ownerDocument:t.document)||window.document)==null?void 0:n.documentElement}function V(t){if(!U()){return false}return t instanceof Node||t instanceof K(t).Node}function X(t){if(!U()){return false}return t instanceof Element||t instanceof K(t).Element}function Y(t){if(!U()){return false}return t instanceof HTMLElement||t instanceof K(t).HTMLElement}function G(t){if(!U()||typeof ShadowRoot==="undefined"){return false}return t instanceof ShadowRoot||t instanceof K(t).ShadowRoot}const J=new Set(["inline","contents"]);function Q(t){const{overflow:n,overflowX:e,overflowY:i,display:o}=ut(t);return/auto|scroll|overlay|hidden|clip/.test(n+i+e)&&!J.has(o)}const Z=new Set(["table","td","th"]);function tt(t){return Z.has(W(t))}const nt=[":popover-open",":modal"];function et(t){return nt.some((n=>{try{return t.matches(n)}catch(t){return false}}))}const it=["transform","translate","scale","rotate","perspective"];const ot=["transform","translate","scale","rotate","perspective","filter"];const st=["paint","layout","strict","content"];function rt(t){const n=at();const e=X(t)?ut(t):t;return it.some((t=>e[t]?e[t]!=="none":false))||(e.containerType?e.containerType!=="normal":false)||!n&&(e.backdropFilter?e.backdropFilter!=="none":false)||!n&&(e.filter?e.filter!=="none":false)||ot.some((t=>(e.willChange||"").includes(t)))||st.some((t=>(e.contain||"").includes(t)))}function ct(t){let n=dt(t);while(Y(n)&&!ft(n)){if(rt(n)){return n}else if(et(n)){return null}n=dt(n)}return null}function at(){if(typeof CSS==="undefined"||!CSS.supports)return false;return CSS.supports("-webkit-backdrop-filter","none")}const lt=new Set(["html","body","#document"]);function ft(t){return lt.has(W(t))}function ut(t){return K(t).getComputedStyle(t)}function ht(t){if(X(t)){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}return{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function dt(t){if(W(t)==="html"){return t}const n=t.assignedSlot||t.parentNode||G(t)&&t.host||_(t);return G(n)?n.host:n}function mt(t){const n=dt(t);if(ft(n)){return t.ownerDocument?t.ownerDocument.body:t.body}if(Y(n)&&Q(n)){return n}return mt(n)}function pt(t,n,e){var i;if(n===void 0){n=[]}if(e===void 0){e=true}const o=mt(t);const s=o===((i=t.ownerDocument)==null?void 0:i.body);const r=K(o);if(s){const t=yt(r);return n.concat(r,r.visualViewport||[],Q(o)?o:[],t&&e?pt(t):[])}return n.concat(o,pt(o,[],e))}function yt(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function gt(t){const n=ut(t);let e=parseFloat(n.width)||0;let i=parseFloat(n.height)||0;const o=Y(t);const s=o?t.offsetWidth:e;const r=o?t.offsetHeight:i;const a=c(e)!==s||c(i)!==r;if(a){e=s;i=r}return{width:e,height:i,$:a}}function wt(t){return!X(t)?t.contextElement:t}function bt(t){const n=wt(t);if(!Y(n)){return l(1)}const e=n.getBoundingClientRect();const{width:i,height:o,$:s}=gt(n);let r=(s?c(e.width):e.width)/i;let a=(s?c(e.height):e.height)/o;if(!r||!Number.isFinite(r)){r=1}if(!a||!Number.isFinite(a)){a=1}return{x:r,y:a}}const vt=l(0);function xt(t){const n=K(t);if(!at()||!n.visualViewport){return vt}return{x:n.visualViewport.offsetLeft,y:n.visualViewport.offsetTop}}function kt(t,n,e){if(n===void 0){n=false}if(!e||n&&e!==K(t)){return false}return n}function At(t,n,e,i){if(n===void 0){n=false}if(e===void 0){e=false}const o=t.getBoundingClientRect();const s=wt(t);let r=l(1);if(n){if(i){if(X(i)){r=bt(i)}}else{r=bt(t)}}const c=kt(s,e,i)?xt(s):l(0);let a=(o.left+c.x)/r.x;let f=(o.top+c.y)/r.y;let u=o.width/r.x;let h=o.height/r.y;if(s){const t=K(s);const n=i&&X(i)?K(i):i;let e=t;let o=yt(e);while(o&&i&&n!==e){const t=bt(o);const n=o.getBoundingClientRect();const i=ut(o);const s=n.left+(o.clientLeft+parseFloat(i.paddingLeft))*t.x;const r=n.top+(o.clientTop+parseFloat(i.paddingTop))*t.y;a*=t.x;f*=t.y;u*=t.x;h*=t.y;a+=s;f+=r;e=K(o);o=yt(e)}}return P({width:u,height:h,x:a,y:f})}function St(t,n){const e=ht(t).scrollLeft;if(!n){return At(_(t)).left+e}return n.left+e}function Ft(t,n,e){if(e===void 0){e=false}const i=t.getBoundingClientRect();const o=i.left+n.scrollLeft-(e?0:St(t,i));const s=i.top+n.scrollTop;return{x:o,y:s}}function Mt(t){let{elements:n,rect:e,offsetParent:i,strategy:o}=t;const s=o==="fixed";const r=_(i);const c=n?et(n.floating):false;if(i===r||c&&s){return e}let a={scrollLeft:0,scrollTop:0};let f=l(1);const u=l(0);const h=Y(i);if(h||!h&&!s){if(W(i)!=="body"||Q(r)){a=ht(i)}if(Y(i)){const t=At(i);f=bt(i);u.x=t.x+i.clientLeft;u.y=t.y+i.clientTop}}const d=r&&!h&&!s?Ft(r,a,true):l(0);return{width:e.width*f.x,height:e.height*f.y,x:e.x*f.x-a.scrollLeft*f.x+u.x+d.x,y:e.y*f.y-a.scrollTop*f.y+u.y+d.y}}function Rt(t){return Array.from(t.getClientRects())}function Et(t){const n=_(t);const e=ht(t);const i=t.ownerDocument.body;const o=r(n.scrollWidth,n.clientWidth,i.scrollWidth,i.clientWidth);const s=r(n.scrollHeight,n.clientHeight,i.scrollHeight,i.clientHeight);let c=-e.scrollLeft+St(t);const a=-e.scrollTop;if(ut(i).direction==="rtl"){c+=r(n.clientWidth,i.clientWidth)-o}return{width:o,height:s,x:c,y:a}}function Ot(t,n){const e=K(t);const i=_(t);const o=e.visualViewport;let s=i.clientWidth;let r=i.clientHeight;let c=0;let a=0;if(o){s=o.width;r=o.height;const t=at();if(!t||t&&n==="fixed"){c=o.offsetLeft;a=o.offsetTop}}return{width:s,height:r,x:c,y:a}}const Ct=new Set(["absolute","fixed"]);function Dt(t,n){const e=At(t,true,n==="fixed");const i=e.top+t.clientTop;const o=e.left+t.clientLeft;const s=Y(t)?bt(t):l(1);const r=t.clientWidth*s.x;const c=t.clientHeight*s.y;const a=o*s.x;const f=i*s.y;return{width:r,height:c,x:a,y:f}}function Lt(t,n,e){let i;if(n==="viewport"){i=Ot(t,e)}else if(n==="document"){i=Et(_(t))}else if(X(n)){i=Dt(n,e)}else{const e=xt(t);i={x:n.x-e.x,y:n.y-e.y,width:n.width,height:n.height}}return P(i)}function Pt(t,n){const e=dt(t);if(e===n||!X(e)||ft(e)){return false}return ut(e).position==="fixed"||Pt(e,n)}function Tt(t,n){const e=n.get(t);if(e){return e}let i=pt(t,[],false).filter((t=>X(t)&&W(t)!=="body"));let o=null;const s=ut(t).position==="fixed";let r=s?dt(t):t;while(X(r)&&!ft(r)){const n=ut(r);const e=rt(r);if(!e&&n.position==="fixed"){o=null}const c=s?!e&&!o:!e&&n.position==="static"&&!!o&&Ct.has(o.position)||Q(r)&&!e&&Pt(t,r);if(c){i=i.filter((t=>t!==r))}else{o=n}r=dt(r)}n.set(t,i);return i}function $t(t){let{element:n,boundary:e,rootBoundary:i,strategy:o}=t;const c=e==="clippingAncestors"?et(n)?[]:Tt(n,this._c):[].concat(e);const a=[...c,i];const l=a[0];const f=a.reduce(((t,e)=>{const i=Lt(n,e,o);t.top=r(i.top,t.top);t.right=s(i.right,t.right);t.bottom=s(i.bottom,t.bottom);t.left=r(i.left,t.left);return t}),Lt(n,l,o));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}}function zt(t){const{width:n,height:e}=gt(t);return{width:n,height:e}}function It(t,n,e){const i=Y(n);const o=_(n);const s=e==="fixed";const r=At(t,true,s,n);let c={scrollLeft:0,scrollTop:0};const a=l(0);function f(){a.x=St(o)}if(i||!i&&!s){if(W(n)!=="body"||Q(o)){c=ht(n)}if(i){const t=At(n,true,s,n);a.x=t.x+n.clientLeft;a.y=t.y+n.clientTop}else if(o){f()}}if(s&&!i&&o){f()}const u=o&&!i&&!s?Ft(o,c):l(0);const h=r.left+c.scrollLeft-a.x-u.x;const d=r.top+c.scrollTop-a.y-u.y;return{x:h,y:d,width:r.width,height:r.height}}function jt(t){return ut(t).position==="static"}function Bt(t,n){if(!Y(t)||ut(t).position==="fixed"){return null}if(n){return n(t)}let e=t.offsetParent;if(_(t)===e){e=e.ownerDocument.body}return e}function Ht(t,n){const e=K(t);if(et(t)){return e}if(!Y(t)){let n=dt(t);while(n&&!ft(n)){if(X(n)&&!jt(n)){return n}n=dt(n)}return e}let i=Bt(t,n);while(i&&tt(i)&&jt(i)){i=Bt(i,n)}if(i&&ft(i)&&jt(i)&&!rt(i)){return e}return i||ct(t)||e}const qt=async function(t){const n=this.getOffsetParent||Ht;const e=this.getDimensions;const i=await e(t.floating);return{reference:It(t.reference,await n(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function Nt(t){return ut(t).direction==="rtl"}const Ut={convertOffsetParentRelativeRectToViewportRelativeRect:Mt,getDocumentElement:_,getClippingRect:$t,getOffsetParent:Ht,getElementRects:qt,getClientRects:Rt,getDimensions:zt,getScale:bt,isElement:X,isRTL:Nt};function Wt(t,n){return t.x===n.x&&t.y===n.y&&t.width===n.width&&t.height===n.height}function Kt(t,n){let e=null;let i;const o=_(t);function c(){var t;clearTimeout(i);(t=e)==null||t.disconnect();e=null}function l(f,u){if(f===void 0){f=false}if(u===void 0){u=1}c();const h=t.getBoundingClientRect();const{left:d,top:m,width:p,height:y}=h;if(!f){n()}if(!p||!y){return}const g=a(m);const w=a(o.clientWidth-(d+p));const b=a(o.clientHeight-(m+y));const v=a(d);const x=-g+"px "+-w+"px "+-b+"px "+-v+"px";const k={rootMargin:x,threshold:r(0,s(1,u))||1};let A=true;function S(n){const e=n[0].intersectionRatio;if(e!==u){if(!A){return l()}if(!e){i=setTimeout((()=>{l(false,1e-7)}),1e3)}else{l(false,e)}}if(e===1&&!Wt(h,t.getBoundingClientRect())){l()}A=false}try{e=new IntersectionObserver(S,{...k,root:o.ownerDocument})}catch(t){e=new IntersectionObserver(S,k)}e.observe(t)}l(true);return c}function _t(t,n,e,i){if(i===void 0){i={}}const{ancestorScroll:o=true,ancestorResize:s=true,elementResize:r=typeof ResizeObserver==="function",layoutShift:c=typeof IntersectionObserver==="function",animationFrame:a=false}=i;const l=wt(t);const f=o||s?[...l?pt(l):[],...pt(n)]:[];f.forEach((t=>{o&&t.addEventListener("scroll",e,{passive:true});s&&t.addEventListener("resize",e)}));const u=l&&c?Kt(l,e):null;let h=-1;let d=null;if(r){d=new ResizeObserver((t=>{let[i]=t;if(i&&i.target===l&&d){d.unobserve(n);cancelAnimationFrame(h);h=requestAnimationFrame((()=>{var t;(t=d)==null||t.observe(n)}))}e()}));if(l&&!a){d.observe(l)}d.observe(n)}let m;let p=a?At(t):null;if(a){y()}function y(){const n=At(t);if(p&&!Wt(p,n)){e()}p=n;m=requestAnimationFrame(y)}e();return()=>{var t;f.forEach((t=>{o&&t.removeEventListener("scroll",e);s&&t.removeEventListener("resize",e)}));u==null||u();(t=d)==null||t.disconnect();d=null;if(a){cancelAnimationFrame(m)}}}const Vt=H;const Xt=q;const Yt=I;const Gt=N;const Jt=(t,n,e)=>{const i=new Map;const o={platform:Ut,...e};const s={...o.platform,_c:i};return $(t,n,{...o,platform:s})};const Qt=class{constructor(e){t(this,e);this.atuiMenuStateChange=n(this,"atuiMenuStateChange",7);this.offset_x=0;this.offset_y=0;this.position="bottom";this.align="start";this.autoclose=true;this.trigger="click";this.role="menu";this.disabled=false;this.isOpen=false;this.updatePosition=async()=>{if(this.triggerEl&&this.menuEl&&this.isOpen){await this.updateFloatingPosition()}}}disabledChanged(t){if(t&&this.isOpen){this.closeMenu()}}async toggleMenu(){if(this.disabled){return}if(this.menuEl){this.menuEl.togglePopover();this.isOpen=this.menuEl.matches(":popover-open")}this.atuiMenuStateChange.emit(this.isOpen);await this.updatePosition()}async openMenu(){if(this.disabled){return}if(this.menuEl){this.menuEl.showPopover();this.isOpen=true}this.atuiMenuStateChange.emit(true);await this.updatePosition()}async closeMenu(){if(this.menuEl){this.menuEl.hidePopover();this.isOpen=false}this.atuiMenuStateChange.emit(false)}async getIsOpen(){return this.isOpen}async componentDidLoad(){this.popoverId=`atui-menu-${Math.random().toString(36).substr(2,9)}`;await this.setupFloatingUI();setTimeout((()=>this.setupPopoverEventListeners()),0)}setupPopoverEventListeners(){if(this.menuEl){this.menuEl.addEventListener("toggle",(t=>{const n=t;this.isOpen=n.newState==="open";this.atuiMenuStateChange.emit(this.isOpen);if(this.isOpen){requestAnimationFrame((()=>this.updatePosition()))}}))}}disconnectedCallback(){this.cleanupFloatingUI()}async mouseEnterHandler(){if(this.timedOutCloser)clearTimeout(this.timedOutCloser);if(!this.isOpen){await this.openMenu()}}async mouseLeaveHandler(){await this.closeMenu()}async setupFloatingUI(){if(this.cleanupAutoUpdate){this.cleanupAutoUpdate()}if(this.triggerEl&&this.menuEl){const t=new IntersectionObserver((t=>{if(!t[0].isIntersecting&&this.isOpen){this.mouseLeaveHandler()}}),{threshold:0});t.observe(this.triggerEl);this.cleanupAutoUpdate=_t(this.triggerEl,this.menuEl,(()=>{if(this.isOpen){const t=this.getFloatingUIPlacement();const n="fixed";Jt(this.triggerEl,this.menuEl,{placement:t,strategy:n,middleware:[Vt(this.position==="bottom"||this.position==="top"?this.offset_y:this.offset_x),Yt({fallbackStrategy:"bestFit",padding:8}),Xt({padding:8,mainAxis:true,crossAxis:true}),Gt({apply({availableWidth:t,availableHeight:n,elements:e}){Object.assign(e.floating.style,{maxWidth:`${t}px`,maxHeight:`${n}px`})}})]}).then((({x:t,y:e})=>{const i={position:n,left:`${t}px`,top:`${e}px`,margin:"0",transform:"none"};if(this.width){i.width=this.width}Object.assign(this.menuEl.style,i)}))}}),{ancestorScroll:true,ancestorResize:true,elementResize:true,layoutShift:true,animationFrame:true});const n=this.cleanupAutoUpdate;this.cleanupAutoUpdate=()=>{n();t.disconnect()}}}cleanupFloatingUI(){if(this.cleanupAutoUpdate){this.cleanupAutoUpdate();this.cleanupAutoUpdate=undefined}}async updateFloatingPosition(){if(!this.triggerEl||!this.menuEl)return;this.setupFloatingUI()}getFloatingUIPlacement(){const t={top:"top",bottom:"bottom",left:"left",right:"right"};const n={start:"start",end:"end"};const e=t[this.position]||"bottom";const i=n[this.align]||"start";return`${e}-${i}`}render(){const t={popover:"auto",id:this.popoverId};const n={};return e(i,{key:"daea5bb52871c22f749e376ddfeea4bec58b3688",class:"relative z-modal"},e("div",{key:"dba4f637383eae25ee84c6d907a26d7a003bf5ec",class:"relative",onBlur:()=>this.trigger==="click"&&!this.disabled?this.mouseLeaveHandler():null},e("div",Object.assign({key:"67f378f73edce625ba9e04a1733909d8ea4c88f3","aria-haspopup":"true","data-name":"menu-trigger",ref:t=>this.triggerEl=t,"aria-expanded":`${this.isOpen?"true":"false"}`},n,{onMouseEnter:()=>this.trigger==="hover"&&!this.disabled?this.mouseEnterHandler():null,onKeyDown:async t=>{switch(t.key){case"Escape":await this.closeMenu();break;case"Enter":case" ":t.preventDefault();await this.toggleMenu();break}},onMouseLeave:()=>this.trigger==="hover"&&!this.disabled?this.mouseLeaveHandler():null,onClick:async t=>{if(this.trigger==="click"&&!this.disabled){t.preventDefault();t.stopPropagation();if(this.isOpen){await this.closeMenu()}else{await this.openMenu()}}},class:this.disabled?"contents":""}),e("slot",{key:"63769b68d5bea6e94deb3a25f399e3c5fccf7070",name:"menu-trigger"})),e("div",Object.assign({key:"5740471e881c4aa21d0b0e4ff598fc23b37b6a5a",role:this.role,"data-position":this.position,"data-align":this.align,ref:t=>this.menuEl=t,"aria-hidden":`${this.isOpen?"false":"true"}`},t,{onMouseEnter:()=>this.trigger==="hover"&&!this.disabled&&this.mouseEnterHandler(),onMouseLeave:()=>this.trigger==="hover"&&!this.disabled&&this.mouseLeaveHandler(),onKeyDown:t=>{if(t.key==="Enter"||t.key===" "||t.key==="Escape"){if(this.autoclose){this.mouseLeaveHandler()}}},onClick:()=>this.autoclose&&this.mouseLeaveHandler(),class:"w-fit rounded-md border border-solid border-light bg-white p-4 shadow-md","data-name":"menu-content-wrapper"}),e("slot",{key:"22aaaffd1e1187b4724c50b81b6c99d5ebc3167c",name:"menu-content"}))))}get el(){return o(this)}static get watchers(){return{disabled:["disabledChanged"]}}};export{Qt as atui_menu};
//# sourceMappingURL=p-aeda0833.entry.js.map