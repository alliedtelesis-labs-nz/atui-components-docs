{"version":3,"file":"at-checkbox-header.entry.esm.js","sources":["src/components/table-components/header-components/at-checkbox-header/at-checkbox-header.tsx"],"sourcesContent":["import { Component, h, State, Element } from '@stencil/core';\nimport { ICellRendererComp, RowNode } from 'ag-grid-community';\n\n/**\n * @category Data Tables\n * @description A header component for displaying a checkbox.\n */\n\n@Component({\n    tag: 'at-checkbox-header',\n    shadow: false,\n})\nexport class AtCheckboxHeaderComponent implements ICellRendererComp {\n    @State() params;\n    @State() disabled: boolean;\n    @State() isChecked: boolean;\n    @Element() el: HTMLAtCheckboxHeaderElement;\n\n    init(params) {\n        this.params = params;\n        this.params.width = 60;\n        this.setDisabled();\n\n        const nodes = this.params.api.getRenderedNodes().filter(Boolean);\n        const checkedNodes = nodes.filter((rowNode: RowNode) => {\n            return typeof rowNode.data === 'boolean'\n                ? rowNode.data\n                : rowNode.data[this.params.column.colId];\n        });\n        this.isChecked = nodes.length && nodes.length === checkedNodes.length;\n    }\n\n    getGui(): HTMLElement {\n        return this.el as unknown as HTMLElement;\n    }\n\n    refresh(params): boolean {\n        this.params = params;\n        this.setDisabled();\n        return true;\n    }\n\n    setRowsValue(checked: boolean): void {\n        if (checked !== undefined) {\n            const nodes = this.params.api.getRenderedNodes().filter(Boolean);\n            nodes.forEach((rowNode: RowNode) => {\n                rowNode.setDataValue(this.params.column.colId, checked);\n            });\n        }\n    }\n\n    private setDisabled(): void {\n        if (!this.params?.api) return;\n\n        const renderedNodes = this.params.api.getRenderedNodes();\n        const data: any[] = renderedNodes.map((node) => node.data);\n        if (this.params.getDisabled !== undefined) {\n            this.disabled = this.params.getDisabled(data);\n        }\n    }\n\n    render() {\n        return (\n            <at-checkbox\n                disabled={this.disabled}\n                value={this.isChecked}\n                onAtuiChange={(event: CustomEvent) =>\n                    this.setRowsValue(event.detail)\n                }\n            ></at-checkbox>\n        );\n    }\n}\n"],"names":[],"mappings":";;MAYa,yBAAyB,GAAA,MAAA;;;;AACzB,IAAA,MAAM;AACN,IAAA,QAAQ;AACR,IAAA,SAAS;;AAGlB,IAAA,IAAI,CAAC,MAAM,EAAA;AACP,QAAA,IAAI,CAAC,MAAM,GAAG,MAAM;AACpB,QAAA,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,EAAE;QACtB,IAAI,CAAC,WAAW,EAAE;AAElB,QAAA,MAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,gBAAgB,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC;QAChE,MAAM,YAAY,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC,OAAgB,KAAI;AACnD,YAAA,OAAO,OAAO,OAAO,CAAC,IAAI,KAAK;kBACzB,OAAO,CAAC;AACV,kBAAE,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC;AAChD,SAAC,CAAC;AACF,QAAA,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC,MAAM,IAAI,KAAK,CAAC,MAAM,KAAK,YAAY,CAAC,MAAM;;IAGzE,MAAM,GAAA;QACF,OAAO,IAAI,CAAC,EAA4B;;AAG5C,IAAA,OAAO,CAAC,MAAM,EAAA;AACV,QAAA,IAAI,CAAC,MAAM,GAAG,MAAM;QACpB,IAAI,CAAC,WAAW,EAAE;AAClB,QAAA,OAAO,IAAI;;AAGf,IAAA,YAAY,CAAC,OAAgB,EAAA;AACzB,QAAA,IAAI,OAAO,KAAK,SAAS,EAAE;AACvB,YAAA,MAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,gBAAgB,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC;AAChE,YAAA,KAAK,CAAC,OAAO,CAAC,CAAC,OAAgB,KAAI;AAC/B,gBAAA,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,EAAE,OAAO,CAAC;AAC3D,aAAC,CAAC;;;IAIF,WAAW,GAAA;AACf,QAAA,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG;YAAE;QAEvB,MAAM,aAAa,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,gBAAgB,EAAE;AACxD,QAAA,MAAM,IAAI,GAAU,aAAa,CAAC,GAAG,CAAC,CAAC,IAAI,KAAK,IAAI,CAAC,IAAI,CAAC;QAC1D,IAAI,IAAI,CAAC,MAAM,CAAC,WAAW,KAAK,SAAS,EAAE;YACvC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC;;;IAIrD,MAAM,GAAA;AACF,QAAA,QACI,CAAA,CAAA,aAAA,EAAA,EAAA,GAAA,EAAA,0CAAA,EACI,QAAQ,EAAE,IAAI,CAAC,QAAQ,EACvB,KAAK,EAAE,IAAI,CAAC,SAAS,EACrB,YAAY,EAAE,CAAC,KAAkB,KAC7B,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,MAAM,CAAC,EAAA,CAExB;;;;;;"}