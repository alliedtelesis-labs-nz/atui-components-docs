import{r as i,c as a,g as t,h as e,H as s}from"./p-jvbUuQtg.js";const o=class{constructor(t){i(this,t),this.atuiDialogChange=a(this,"atuiDialogChange",7)}get el(){return t(this)}role="dialog";backdrop=!0;close_backdrop=!1;trigger_id;isOpen=!1;atuiDialogChange;dialog;dialogWrapper;triggerEls=[];externalTriggerListeners=[];async toggleDialog(){this.isOpen?await this.closeDialog():await this.openDialog()}async openDialog(){this.dialog&&!this.isOpen&&(!0===this.backdrop?this.dialog.showModal():this.dialog.show(),this.isOpen=!0,this.atuiDialogChange.emit(this.isOpen))}async closeDialog(){this.dialog&&this.isOpen&&(this.dialog.close(),this.isOpen=!1,this.atuiDialogChange.emit(this.isOpen),this.dialog.removeAttribute("open"))}async getIsOpen(){return this.isOpen}handleDialogClose=()=>{this.isOpen&&this.closeDialog()};handleKeyDown=i=>{"Escape"===i.key&&this.isOpen&&(i.preventDefault(),this.closeDialog())};offClickHandler(i){this.close_backdrop&&this.dialog?.open&&(this.dialogWrapper?.contains(i.target)||this.handleDialogClose())}async componentDidLoad(){if(this.trigger_id){if(this.triggerEls=Array.from(document.querySelectorAll(`[data-dialog="${this.trigger_id}"]`)),0===this.triggerEls.length)return void console.warn(`atui-dialog: No elements found with data-dialog="${this.trigger_id}"`);this.setupExternalTriggerListeners()}}disconnectedCallback(){this.cleanupExternalTriggerListeners()}cleanupExternalTriggerListeners(){this.externalTriggerListeners.forEach((({element:i,event:a,handler:t})=>{i.removeEventListener(a,t)})),this.externalTriggerListeners=[]}setupExternalTriggerListeners(){if(!this.triggerEls||0===this.triggerEls.length)return;const i=async i=>{i.preventDefault(),i.stopPropagation(),await this.toggleDialog()},a=async i=>{switch(i.key){case"Enter":case" ":i.preventDefault(),await this.toggleDialog()}};this.triggerEls.forEach((t=>{t.addEventListener("click",i),t.addEventListener("keydown",a),this.externalTriggerListeners.push({element:t,event:"click",handler:i},{element:t,event:"keydown",handler:a})}))}render(){return e(s,{key:"bfe99bbe38d4c0720179de0b5e679dac7e449ba9","data-open":this.isOpen},e("dialog",{key:"8cc8fd16379aa9d0c9278ee0d3a8f7192df8c2f5",ref:i=>this.dialog=i,"data-name":"dialog",class:this.backdrop?"backdrop":"",role:this.role,"aria-modal":"true",onClose:this.handleDialogClose,onKeyDown:this.handleKeyDown},e("div",{key:"e72530093465e45adc3a6d69048e8c070f9aabfd","data-name":"content",ref:i=>this.dialogWrapper=i},e("slot",{key:"31356d10a58467026021ecc8de078169a644dc17"}))))}};o.style="@keyframes fadeIn{from{background-color:rgba(0, 0, 0, 0)}to{background-color:rgba(0, 0, 0, 0.2)}}dialog.backdrop.sc-at-dialog::backdrop{margin:0;inset:0;background:rgba(0, 0, 0, 0.2);animation:fadeIn 0.3s ease forwards;transition:opacity var(--token-transition-time) ease-in-out allow-discrete}dialog.backdrop.sc-at-dialog::backdrop{z-index:var(--z-backdrop, 1000)}.sc-at-dialog-h{display:contents}.sc-at-dialog-h dialog.sc-at-dialog{position:fixed;inset:0;margin:0;display:flex;align-items:center;justify-content:center;min-width:100vw;min-height:100vh;overflow:hidden;border:0;padding:0;background:transparent;z-index:var(--token-z-index-modal);transform-origin:center;opacity:0;box-shadow:var(--token-shadow-3);visibility:hidden;transition:translate 0.3s ease, scale 0.3s ease, opacity 0.3s ease, visibility 0s linear 0.3s}.sc-at-dialog-h dialog.backdrop.sc-at-dialog{display:flex;width:100vw;height:100vh}.sc-at-dialog-h dialog[open].sc-at-dialog{translate:0 0;scale:1;opacity:1;visibility:visible;transition:translate 0.3s ease, scale 0.3s ease, opacity 0.3s ease, visibility 0s linear}@starting-style{.sc-at-dialog-h dialog[open]{opacity:0}}.sc-at-dialog-h dialog.sc-at-dialog:not([open]){opacity:0;visibility:hidden}";export{o as at_dialog}