{"version":3,"file":"at-menu.entry.esm.js","sources":["src/components/at-menu/at-menu.tsx"],"sourcesContent":["import {\n    Component,\n    h,\n    Host,\n    Prop,\n    State,\n    Element,\n    Method,\n    Event,\n    EventEmitter,\n    Watch,\n} from '@stencil/core';\nimport {\n    computePosition,\n    flip,\n    shift,\n    offset,\n    size,\n    autoUpdate,\n    type Placement,\n} from '@floating-ui/dom';\n\n/**\n * @category Overlays\n * @description A popover menu component for displaying action lists when via click or hover on a trigger element.\n *\n * @slot menu-trigger - Trigger element for the menu (only used when trigger_id is not provided)\n * @slot default - Content to display inside the menu\n */\n\nexport type Position = 'top' | 'bottom' | 'left' | 'right';\nexport type Align = 'start' | 'end';\nexport type OpenOn = 'hover' | 'click';\nexport type AriaRole = 'menu' | 'listbox';\n\n@Component({\n    tag: 'at-menu',\n    shadow: false,\n})\nexport class AtMenu {\n    /**\n     * Menu's x offset from edge in pixels. Only applied for origin_x = 'start' | 'end'\n     */\n    @Prop() offset_x: number = 0;\n\n    /**\n     * Menu's y offset from edge in pixels. Only applied for origin_y = 'top' | 'bottom'\n     */\n    @Prop() offset_y: number = 0;\n\n    /**\n     * Position of opened menu element relative to the trigger element.\n     */\n    @Prop() position: Position = 'bottom';\n\n    /**\n     * Alignment of opened menu element relative to trigger element.\n     */\n    @Prop() align: Align = 'start';\n\n    /**\n     * String representing the 'width' style of the menu element ('auto' or 'NUMpx'). When not specified, defaults to trigger element width.\n     * To fit menu to content use width=\"fit-content\" - Avoid width='auto' as this will result in 100% width.\n     */\n    @Prop() width?: string;\n\n    /**\n     * Prevent closing of menu when options are selected. Used for multi-selection controls.\n     */\n    @Prop() autoclose: boolean = true;\n\n    /**\n     * Event type that triggers the menu open state. Click or Hover.\n     */\n    @Prop() trigger: OpenOn = 'click';\n\n    /**\n     * Close the menu when the user clicks within the menu panel. Default for single selection menus.\n     */\n    @Prop() role: AriaRole = 'menu';\n\n    /**\n     * Prevent opening menu\n     */\n    @Prop() disabled: boolean = false;\n\n    /**\n     * Data-id of an external element to use as the trigger. When provided, the trigger slot is not needed.\n     */\n    @Prop() trigger_id?: string;\n\n    @Watch('disabled')\n    disabledChanged(newValue: boolean) {\n        if (newValue && this.isOpen) {\n            this.closeMenu();\n        }\n    }\n\n    @State() isOpen = false;\n    triggerEl: HTMLElement;\n    menuEl: HTMLElement;\n    private triggerEls: HTMLElement[] = [];\n    private popoverId: string;\n    private cleanupAutoUpdate?: () => void;\n    private updatePosition = async () => {\n        if (this.triggerEl && this.menuEl && this.isOpen) {\n            await this.updateFloatingPosition();\n        }\n    };\n\n    @Element() el: HTMLElement;\n\n    /**\n     * Toggles the dropdown menu's open state.\n     */\n    @Method()\n    async toggleMenu(): Promise<void> {\n        if (this.disabled) {\n            return;\n        }\n\n        if (this.menuEl) {\n            this.menuEl.togglePopover();\n            this.isOpen = this.menuEl.matches(':popover-open');\n        }\n        this.atuiMenuStateChange.emit(this.isOpen);\n        await this.updatePosition();\n        this.updateAriaExpanded();\n    }\n\n    /**\n     * Opens the dropdown menu.\n     */\n    @Method()\n    async openMenu(): Promise<void> {\n        if (this.disabled) {\n            return;\n        }\n\n        if (this.menuEl) {\n            this.menuEl.showPopover();\n            this.isOpen = true;\n        }\n        this.atuiMenuStateChange.emit(true);\n        await this.updatePosition();\n        this.updateAriaExpanded();\n    }\n\n    /**\n     * Closes the dropdown menu.\n     */\n    @Method()\n    async closeMenu(): Promise<void> {\n        if (this.menuEl) {\n            this.menuEl.hidePopover();\n            this.isOpen = false;\n        }\n        this.atuiMenuStateChange.emit(false);\n        this.updateAriaExpanded();\n    }\n\n    private updateAriaExpanded(): void {\n        if (this.trigger_id && this.triggerEl) {\n            this.triggerEl.setAttribute(\n                'aria-expanded',\n                this.isOpen ? 'true' : 'false',\n            );\n        }\n    }\n\n    /**\n     * Return the current menu open state\n     */\n    @Method()\n    async getIsOpen(): Promise<boolean> {\n        return this.isOpen;\n    }\n\n    /**\n     * Emits an event containing the open menu state.\n     */\n    @Event() atuiMenuStateChange: EventEmitter<boolean>;\n\n    private timedOutCloser;\n\n    async componentDidLoad() {\n        this.popoverId = `atui-menu-${Math.random().toString(36).substr(2, 9)}`;\n\n        if (this.trigger_id) {\n            this.triggerEls = Array.from(\n                document.querySelectorAll(`[data-id=\"${this.trigger_id}\"]`),\n            ) as HTMLElement[];\n            if (this.triggerEls.length === 0) {\n                console.warn(\n                    `atui-menu: No elements found with data-id=\"${this.trigger_id}\"`,\n                );\n                return;\n            }\n        } else {\n            this.triggerEl = this.el.querySelector(\n                '[data-name=\"menu-trigger\"]',\n            );\n        }\n\n        await this.setupFloatingUI();\n        setTimeout(() => this.setupPopoverEventListeners(), 0);\n\n        if (this.trigger_id && this.triggerEls.length) {\n            this.setupExternalTriggerListeners();\n        }\n    }\n\n    private setupPopoverEventListeners() {\n        if (this.menuEl) {\n            this.menuEl.addEventListener('toggle', (event: Event) => {\n                const customEvent = event as any;\n                this.isOpen = customEvent.newState === 'open';\n                this.atuiMenuStateChange.emit(this.isOpen);\n\n                if (this.isOpen) {\n                    requestAnimationFrame(() => this.updatePosition());\n                }\n            });\n        }\n    }\n\n    private setupExternalTriggerListeners() {\n        if (!this.triggerEls || this.triggerEls.length === 0) return;\n\n        this.triggerEls.forEach((el) => {\n            const listeners: Array<{ event: string; handler: EventListener }> =\n                [];\n\n            if (this.trigger === 'hover') {\n                const mouseEnterHandler = () => {\n                    if (!this.disabled) {\n                        this.triggerEl = el;\n                        this.mouseEnterHandler();\n                    }\n                };\n\n                const mouseLeaveHandler = () => {\n                    if (!this.disabled) {\n                        this.triggerEl = el;\n                        this.mouseLeaveHandler();\n                    }\n                };\n\n                listeners.push(\n                    { event: 'mouseenter', handler: mouseEnterHandler },\n                    { event: 'mouseleave', handler: mouseLeaveHandler },\n                );\n            }\n\n            if (this.trigger === 'click') {\n                const clickHandler = async (event: Event) => {\n                    if (!this.disabled) {\n                        event.preventDefault();\n                        event.stopPropagation();\n                        this.triggerEl = el;\n                        if (this.isOpen) {\n                            await this.closeMenu();\n                        } else {\n                            await this.openMenu();\n                        }\n                    }\n                };\n\n                listeners.push({ event: 'click', handler: clickHandler });\n            }\n\n            const keydownHandler = async (event: KeyboardEvent) => {\n                if (!this.disabled) {\n                    this.triggerEl = el;\n                    switch (event.key) {\n                        case 'Escape':\n                            await this.closeMenu();\n                            break;\n                        case 'Enter':\n                        case ' ':\n                            event.preventDefault();\n                            await this.toggleMenu();\n                            break;\n                    }\n                }\n            };\n\n            listeners.push({ event: 'keydown', handler: keydownHandler });\n\n            listeners.forEach(({ event, handler }) => {\n                el.addEventListener(event, handler);\n                this.externalTriggerListeners.push({\n                    element: el,\n                    event,\n                    handler,\n                });\n            });\n\n            el.setAttribute('aria-haspopup', 'true');\n            el.setAttribute('aria-expanded', 'false');\n        });\n    }\n\n    disconnectedCallback() {\n        this.cleanupFloatingUI();\n        this.cleanupExternalTriggerListeners();\n    }\n\n    private externalTriggerListeners: Array<{\n        element: HTMLElement;\n        event: string;\n        handler: EventListener;\n    }> = [];\n\n    private cleanupExternalTriggerListeners() {\n        this.externalTriggerListeners.forEach(({ element, event, handler }) => {\n            element.removeEventListener(event, handler);\n        });\n        this.externalTriggerListeners = [];\n    }\n\n    private async mouseEnterHandler(): Promise<void> {\n        if (this.timedOutCloser) clearTimeout(this.timedOutCloser);\n        if (!this.isOpen) {\n            await this.openMenu();\n        }\n    }\n\n    private async mouseLeaveHandler(): Promise<void> {\n        await this.closeMenu();\n    }\n\n    private async setupFloatingUI(): Promise<void> {\n        if (this.cleanupAutoUpdate) {\n            this.cleanupAutoUpdate();\n        }\n\n        if (this.triggerEl && this.menuEl) {\n            const observer = new IntersectionObserver(\n                (entries) => {\n                    if (!entries[0].isIntersecting && this.isOpen) {\n                        this.mouseLeaveHandler();\n                    }\n                },\n                { threshold: 0 },\n            );\n            observer.observe(this.triggerEl);\n\n            this.cleanupAutoUpdate = autoUpdate(\n                this.triggerEl,\n                this.menuEl,\n                () => {\n                    if (this.isOpen) {\n                        const placement = this.getFloatingUIPlacement();\n                        const strategy = 'fixed';\n\n                        computePosition(this.triggerEl, this.menuEl, {\n                            placement,\n                            strategy,\n                            middleware: [\n                                offset(\n                                    this.position === 'bottom' ||\n                                        this.position === 'top'\n                                        ? this.offset_y\n                                        : this.offset_x,\n                                ),\n                                flip({\n                                    fallbackStrategy: 'bestFit',\n                                    padding: 8,\n                                }),\n                                shift({\n                                    padding: 8,\n                                    mainAxis: true,\n                                    crossAxis: true,\n                                }),\n                                size({\n                                    apply({\n                                        availableWidth,\n                                        availableHeight,\n                                        elements,\n                                    }) {\n                                        Object.assign(elements.floating.style, {\n                                            maxWidth: `${availableWidth}px`,\n                                            maxHeight: `${availableHeight}px`,\n                                        });\n                                    },\n                                }),\n                            ],\n                        }).then(({ x, y }) => {\n                            const styles: any = {\n                                position: strategy,\n                                left: `${x}px`,\n                                top: `${y}px`,\n                                margin: '0',\n                                transform: 'none',\n                            };\n\n                            if (this.width) {\n                                styles.width = this.width;\n                            }\n\n                            Object.assign(this.menuEl.style, styles);\n                        });\n                    }\n                },\n                {\n                    ancestorScroll: true,\n                    ancestorResize: true,\n                    elementResize: true,\n                    layoutShift: true,\n                    animationFrame: true,\n                },\n            );\n\n            const originalCleanup = this.cleanupAutoUpdate;\n            this.cleanupAutoUpdate = () => {\n                originalCleanup();\n                observer.disconnect();\n            };\n        }\n    }\n\n    private cleanupFloatingUI() {\n        if (this.cleanupAutoUpdate) {\n            this.cleanupAutoUpdate();\n            this.cleanupAutoUpdate = undefined;\n        }\n    }\n\n    private async updateFloatingPosition(): Promise<void> {\n        if (!this.triggerEl || !this.menuEl) return;\n        await this.setupFloatingUI();\n    }\n\n    private getFloatingUIPlacement(): Placement {\n        const positionMap: Record<string, string> = {\n            top: 'top',\n            bottom: 'bottom',\n            left: 'left',\n            right: 'right',\n        };\n\n        const alignMap: Record<string, string> = {\n            start: 'start',\n            end: 'end',\n        };\n\n        const position = positionMap[this.position] || 'bottom';\n        const align = alignMap[this.align] || 'start';\n\n        return `${position}-${align}` as Placement;\n    }\n\n    render() {\n        return (\n            <Host\n                class=\"relative\"\n                onBlur={() =>\n                    this.trigger === 'click' && !this.disabled\n                        ? this.mouseLeaveHandler()\n                        : null\n                }\n            >\n                {!this.trigger_id && (\n                    <div\n                        aria-haspopup=\"true\"\n                        data-name=\"menu-trigger\"\n                        ref={(el) => (this.triggerEl = el)}\n                        aria-expanded={`${this.isOpen ? 'true' : 'false'}`}\n                        onMouseEnter={() =>\n                            this.trigger === 'hover' && !this.disabled\n                                ? this.mouseEnterHandler()\n                                : null\n                        }\n                        onKeyDown={async (event) => {\n                            switch (event.key) {\n                                case 'Escape':\n                                    await this.closeMenu();\n                                    break;\n                                case 'Enter':\n                                case ' ':\n                                    event.preventDefault();\n                                    await this.toggleMenu();\n                                    break;\n                            }\n                        }}\n                        onMouseLeave={() =>\n                            this.trigger === 'hover' && !this.disabled\n                                ? this.mouseLeaveHandler()\n                                : null\n                        }\n                        onClick={async (event) => {\n                            if (this.trigger === 'click' && !this.disabled) {\n                                event.preventDefault();\n                                event.stopPropagation();\n                                if (this.isOpen) {\n                                    await this.closeMenu();\n                                } else {\n                                    await this.openMenu();\n                                }\n                            }\n                        }}\n                        class={this.disabled ? 'contents' : ''}\n                    >\n                        <slot name=\"menu-trigger\" />\n                    </div>\n                )}\n\n                <div\n                    role={this.role}\n                    data-position={this.position}\n                    data-align={this.align}\n                    ref={(el) => (this.menuEl = el)}\n                    aria-hidden={`${this.isOpen ? 'false' : 'true'}`}\n                    popover=\"auto\"\n                    id={this.popoverId}\n                    onMouseEnter={() =>\n                        this.trigger === 'hover' &&\n                        !this.disabled &&\n                        this.mouseEnterHandler()\n                    }\n                    onMouseLeave={() =>\n                        this.trigger === 'hover' &&\n                        !this.disabled &&\n                        this.mouseLeaveHandler()\n                    }\n                    onKeyDown={async (event) => {\n                        if (\n                            event.key === 'Enter' ||\n                            event.key === ' ' ||\n                            event.key === 'Escape'\n                        ) {\n                            if (this.autoclose) {\n                                await this.mouseLeaveHandler();\n                            }\n                        }\n                    }}\n                    onClick={() => this.autoclose && this.mouseLeaveHandler()}\n                    class={`w-fit rounded-md bg-white p-4 shadow-md transition-opacity duration-150 ${this.isOpen ? 'opacity-100' : 'opacity-0'}`}\n                    data-name=\"menu-content-wrapper\"\n                >\n                    <slot />\n                </div>\n            </Host>\n        );\n    }\n}\n"],"names":[],"mappings":"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"}