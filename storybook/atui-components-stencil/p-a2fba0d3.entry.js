import{r as t,h as i,H as s}from"./p-EP34iaAr.js";import{C as e,a as o,D as n,A as a,f as r,g as h,i as c,h as l}from"./p-BFIVuvTv.js";import"moment";const d="#0f172a";const p={xs:"h-[70px]",sm:"h-[160px]",md:"h-[235px]",lg:"h-[330px]",xl:"h-[440px]",auto:"h-full"};const f=class{constructor(i){t(this,i)}data;options;height="md";legend_position="top";legend_format={labels:{boxWidth:10,boxHeight:10,fontSize:11},onHover:t=>{if(t.native){t.native.target.style.cursor="pointer"}},onClick:(t,i,s)=>{const e=s.chart;const o=i.index;e.toggleDataVisibility(o);const n=e.data.labels?.some(((t,i)=>e.getDataVisibility(i)));if(e.options.plugins?.tooltip){e.options.plugins.tooltip.enabled=!!n}e.update()},display:true};tooltip_options={mode:"nearest",intersect:true,position:"nearest"};plugins;animations;color_palette=e.CATEGORICAL;center_value;center_text;cutout=70;canvasEl;config;chart;async getConfig(){return this.config}defaultPieTooltipOptions={mode:"nearest",intersect:true,position:"nearest",animation:{duration:150}};getDrawCenterTextPlugin(){return{id:"DrawCenterTextPlugin",afterDatasetDraw:t=>{const i=(t.chartArea.left+t.chartArea.right)/2;const s=(t.chartArea.top+t.chartArea.bottom)/2;const e=t.ctx;if(!e){return}e.restore();const o=t.chartArea.bottom-t.chartArea.top;const n=(o/200).toFixed(2)+"em sans-serif";const a=(o/140).toFixed(2)+"em sans-serif";e.fillStyle=d;e.textAlign="center";e.textBaseline="middle";e.font="500 "+a;const r=(t,i,s,o,n)=>{e.font="500 "+t;const a=e.measureText(i);const r=a.actualBoundingBoxAscent+a.actualBoundingBoxDescent;if(n!="middle"){o=n==="top"?o-r:o+r}e.fillText(i,s,o)};if(this.center_value){r(a,this.center_value,i,s,"top");r(n,this.center_text,i,s,"bottom")}else if(this.center_text){r(n,this.center_text,i,s,"middle")}e.save()}}}initChart(){o.register(n,a,r,h,c);const t=window.devicePixelRatio||1;const i=l(this.color_palette);if(i){this.applyPresetPalette(i)}const s=this.plugins?[...this.plugins]:[];if(this.center_text||this.center_value){s.push(this.getDrawCenterTextPlugin())}this.config={type:"doughnut",data:{...this.data,datasets:this.data.datasets.map((t=>({...t,cutout:`${this.cutout}%`})))},options:{devicePixelRatio:t,animation:this.animations,maintainAspectRatio:true,aspectRatio:1,layout:{padding:16},interaction:{mode:"nearest",intersect:true},plugins:{legend:{...this.legend_format||{},position:this.legend_position,fullSize:true},tooltip:{...this.tooltip_options||this.defaultPieTooltipOptions,filter:t=>t.chart.getDataVisibility(t.dataIndex),enabled:true}},...this.options||{}},plugins:s};if(this.chart){this.chart.destroy()}this.chart=new o(this.canvasEl,this.config)}applyPresetPalette(t){if(this.color_palette===e.CUSTOM){return}this.data.datasets=this.data.datasets.map((i=>{const s=i.data.map(((i,s)=>t[s%t.length]));return{...i,backgroundColor:s,hoverBackgroundColor:s,borderColor:s,hoverBorderColor:s}}))}componentDidUpdate(){if(this.data&&this.data.datasets.length){this.initChart()}}componentDidLoad(){if(this.data&&this.data.datasets.length){this.initChart()}}render(){return i(s,{key:"48c0b84fb5c86d641a15576f47b0889cc8317046",role:"region",class:`relative flex w-full flex-col items-center justify-center ${p[this.height]}`},i("canvas",{key:"7f36a7a5270eb52cf358a324cb7f08e2ad15f516",ref:t=>this.canvasEl=t,style:{position:"static",display:"block",width:"100%",height:"100%"}}))}};export{f as at_chart_donut};
//# sourceMappingURL=p-a2fba0d3.entry.js.map