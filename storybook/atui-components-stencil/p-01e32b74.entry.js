import{r as t,c as n,h as e,H as i,g as s}from"./p-D3rwhcmG.js";import{c as o}from"./p-CVoOBWGd.js";import{c as r,f as c}from"./p-EexUVHDN.js";const a=Math.min;const l=Math.max;const f=Math.round;const u=Math.floor;const h=t=>({x:t,y:t});const d={left:"right",right:"left",bottom:"top",top:"bottom"};const m={start:"end",end:"start"};function p(t,n,e){return l(t,a(n,e))}function y(t,n){return typeof t==="function"?t(n):t}function w(t){return t.split("-")[0]}function g(t){return t.split("-")[1]}function b(t){return t==="x"?"y":"x"}function x(t){return t==="y"?"height":"width"}const v=new Set(["top","bottom"]);function k(t){return v.has(w(t))?"y":"x"}function A(t){return b(k(t))}function S(t,n,e){if(e===void 0){e=false}const i=g(t);const s=A(t);const o=x(s);let r=s==="x"?i===(e?"end":"start")?"right":"left":i==="start"?"bottom":"top";if(n.reference[o]>n.floating[o]){r=D(r)}return[r,D(r)]}function E(t){const n=D(t);return[F(t),n,F(n)]}function F(t){return t.replace(/start|end/g,(t=>m[t]))}const M=["left","right"];const R=["right","left"];const O=["top","bottom"];const C=["bottom","top"];function P(t,n,e){switch(t){case"top":case"bottom":if(e)return n?R:M;return n?M:R;case"left":case"right":return n?O:C;default:return[]}}function z(t,n,e,i){const s=g(t);let o=P(w(t),e==="start",i);if(s){o=o.map((t=>t+"-"+s));if(n){o=o.concat(o.map(F))}}return o}function D(t){return t.replace(/left|right|bottom|top/g,(t=>d[t]))}function I(t){return{top:0,right:0,bottom:0,left:0,...t}}function T(t){return typeof t!=="number"?I(t):{top:t,right:t,bottom:t,left:t}}function L(t){const{x:n,y:e,width:i,height:s}=t;return{width:i,height:s,top:e,left:n,right:n+i,bottom:e+s,x:n,y:e}}function j(t,n,e){let{reference:i,floating:s}=t;const o=k(n);const r=A(n);const c=x(r);const a=w(n);const l=o==="y";const f=i.x+i.width/2-s.width/2;const u=i.y+i.height/2-s.height/2;const h=i[c]/2-s[c]/2;let d;switch(a){case"top":d={x:f,y:i.y-s.height};break;case"bottom":d={x:f,y:i.y+i.height};break;case"right":d={x:i.x+i.width,y:u};break;case"left":d={x:i.x-s.width,y:u};break;default:d={x:i.x,y:i.y}}switch(g(n)){case"start":d[r]-=h*(e&&l?-1:1);break;case"end":d[r]+=h*(e&&l?-1:1);break}return d}const $=async(t,n,e)=>{const{placement:i="bottom",strategy:s="absolute",middleware:o=[],platform:r}=e;const c=o.filter(Boolean);const a=await(r.isRTL==null?void 0:r.isRTL(n));let l=await r.getElementRects({reference:t,floating:n,strategy:s});let{x:f,y:u}=j(l,i,a);let h=i;let d={};let m=0;for(let e=0;e<c.length;e++){const{name:o,fn:p}=c[e];const{x:y,y:w,data:g,reset:b}=await p({x:f,y:u,initialPlacement:i,placement:h,strategy:s,middlewareData:d,rects:l,platform:r,elements:{reference:t,floating:n}});f=y!=null?y:f;u=w!=null?w:u;d={...d,[o]:{...d[o],...g}};if(b&&m<=50){m++;if(typeof b==="object"){if(b.placement){h=b.placement}if(b.rects){l=b.rects===true?await r.getElementRects({reference:t,floating:n,strategy:s}):b.rects}({x:f,y:u}=j(l,h,a))}e=-1}}return{x:f,y:u,placement:h,strategy:s,middlewareData:d}};async function B(t,n){var e;if(n===void 0){n={}}const{x:i,y:s,platform:o,rects:r,elements:c,strategy:a}=t;const{boundary:l="clippingAncestors",rootBoundary:f="viewport",elementContext:u="floating",altBoundary:h=false,padding:d=0}=y(n,t);const m=T(d);const p=u==="floating"?"reference":"floating";const w=c[h?p:u];const g=L(await o.getClippingRect({element:((e=await(o.isElement==null?void 0:o.isElement(w)))!=null?e:true)?w:w.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(c.floating)),boundary:l,rootBoundary:f,strategy:a}));const b=u==="floating"?{x:i,y:s,width:r.floating.width,height:r.floating.height}:r.reference;const x=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c.floating));const v=await(o.isElement==null?void 0:o.isElement(x))?await(o.getScale==null?void 0:o.getScale(x))||{x:1,y:1}:{x:1,y:1};const k=L(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:b,offsetParent:x,strategy:a}):b);return{top:(g.top-k.top+m.top)/v.y,bottom:(k.bottom-g.bottom+m.bottom)/v.y,left:(g.left-k.left+m.left)/v.x,right:(k.right-g.right+m.right)/v.x}}const H=function(t){if(t===void 0){t={}}return{name:"flip",options:t,async fn(n){var e,i;const{placement:s,middlewareData:o,rects:r,initialPlacement:c,platform:a,elements:l}=n;const{mainAxis:f=true,crossAxis:u=true,fallbackPlacements:h,fallbackStrategy:d="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:p=true,...g}=y(t,n);if((e=o.arrow)!=null&&e.alignmentOffset){return{}}const b=w(s);const x=k(c);const v=w(c)===c;const A=await(a.isRTL==null?void 0:a.isRTL(l.floating));const F=h||(v||!p?[D(c)]:E(c));const M=m!=="none";if(!h&&M){F.push(...z(c,p,m,A))}const R=[c,...F];const O=await B(n,g);const C=[];let P=((i=o.flip)==null?void 0:i.overflows)||[];if(f){C.push(O[b])}if(u){const t=S(s,r,A);C.push(O[t[0]],O[t[1]])}P=[...P,{placement:s,overflows:C}];if(!C.every((t=>t<=0))){var I,T;const t=(((I=o.flip)==null?void 0:I.index)||0)+1;const n=R[t];if(n){const e=u==="alignment"?x!==k(n):false;if(!e||P.every((t=>k(t.placement)===x?t.overflows[0]>0:true))){return{data:{index:t,overflows:P},reset:{placement:n}}}}let e=(T=P.filter((t=>t.overflows[0]<=0)).sort(((t,n)=>t.overflows[1]-n.overflows[1]))[0])==null?void 0:T.placement;if(!e){switch(d){case"bestFit":{var L;const t=(L=P.filter((t=>{if(M){const n=k(t.placement);return n===x||n==="y"}return true})).map((t=>[t.placement,t.overflows.filter((t=>t>0)).reduce(((t,n)=>t+n),0)])).sort(((t,n)=>t[1]-n[1]))[0])==null?void 0:L[0];if(t){e=t}break}case"initialPlacement":e=c;break}}if(s!==e){return{reset:{placement:e}}}}return{}}}};const N=new Set(["left","top"]);async function U(t,n){const{placement:e,platform:i,elements:s}=t;const o=await(i.isRTL==null?void 0:i.isRTL(s.floating));const r=w(e);const c=g(e);const a=k(e)==="y";const l=N.has(r)?-1:1;const f=o&&a?-1:1;const u=y(n,t);let{mainAxis:h,crossAxis:d,alignmentAxis:m}=typeof u==="number"?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};if(c&&typeof m==="number"){d=c==="end"?m*-1:m}return a?{x:d*f,y:h*l}:{x:h*l,y:d*f}}const V=function(t){if(t===void 0){t=0}return{name:"offset",options:t,async fn(n){var e,i;const{x:s,y:o,placement:r,middlewareData:c}=n;const a=await U(n,t);if(r===((e=c.offset)==null?void 0:e.placement)&&(i=c.arrow)!=null&&i.alignmentOffset){return{}}return{x:s+a.x,y:o+a.y,data:{...a,placement:r}}}}};const q=function(t){if(t===void 0){t={}}return{name:"shift",options:t,async fn(n){const{x:e,y:i,placement:s}=n;const{mainAxis:o=true,crossAxis:r=false,limiter:c={fn:t=>{let{x:n,y:e}=t;return{x:n,y:e}}},...a}=y(t,n);const l={x:e,y:i};const f=await B(n,a);const u=k(w(s));const h=b(u);let d=l[h];let m=l[u];if(o){const t=h==="y"?"top":"left";const n=h==="y"?"bottom":"right";const e=d+f[t];const i=d-f[n];d=p(e,d,i)}if(r){const t=u==="y"?"top":"left";const n=u==="y"?"bottom":"right";const e=m+f[t];const i=m-f[n];m=p(e,m,i)}const g=c.fn({...n,[h]:d,[u]:m});return{...g,data:{x:g.x-e,y:g.y-i,enabled:{[h]:o,[u]:r}}}}}};function G(){return typeof window!=="undefined"}function K(t){if(X(t)){return(t.nodeName||"").toLowerCase()}return"#document"}function _(t){var n;return(t==null||(n=t.ownerDocument)==null?void 0:n.defaultView)||window}function W(t){var n;return(n=(X(t)?t.ownerDocument:t.document)||window.document)==null?void 0:n.documentElement}function X(t){if(!G()){return false}return t instanceof Node||t instanceof _(t).Node}function Y(t){if(!G()){return false}return t instanceof Element||t instanceof _(t).Element}function J(t){if(!G()){return false}return t instanceof HTMLElement||t instanceof _(t).HTMLElement}function Q(t){if(!G()||typeof ShadowRoot==="undefined"){return false}return t instanceof ShadowRoot||t instanceof _(t).ShadowRoot}const Z=new Set(["inline","contents"]);function tt(t){const{overflow:n,overflowX:e,overflowY:i,display:s}=dt(t);return/auto|scroll|overlay|hidden|clip/.test(n+i+e)&&!Z.has(s)}const nt=new Set(["table","td","th"]);function et(t){return nt.has(K(t))}const it=[":popover-open",":modal"];function st(t){return it.some((n=>{try{return t.matches(n)}catch(t){return false}}))}const ot=["transform","translate","scale","rotate","perspective"];const rt=["transform","translate","scale","rotate","perspective","filter"];const ct=["paint","layout","strict","content"];function at(t){const n=ft();const e=Y(t)?dt(t):t;return ot.some((t=>e[t]?e[t]!=="none":false))||(e.containerType?e.containerType!=="normal":false)||!n&&(e.backdropFilter?e.backdropFilter!=="none":false)||!n&&(e.filter?e.filter!=="none":false)||rt.some((t=>(e.willChange||"").includes(t)))||ct.some((t=>(e.contain||"").includes(t)))}function lt(t){let n=pt(t);while(J(n)&&!ht(n)){if(at(n)){return n}else if(st(n)){return null}n=pt(n)}return null}function ft(){if(typeof CSS==="undefined"||!CSS.supports)return false;return CSS.supports("-webkit-backdrop-filter","none")}const ut=new Set(["html","body","#document"]);function ht(t){return ut.has(K(t))}function dt(t){return _(t).getComputedStyle(t)}function mt(t){if(Y(t)){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}return{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function pt(t){if(K(t)==="html"){return t}const n=t.assignedSlot||t.parentNode||Q(t)&&t.host||W(t);return Q(n)?n.host:n}function yt(t){const n=pt(t);if(ht(n)){return t.ownerDocument?t.ownerDocument.body:t.body}if(J(n)&&tt(n)){return n}return yt(n)}function wt(t,n,e){var i;if(n===void 0){n=[]}if(e===void 0){e=true}const s=yt(t);const o=s===((i=t.ownerDocument)==null?void 0:i.body);const r=_(s);if(o){const t=gt(r);return n.concat(r,r.visualViewport||[],tt(s)?s:[],t&&e?wt(t):[])}return n.concat(s,wt(s,[],e))}function gt(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function bt(t){const n=dt(t);let e=parseFloat(n.width)||0;let i=parseFloat(n.height)||0;const s=J(t);const o=s?t.offsetWidth:e;const r=s?t.offsetHeight:i;const c=f(e)!==o||f(i)!==r;if(c){e=o;i=r}return{width:e,height:i,$:c}}function xt(t){return!Y(t)?t.contextElement:t}function vt(t){const n=xt(t);if(!J(n)){return h(1)}const e=n.getBoundingClientRect();const{width:i,height:s,$:o}=bt(n);let r=(o?f(e.width):e.width)/i;let c=(o?f(e.height):e.height)/s;if(!r||!Number.isFinite(r)){r=1}if(!c||!Number.isFinite(c)){c=1}return{x:r,y:c}}const kt=h(0);function At(t){const n=_(t);if(!ft()||!n.visualViewport){return kt}return{x:n.visualViewport.offsetLeft,y:n.visualViewport.offsetTop}}function St(t,n,e){if(n===void 0){n=false}if(!e||n&&e!==_(t)){return false}return n}function Et(t,n,e,i){if(n===void 0){n=false}if(e===void 0){e=false}const s=t.getBoundingClientRect();const o=xt(t);let r=h(1);if(n){if(i){if(Y(i)){r=vt(i)}}else{r=vt(t)}}const c=St(o,e,i)?At(o):h(0);let a=(s.left+c.x)/r.x;let l=(s.top+c.y)/r.y;let f=s.width/r.x;let u=s.height/r.y;if(o){const t=_(o);const n=i&&Y(i)?_(i):i;let e=t;let s=gt(e);while(s&&i&&n!==e){const t=vt(s);const n=s.getBoundingClientRect();const i=dt(s);const o=n.left+(s.clientLeft+parseFloat(i.paddingLeft))*t.x;const r=n.top+(s.clientTop+parseFloat(i.paddingTop))*t.y;a*=t.x;l*=t.y;f*=t.x;u*=t.y;a+=o;l+=r;e=_(s);s=gt(e)}}return L({width:f,height:u,x:a,y:l})}function Ft(t,n){const e=mt(t).scrollLeft;if(!n){return Et(W(t)).left+e}return n.left+e}function Mt(t,n,e){if(e===void 0){e=false}const i=t.getBoundingClientRect();const s=i.left+n.scrollLeft-(e?0:Ft(t,i));const o=i.top+n.scrollTop;return{x:s,y:o}}function Rt(t){let{elements:n,rect:e,offsetParent:i,strategy:s}=t;const o=s==="fixed";const r=W(i);const c=n?st(n.floating):false;if(i===r||c&&o){return e}let a={scrollLeft:0,scrollTop:0};let l=h(1);const f=h(0);const u=J(i);if(u||!u&&!o){if(K(i)!=="body"||tt(r)){a=mt(i)}if(J(i)){const t=Et(i);l=vt(i);f.x=t.x+i.clientLeft;f.y=t.y+i.clientTop}}const d=r&&!u&&!o?Mt(r,a,true):h(0);return{width:e.width*l.x,height:e.height*l.y,x:e.x*l.x-a.scrollLeft*l.x+f.x+d.x,y:e.y*l.y-a.scrollTop*l.y+f.y+d.y}}function Ot(t){return Array.from(t.getClientRects())}function Ct(t){const n=W(t);const e=mt(t);const i=t.ownerDocument.body;const s=l(n.scrollWidth,n.clientWidth,i.scrollWidth,i.clientWidth);const o=l(n.scrollHeight,n.clientHeight,i.scrollHeight,i.clientHeight);let r=-e.scrollLeft+Ft(t);const c=-e.scrollTop;if(dt(i).direction==="rtl"){r+=l(n.clientWidth,i.clientWidth)-s}return{width:s,height:o,x:r,y:c}}function Pt(t,n){const e=_(t);const i=W(t);const s=e.visualViewport;let o=i.clientWidth;let r=i.clientHeight;let c=0;let a=0;if(s){o=s.width;r=s.height;const t=ft();if(!t||t&&n==="fixed"){c=s.offsetLeft;a=s.offsetTop}}return{width:o,height:r,x:c,y:a}}const zt=new Set(["absolute","fixed"]);function Dt(t,n){const e=Et(t,true,n==="fixed");const i=e.top+t.clientTop;const s=e.left+t.clientLeft;const o=J(t)?vt(t):h(1);const r=t.clientWidth*o.x;const c=t.clientHeight*o.y;const a=s*o.x;const l=i*o.y;return{width:r,height:c,x:a,y:l}}function It(t,n,e){let i;if(n==="viewport"){i=Pt(t,e)}else if(n==="document"){i=Ct(W(t))}else if(Y(n)){i=Dt(n,e)}else{const e=At(t);i={x:n.x-e.x,y:n.y-e.y,width:n.width,height:n.height}}return L(i)}function Tt(t,n){const e=pt(t);if(e===n||!Y(e)||ht(e)){return false}return dt(e).position==="fixed"||Tt(e,n)}function Lt(t,n){const e=n.get(t);if(e){return e}let i=wt(t,[],false).filter((t=>Y(t)&&K(t)!=="body"));let s=null;const o=dt(t).position==="fixed";let r=o?pt(t):t;while(Y(r)&&!ht(r)){const n=dt(r);const e=at(r);if(!e&&n.position==="fixed"){s=null}const c=o?!e&&!s:!e&&n.position==="static"&&!!s&&zt.has(s.position)||tt(r)&&!e&&Tt(t,r);if(c){i=i.filter((t=>t!==r))}else{s=n}r=pt(r)}n.set(t,i);return i}function jt(t){let{element:n,boundary:e,rootBoundary:i,strategy:s}=t;const o=e==="clippingAncestors"?st(n)?[]:Lt(n,this._c):[].concat(e);const r=[...o,i];const c=r[0];const f=r.reduce(((t,e)=>{const i=It(n,e,s);t.top=l(i.top,t.top);t.right=a(i.right,t.right);t.bottom=a(i.bottom,t.bottom);t.left=l(i.left,t.left);return t}),It(n,c,s));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}}function $t(t){const{width:n,height:e}=bt(t);return{width:n,height:e}}function Bt(t,n,e){const i=J(n);const s=W(n);const o=e==="fixed";const r=Et(t,true,o,n);let c={scrollLeft:0,scrollTop:0};const a=h(0);function l(){a.x=Ft(s)}if(i||!i&&!o){if(K(n)!=="body"||tt(s)){c=mt(n)}if(i){const t=Et(n,true,o,n);a.x=t.x+n.clientLeft;a.y=t.y+n.clientTop}else if(s){l()}}if(o&&!i&&s){l()}const f=s&&!i&&!o?Mt(s,c):h(0);const u=r.left+c.scrollLeft-a.x-f.x;const d=r.top+c.scrollTop-a.y-f.y;return{x:u,y:d,width:r.width,height:r.height}}function Ht(t){return dt(t).position==="static"}function Nt(t,n){if(!J(t)||dt(t).position==="fixed"){return null}if(n){return n(t)}let e=t.offsetParent;if(W(t)===e){e=e.ownerDocument.body}return e}function Ut(t,n){const e=_(t);if(st(t)){return e}if(!J(t)){let n=pt(t);while(n&&!ht(n)){if(Y(n)&&!Ht(n)){return n}n=pt(n)}return e}let i=Nt(t,n);while(i&&et(i)&&Ht(i)){i=Nt(i,n)}if(i&&ht(i)&&Ht(i)&&!at(i)){return e}return i||lt(t)||e}const Vt=async function(t){const n=this.getOffsetParent||Ut;const e=this.getDimensions;const i=await e(t.floating);return{reference:Bt(t.reference,await n(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function qt(t){return dt(t).direction==="rtl"}const Gt={convertOffsetParentRelativeRectToViewportRelativeRect:Rt,getDocumentElement:W,getClippingRect:jt,getOffsetParent:Ut,getElementRects:Vt,getClientRects:Ot,getDimensions:$t,getScale:vt,isElement:Y,isRTL:qt};function Kt(t,n){return t.x===n.x&&t.y===n.y&&t.width===n.width&&t.height===n.height}function _t(t,n){let e=null;let i;const s=W(t);function o(){var t;clearTimeout(i);(t=e)==null||t.disconnect();e=null}function r(c,f){if(c===void 0){c=false}if(f===void 0){f=1}o();const h=t.getBoundingClientRect();const{left:d,top:m,width:p,height:y}=h;if(!c){n()}if(!p||!y){return}const w=u(m);const g=u(s.clientWidth-(d+p));const b=u(s.clientHeight-(m+y));const x=u(d);const v=-w+"px "+-g+"px "+-b+"px "+-x+"px";const k={rootMargin:v,threshold:l(0,a(1,f))||1};let A=true;function S(n){const e=n[0].intersectionRatio;if(e!==f){if(!A){return r()}if(!e){i=setTimeout((()=>{r(false,1e-7)}),1e3)}else{r(false,e)}}if(e===1&&!Kt(h,t.getBoundingClientRect())){r()}A=false}try{e=new IntersectionObserver(S,{...k,root:s.ownerDocument})}catch(t){e=new IntersectionObserver(S,k)}e.observe(t)}r(true);return o}function Wt(t,n,e,i){if(i===void 0){i={}}const{ancestorScroll:s=true,ancestorResize:o=true,elementResize:r=typeof ResizeObserver==="function",layoutShift:c=typeof IntersectionObserver==="function",animationFrame:a=false}=i;const l=xt(t);const f=s||o?[...l?wt(l):[],...wt(n)]:[];f.forEach((t=>{s&&t.addEventListener("scroll",e,{passive:true});o&&t.addEventListener("resize",e)}));const u=l&&c?_t(l,e):null;let h=-1;let d=null;if(r){d=new ResizeObserver((t=>{let[i]=t;if(i&&i.target===l&&d){d.unobserve(n);cancelAnimationFrame(h);h=requestAnimationFrame((()=>{var t;(t=d)==null||t.observe(n)}))}e()}));if(l&&!a){d.observe(l)}d.observe(n)}let m;let p=a?Et(t):null;if(a){y()}function y(){const n=Et(t);if(p&&!Kt(p,n)){e()}p=n;m=requestAnimationFrame(y)}e();return()=>{var t;f.forEach((t=>{s&&t.removeEventListener("scroll",e);o&&t.removeEventListener("resize",e)}));u==null||u();(t=d)==null||t.disconnect();d=null;if(a){cancelAnimationFrame(m)}}}const Xt=V;const Yt=q;const Jt=H;const Qt=(t,n,e)=>{const i=new Map;const s={platform:Gt,...e};const o={...s.platform,_c:i};return $(t,n,{...s,platform:o})};const Zt=o("z-menu w-full rounded-md border border-solid border-light bg-white p-4 shadow-md",{variants:{open:{true:null,false:"hidden"}}});const tn=class{constructor(e){t(this,e);this.atuiMenuStateChange=n(this,"atuiMenuStateChange",7);this.offset_x=0;this.offset_y=0;this.position="bottom";this.align="start";this.width="280px";this.autoclose=true;this.trigger="click";this.role="menu";this.disabled=false;this.portal=false;this.isOpen=false;this.portalContainer=null;this.updatePosition=async()=>{if(this.triggerEl&&this.menuEl&&this.isOpen){await this.updateFloatingPosition()}};this.handleOutsideClick=t=>{var n;if(this.isOpen&&!this.el.contains(t.target)&&!((n=this.portalContainer)===null||n===void 0?void 0:n.contains(t.target))){this.mouseLeaveHandler()}};this.handleMenuKeyDown=t=>{const n=r({container:this.menuEl,onEscape:()=>{this.closeMenu();this.triggerEl.focus()}});n(t)}}async toggleMenu(){this.atuiMenuStateChange.emit(!this.isOpen);this.isOpen=!this.isOpen;if(this.isOpen&&this.portal){this.moveMenuToPortal()}else if(!this.isOpen&&this.portal){this.cleanupPortalContainer()}this.updatePosition()}async openMenu(){this.isOpen=true;this.atuiMenuStateChange.emit(true);if(this.portal){this.moveMenuToPortal()}await this.updatePosition()}async closeMenu(){this.isOpen=false;this.atuiMenuStateChange.emit(false);if(this.portal){this.cleanupPortalContainer()}}async getIsOpen(){return this.isOpen}componentDidLoad(){window.addEventListener("click",this.handleOutsideClick);this.setupFloatingUI()}disconnectedCallback(){window.removeEventListener("click",this.handleOutsideClick);this.cleanupFloatingUI();this.cleanupPortalContainer()}mouseEnterHandler(){if(this.timedOutCloser)clearTimeout(this.timedOutCloser);if(!this.isOpen){this.isOpen=true;this.atuiMenuStateChange.emit(true);if(this.portal){this.moveMenuToPortal()}this.updatePosition()}}mouseLeaveHandler(){this.isOpen=false;this.atuiMenuStateChange.emit(false);if(this.portal){this.cleanupPortalContainer()}}createPortalContainer(){if(!this.portalContainer){this.portalContainer=document.createElement("div");Object.assign(this.portalContainer.style,{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",pointerEvents:"none",zIndex:"9999"});this.portalContainer.setAttribute("data-atui-menu-portal","true");document.body.appendChild(this.portalContainer)}}moveMenuToPortal(){if(this.portal&&this.menuEl&&this.isOpen){this.createPortalContainer();this.portalContainer.innerHTML="";this.portalContainer.appendChild(this.menuEl);this.menuEl.style.display="";Object.assign(this.menuEl.style,{pointerEvents:"auto",display:"block",visibility:"visible",position:"fixed",width:this.width,zIndex:"9999"});c(this.menuEl);this.menuEl.addEventListener("keydown",this.handleMenuKeyDown);this.setupFloatingUI()}}cleanupPortalContainer(){if(this.portalContainer&&this.portalContainer.parentNode){if(this.menuEl){this.menuEl.removeEventListener("keydown",this.handleMenuKeyDown);const t=this.el.querySelector('[data-name="menu-content-wrapper"]');if(t){t.appendChild(this.menuEl)}Object.assign(this.menuEl.style,{display:"",visibility:"",pointerEvents:"",position:""})}this.portalContainer.parentNode.removeChild(this.portalContainer);this.portalContainer=null}}setupFloatingUI(){if(this.cleanupAutoUpdate){this.cleanupAutoUpdate()}if(this.triggerEl&&this.menuEl){const t=new IntersectionObserver((t=>{if(!t[0].isIntersecting&&this.isOpen){this.mouseLeaveHandler()}}),{threshold:0});t.observe(this.triggerEl);this.cleanupAutoUpdate=Wt(this.triggerEl,this.menuEl,(()=>{if(this.isOpen){const t=this.getFloatingUIPlacement();const n=this.portal?"fixed":"absolute";Qt(this.triggerEl,this.menuEl,{placement:t,strategy:n,middleware:[Xt(this.position==="bottom"||this.position==="top"?this.offset_y:this.offset_x),Jt({fallbackStrategy:"bestFit",padding:8}),Yt({padding:8,mainAxis:true,crossAxis:true})]}).then((({x:t,y:e})=>{Object.assign(this.menuEl.style,{position:n,left:`${t}px`,top:`${e}px`,width:this.width,zIndex:"9999"})}))}}),{ancestorScroll:true,ancestorResize:true,elementResize:true,layoutShift:true,animationFrame:true});const n=this.cleanupAutoUpdate;this.cleanupAutoUpdate=()=>{n();t.disconnect()}}}cleanupFloatingUI(){if(this.cleanupAutoUpdate){this.cleanupAutoUpdate();this.cleanupAutoUpdate=undefined}}async updateFloatingPosition(){if(!this.triggerEl||!this.menuEl)return;this.setupFloatingUI()}getFloatingUIPlacement(){const t={top:"top",bottom:"bottom",left:"left",right:"right"};const n={start:"start",end:"end"};const e=t[this.position]||"bottom";const i=n[this.align]||"start";return`${e}-${i}`}render(){const t=Zt({open:this.isOpen&&!this.disabled});return e(i,{key:"0f7657697205f12f9830e68dfbde2a5cf9ee9927"},e("div",{key:"d8c43f09aed813d88540e56681ab8c459f02aa46",class:"relative",onBlur:()=>this.trigger==="click"&&!this.disabled?this.mouseLeaveHandler():null},e("div",{key:"160570bc4c4a6a3634bd50ec4f8d618df0740da6","aria-haspopup":"true","data-name":"menu-trigger",ref:t=>this.triggerEl=t,"aria-expanded":`${this.isOpen?"true":"false"}`,onMouseEnter:()=>this.trigger==="hover"&&!this.disabled?this.mouseEnterHandler():null,onKeyDown:async t=>{switch(t.key){case"Escape":await this.closeMenu();break;case"Enter":case" ":t.preventDefault();await this.openMenu();break}},onMouseLeave:()=>this.trigger==="hover"&&!this.disabled?this.mouseLeaveHandler():null,onClick:()=>this.trigger==="click"&&!this.disabled?this.toggleMenu():null,class:this.disabled?"contents":""},e("slot",{key:"03af929c5c7f52d1609b2e4afd19a09679257299",name:"menu-trigger"})),e("div",{key:"309d4498c6e6a047bbb35b9c2bd659e765870323",role:this.role,"data-position":this.position,"data-align":this.align,ref:t=>this.menuEl=t,"aria-hidden":`${this.isOpen?"false":"true"}`,onMouseEnter:()=>this.trigger==="hover"&&!this.disabled&&this.mouseEnterHandler(),onMouseLeave:()=>this.trigger==="hover"&&!this.disabled&&this.mouseLeaveHandler(),onKeyDown:t=>{if(t.key==="Enter"||t.key===" "||t.key==="Escape"){if(this.autoclose){this.mouseLeaveHandler()}}},onClick:()=>this.autoclose&&this.mouseLeaveHandler(),class:t,"data-name":"menu-content-wrapper"},e("slot",{key:"b05589a756bee1570d3fbcfaaf71903de73c9ff8",name:"menu-content"}))))}get el(){return s(this)}};export{tn as atui_menu};
//# sourceMappingURL=p-01e32b74.entry.js.map