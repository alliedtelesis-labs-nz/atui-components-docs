import{r as t,h as i,H as s,a as e}from"./p-CIq6mZ3i.js";import{a,c as n,o,f as h,s as r,b as c}from"./p-CQbxAaEb.js";const d=class{constructor(i){t(this,i)}render(){var t;return i("div",{key:"bcc4dfe305f44384713dc1594862c39392d98a9e",class:"flex items-center gap-8"},[(this.label||this.required)&&i("label",{key:"3a6bbb492697dd4c313d0d3768721c5446273389",htmlFor:(t=this.for)!==null&&t!==void 0?t:undefined,class:"flex gap-4"},this.label,this.required&&i("span",{key:"889253bed723ed0ca6fd16f9941e9fce8e82ce22",class:"text-error"},"*")),this.info_text&&i("atui-tooltip",{key:"31eeeb645d00c497a1fd5482217cc3a30c1c2646",position:"right"},i("span",{key:"888f9b50a50e822471f1689507f2ad7314ee9d58",slot:"tooltip-trigger",class:"material-icons cursor-pointer !text-icon-sm text-light"},"info_outline"),i("span",{key:"d697f497964404119454cf9526f99a5e648b12f2",slot:"tooltip-content"},this.info_text))])}};const l=200;const f=class{constructor(i){t(this,i);this.position="top";this.align="center";this.disabled=false;this.width="200px";this.offset=8;this.delay=150;this.isOpen=false;this.updatePosition=async()=>{if(this.triggerEl&&this.tooltipEl&&this.isOpen){await this.updateFloatingPosition()}}}async disabledChanged(t){if(t&&this.isOpen){await this.closeTooltip()}}async openTooltip(){if(this.disabled)return;if(this.tooltipEl){this.tooltipEl.showPopover();this.isOpen=true}await this.updatePosition()}async closeTooltip(){if(this.tooltipEl){this.tooltipEl.hidePopover();this.isOpen=false}}async componentDidLoad(){this.popoverId=`atui-tooltip-${Math.random().toString(36).substr(2,9)}`;await this.setupFloatingUI();setTimeout((()=>this.setupPopoverEventListeners()),0)}disconnectedCallback(){this.cleanupFloatingUI();if(this.showTimeout){clearTimeout(this.showTimeout);this.showTimeout=undefined}if(this.hideTimeout){clearTimeout(this.hideTimeout);this.hideTimeout=undefined}}async setupPopoverEventListeners(){if(this.tooltipEl){this.tooltipEl.addEventListener("toggle",(t=>{const i=t;this.isOpen=i.newState==="open";if(this.isOpen){requestAnimationFrame((()=>{this.tooltipEl.style.opacity="1";this.updatePosition()}))}else{this.tooltipEl.style.opacity="0"}}))}}async mouseEnterHandler(){if(this.hideTimeout){clearTimeout(this.hideTimeout);this.hideTimeout=undefined}if(this.isOpen)return;if(this.showTimeout){clearTimeout(this.showTimeout)}this.showTimeout=setTimeout((async()=>{if(!this.disabled&&!this.isOpen){await this.openTooltip()}this.showTimeout=undefined}),this.delay||0)}async mouseLeaveHandler(){if(this.showTimeout){clearTimeout(this.showTimeout);this.showTimeout=undefined}if(!this.isOpen)return;const t=Math.min(this.delay||0,150);this.hideTimeout=setTimeout((async()=>{if(this.isOpen){await this.closeTooltip()}this.hideTimeout=undefined}),t)}async setupFloatingUI(){if(this.cleanupAutoUpdate){this.cleanupAutoUpdate()}if(this.triggerEl&&this.tooltipEl){const t=new IntersectionObserver((t=>{if(!t[0].isIntersecting&&this.isOpen){this.closeTooltip()}}),{threshold:0});t.observe(this.triggerEl);this.cleanupAutoUpdate=a(this.triggerEl,this.tooltipEl,(()=>{var t;if(this.isOpen){const i=this.getFloatingUIPlacement();const s="fixed";n(this.triggerEl,this.tooltipEl,{placement:i,strategy:s,middleware:[o((t=this.offset)!==null&&t!==void 0?t:8),h({fallbackStrategy:"bestFit",padding:8}),r({padding:8,mainAxis:true,crossAxis:true}),c({apply:({availableWidth:t,availableHeight:i,elements:s})=>{const e=parseInt((this.width||"200px").toString(),10)||l;Object.assign(s.floating.style,{maxWidth:`${Math.min(t,e)}px`,maxHeight:`${i}px`})}})]}).then((({x:t,y:i})=>{const e={position:s,left:`${t}px`,top:`${i}px`,margin:"0",transform:"none",maxWidth:this.width||"200px"};Object.assign(this.tooltipEl.style,e)}))}}),{ancestorScroll:true,ancestorResize:true,elementResize:true,layoutShift:true,animationFrame:true});const i=this.cleanupAutoUpdate;this.cleanupAutoUpdate=()=>{i();t.disconnect()}}}cleanupFloatingUI(){var t;(t=this.cleanupAutoUpdate)===null||t===void 0?void 0:t.call(this);this.cleanupAutoUpdate=undefined}async updateFloatingPosition(){if(!this.triggerEl||!this.tooltipEl)return;this.setupFloatingUI()}getFloatingUIPlacement(){const t={top:"top",bottom:"bottom",left:"left",right:"right"};const i={start:"start",end:"end",center:"center"};const s=t[this.position]||"bottom";const e=i[this.align]||"center";return`${s}-${e}`}render(){return i(s,{key:"940d6889b7728360a5f35c80c7e9ff052dd62d73",class:"relative"},i("div",{key:"81b7537909dcd1a7be899c9702eb2a200a82bb24","aria-haspopup":"true","data-name":"tooltip-trigger",ref:t=>this.triggerEl=t,"aria-expanded":`${this.isOpen?"true":"false"}`,class:this.disabled?"contents":"",onMouseEnter:()=>!this.disabled?this.mouseEnterHandler():null,onMouseLeave:()=>!this.disabled?this.mouseLeaveHandler():null},i("slot",{key:"64b188a432c067200b63fc6e48eec2079681d332",name:"tooltip-trigger"})),i("div",{key:"cd56d8d701203e835dcc485560cc693409943404",ref:t=>this.tooltipEl=t,"data-position":this.position,"data-align":this.align,popover:"auto",id:this.popoverId,class:"pointer-events-none w-fit rounded-md bg-gray-950/80 px-[6px] py-2 text-sm text-white opacity-0 shadow-md transition-opacity duration-200 ease-out","data-name":"tooltip-content-wrapper"},i("slot",{key:"3b5e34aa71d4a69c557f1868628c02b29b01f7de",name:"tooltip-content"})))}get el(){return e(this)}static get watchers(){return{disabled:["disabledChanged"]}}};export{d as atui_form_label,f as atui_tooltip};
//# sourceMappingURL=p-cb41d786.entry.js.map