import{r as t,h as e,H as i,g as s}from"./p-C8uvvL0O.js";import{a,c as h,o as n,f as o,s as r,b as l}from"./p-BO6p966C.js";const d=class{constructor(e){t(this,e)}render(){var t;return e("div",{key:"e52a5a37130898e8537efeea0d5bc6b041fd426b",class:"flex items-center gap-8"},[(this.label||this.required)&&e("label",{key:"7c0dc564ab386bb31cf5dc79c5b741b8b7e19864",htmlFor:(t=this.for)!==null&&t!==void 0?t:undefined,class:"flex gap-4"},this.label,this.required&&e("span",{key:"aba209d4d38d4954bb3edc9773cb0211019e08fb",class:"text-error"},"*")),this.info_text&&e("at-tooltip",{key:"84a13a0b082af880513ec632864012e6b2256f2d",position:"right"},e("span",{key:"2b19e12fb91e1c09fe731f3bc7e7307f0dad61f4",slot:"tooltip-trigger",class:"material-icons !text-icon-sm text-light cursor-pointer"},"info_outline"),e("span",{key:"817587626ab1406bc6c6b321f54f1e2fb2cb323e"},this.info_text))])}};const c=200;const f=class{constructor(e){t(this,e);this.position="top";this.align="center";this.disabled=false;this.width="200px";this.offset=8;this.delay=150;this.isOpen=false;this.triggerEls=[];this.updatePosition=async()=>{if(this.triggerEl&&this.tooltipEl&&this.isOpen){await this.updateFloatingPosition()}};this.externalTriggerListeners=[]}async disabledChanged(t){if(t&&this.isOpen){await this.closeTooltip()}}async openTooltip(){if(this.disabled)return;if(this.tooltipEl){this.tooltipEl.showPopover();this.isOpen=true}await this.updatePosition();this.updateAriaExpanded()}async closeTooltip(){if(this.tooltipEl){this.tooltipEl.hidePopover();this.isOpen=false}this.updateAriaExpanded()}updateAriaExpanded(){if(this.trigger_id&&this.triggerEl){this.triggerEl.setAttribute("aria-expanded",this.isOpen?"true":"false")}}async componentDidLoad(){this.popoverId=`atui-tooltip-${Math.random().toString(36).substr(2,9)}`;if(this.trigger_id){this.triggerEls=Array.from(document.querySelectorAll(`[data-id="${this.trigger_id}"]`));if(this.triggerEls.length===0){console.warn(`atui-tooltip: No elements found with data-id="${this.trigger_id}"`);return}}else{this.triggerEl=this.el.querySelector('[data-name="tooltip-trigger"]')}await this.setupFloatingUI();setTimeout((()=>this.setupPopoverEventListeners()),0);if(this.trigger_id&&this.triggerEls.length){this.setupExternalTriggerListeners()}}disconnectedCallback(){this.cleanupFloatingUI();this.cleanupExternalTriggerListeners();if(this.showTimeout){clearTimeout(this.showTimeout);this.showTimeout=undefined}if(this.hideTimeout){clearTimeout(this.hideTimeout);this.hideTimeout=undefined}}cleanupExternalTriggerListeners(){this.externalTriggerListeners.forEach((({element:t,event:e,handler:i})=>{t.removeEventListener(e,i)}));this.externalTriggerListeners=[]}async setupPopoverEventListeners(){if(this.tooltipEl){this.tooltipEl.addEventListener("toggle",(t=>{const e=t;this.isOpen=e.newState==="open";if(this.isOpen){requestAnimationFrame((()=>{this.tooltipEl.style.opacity="1";this.updatePosition()}))}else{this.tooltipEl.style.opacity="0"}}))}}setupExternalTriggerListeners(){if(!this.triggerEls||this.triggerEls.length===0)return;this.triggerEls.forEach((t=>{const e=()=>{if(!this.disabled){this.triggerEl=t;this.mouseEnterHandler()}};const i=()=>{if(!this.disabled){this.triggerEl=t;this.mouseLeaveHandler()}};t.addEventListener("mouseenter",e);t.addEventListener("mouseleave",i);this.externalTriggerListeners.push({element:t,event:"mouseenter",handler:e},{element:t,event:"mouseleave",handler:i});t.setAttribute("aria-haspopup","true");t.setAttribute("aria-expanded","false")}))}async mouseEnterHandler(){if(this.hideTimeout){clearTimeout(this.hideTimeout);this.hideTimeout=undefined}if(this.isOpen)return;if(this.showTimeout){clearTimeout(this.showTimeout)}this.showTimeout=setTimeout((async()=>{if(!this.disabled&&!this.isOpen){await this.openTooltip()}this.showTimeout=undefined}),this.delay||0)}async mouseLeaveHandler(){if(this.showTimeout){clearTimeout(this.showTimeout);this.showTimeout=undefined}if(!this.isOpen)return;const t=Math.min(this.delay||0,150);this.hideTimeout=setTimeout((async()=>{if(this.isOpen){await this.closeTooltip()}this.hideTimeout=undefined}),t)}async setupFloatingUI(){if(this.cleanupAutoUpdate){this.cleanupAutoUpdate()}if(this.triggerEl&&this.tooltipEl){const t=new IntersectionObserver((t=>{if(!t[0].isIntersecting&&this.isOpen){this.closeTooltip()}}),{threshold:0});t.observe(this.triggerEl);this.cleanupAutoUpdate=a(this.triggerEl,this.tooltipEl,(()=>{var t;if(this.isOpen){const e=this.getFloatingUIPlacement();const i="fixed";h(this.triggerEl,this.tooltipEl,{placement:e,strategy:i,middleware:[n((t=this.offset)!==null&&t!==void 0?t:8),o({fallbackStrategy:"bestFit",padding:8}),r({padding:8,mainAxis:true,crossAxis:true}),l({apply:({availableWidth:t,availableHeight:e,elements:i})=>{const s=parseInt((this.width||"200px").toString(),10)||c;Object.assign(i.floating.style,{maxWidth:`${Math.min(t,s)}px`,maxHeight:`${e}px`})}})]}).then((({x:t,y:e})=>{const s={position:i,left:`${t}px`,top:`${e}px`,margin:"0",transform:"none",maxWidth:this.width||"200px"};Object.assign(this.tooltipEl.style,s)}))}}),{ancestorScroll:true,ancestorResize:true,elementResize:true,layoutShift:true,animationFrame:true});const e=this.cleanupAutoUpdate;this.cleanupAutoUpdate=()=>{e();t.disconnect()}}}cleanupFloatingUI(){var t;(t=this.cleanupAutoUpdate)===null||t===void 0?void 0:t.call(this);this.cleanupAutoUpdate=undefined}async updateFloatingPosition(){if(!this.triggerEl||!this.tooltipEl)return;this.setupFloatingUI()}getFloatingUIPlacement(){const t={top:"top",bottom:"bottom",left:"left",right:"right"};const e={start:"start",end:"end",center:"center"};const i=t[this.position]||"bottom";const s=e[this.align]||"center";return`${i}-${s}`}render(){return e(i,{key:"e9b71be5f8ee10f2ae95a27c3441d5258c18560e",class:"relative"},!this.trigger_id&&e("div",{key:"5b7e1eef93ed84ec9a96bd32a985ffb0b2715387","aria-haspopup":"true","data-name":"tooltip-trigger",ref:t=>this.triggerEl=t,"aria-expanded":`${this.isOpen?"true":"false"}`,class:this.disabled?"contents":"",onMouseEnter:()=>!this.disabled?this.mouseEnterHandler():null,onMouseLeave:()=>!this.disabled?this.mouseLeaveHandler():null},e("slot",{key:"da251bdb814e2824166a8aa6b53bf92038b99f80",name:"tooltip-trigger"})),e("div",{key:"940e95173fade08a284857a636f9a167f3f09ca6",ref:t=>this.tooltipEl=t,"data-position":this.position,"data-align":this.align,popover:"auto",id:this.popoverId,class:"pointer-events-none w-fit rounded-md bg-gray-950/80 px-[6px] py-2 text-sm text-white opacity-0 shadow-md transition-opacity duration-200 ease-out","data-name":"tooltip-content-wrapper"},e("slot",{key:"59e4a4829a0bbd77d0f44baea16458ddfb64f7e0"})))}get el(){return s(this)}static get watchers(){return{disabled:["disabledChanged"]}}};export{d as at_form_label,f as at_tooltip};
//# sourceMappingURL=p-65dc0755.entry.js.map