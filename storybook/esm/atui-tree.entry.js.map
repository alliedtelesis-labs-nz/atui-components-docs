{"version":3,"file":"atui-tree.entry.js","sources":["src/components/atui-tree/atui-tree.tsx"],"sourcesContent":["import { Component, Event, EventEmitter, h, Prop, State } from '@stencil/core';\nimport { ButtonSize } from '../atui-button/atui-button';\nimport { TreeNode } from '../../types/tree';\n\n/**\n * @category Navigation\n * @description A tree component for displaying hierarchical data.\n */\n\n/**\n * ### ```interface ItemNode```\n * ```\n *  id: string;\n *  displayName: string;\n *  children: ItemNode[];\n *  isSelected?: boolean;\n *  tooltip?: string;\n * ```\n */\n@Component({\n    tag: 'atui-tree',\n    shadow: false,\n})\nexport class AtuiTreeComponent {\n    /**\n     * List of items to be displayed in the tree\n     */\n    @Prop({ mutable: true })\n    item_list: TreeNode[];\n\n    /**\n     * Set the size of the tree button, default sm\n     */\n    @Prop()\n    size: ButtonSize = 'sm';\n\n    /**\n     * Emits when the button is clicked\n     */\n    @Event()\n    atuiClick: EventEmitter<TreeNode>;\n\n    @State() flattenedItemList: Array<TreeNode> = [];\n    @State() flattenedItemStyles = [];\n\n    handleClick = (id: string) => {\n        let clickedItem: TreeNode | null = null;\n\n        const updateIsSelected = (items: TreeNode[]): TreeNode[] => {\n            const tempItems: TreeNode[] = [];\n\n            items.forEach((item) => {\n                const tempItem = { ...item };\n\n                if (item.id === id) {\n                    tempItem.selected = !tempItem.selected;\n                    clickedItem = tempItem;\n                }\n\n                if (item.children) {\n                    tempItem.children = updateIsSelected(item.children);\n                }\n\n                tempItems.push(tempItem);\n            });\n\n            return tempItems;\n        };\n\n        this.item_list = updateIsSelected(this.item_list);\n        this.flattenItemList(this.item_list);\n\n        if (clickedItem) {\n            this.atuiClick.emit(clickedItem);\n        }\n    };\n\n    flattenItemList = (itemList: TreeNode[]) => {\n        const tempItemList: TreeNode[] = [];\n\n        const addToFlattenedAndCheckChildren = (\n            items: TreeNode[],\n            layer: number,\n        ) => {\n            items.forEach((item) => {\n                const itemWithDepth = { ...item, depth: layer };\n                tempItemList.push(itemWithDepth);\n\n                if (item.selected && item.children && item.children.length) {\n                    addToFlattenedAndCheckChildren(item.children, layer + 1);\n                }\n            });\n        };\n\n        addToFlattenedAndCheckChildren(itemList, 0);\n        this.flattenedItemList = tempItemList;\n    };\n\n    componentWillRender() {\n        if (this.item_list && this.item_list.length) {\n            this.flattenItemList(this.item_list);\n        }\n    }\n\n    render() {\n        return (\n            <div class=\"w-full\">\n                <slot />\n                {this.flattenedItemList &&\n                    this.flattenedItemList.map((item, index) => (\n                        <div\n                            key={index}\n                            class={`flex w-full`}\n                        >\n                            {item.tooltip !== undefined ? (\n                                <atui-tooltip\n                                    position=\"right\"\n                                    class=\"flex flex-grow items-start\"\n                                >\n                                    <atui-tree-item\n                                        class=\"flex-grow\"\n                                        depth={item.depth}\n                                        slot=\"tooltip-trigger\"\n                                        onAtuiClick={() =>\n                                            this.handleClick(item.id)\n                                        }\n                                        key={item.id}\n                                        label={item.displayName}\n                                        size={this.size}\n                                        has_children={\n                                            item.children &&\n                                            item.children.length > 0\n                                        }\n                                        selected={item.selected}\n                                    >\n                                        <slot name=\"item-content\"></slot>\n                                    </atui-tree-item>\n\n                                    <span>{item.tooltip}</span>\n                                </atui-tooltip>\n                            ) : (\n                                <atui-tree-item\n                                    depth={item.depth}\n                                    style={{\n                                        paddingLeft:\n                                            this.flattenedItemStyles[index] +\n                                            'px',\n                                    }}\n                                    onAtuiClick={() =>\n                                        this.handleClick(item.id)\n                                    }\n                                    has_children={\n                                        item.children &&\n                                        item.children.length > 0\n                                    }\n                                    key={item.id}\n                                    label={item.displayName}\n                                    size={this.size}\n                                >\n                                    <slot name=\"item-content\"></slot>\n                                </atui-tree-item>\n                            )}\n                        </div>\n                    ))}\n            </div>\n        );\n    }\n}\n"],"names":[],"mappings":";;MAuBa,iBAAiB,GAAA,MAAA;AAJ9B,IAAA,WAAA,CAAA,OAAA,EAAA;;;AAWI;;AAEG;AAEH,QAAA,IAAI,CAAA,IAAA,GAAe,IAAI;AAQd,QAAA,IAAiB,CAAA,iBAAA,GAAoB,EAAE;AACvC,QAAA,IAAmB,CAAA,mBAAA,GAAG,EAAE;AAEjC,QAAA,IAAA,CAAA,WAAW,GAAG,CAAC,EAAU,KAAI;YACzB,IAAI,WAAW,GAAoB,IAAI;AAEvC,YAAA,MAAM,gBAAgB,GAAG,CAAC,KAAiB,KAAgB;gBACvD,MAAM,SAAS,GAAe,EAAE;AAEhC,gBAAA,KAAK,CAAC,OAAO,CAAC,CAAC,IAAI,KAAI;oBACnB,MAAM,QAAQ,GAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EAAQ,IAAI,CAAE;AAE5B,oBAAA,IAAI,IAAI,CAAC,EAAE,KAAK,EAAE,EAAE;AAChB,wBAAA,QAAQ,CAAC,QAAQ,GAAG,CAAC,QAAQ,CAAC,QAAQ;wBACtC,WAAW,GAAG,QAAQ;;AAG1B,oBAAA,IAAI,IAAI,CAAC,QAAQ,EAAE;wBACf,QAAQ,CAAC,QAAQ,GAAG,gBAAgB,CAAC,IAAI,CAAC,QAAQ,CAAC;;AAGvD,oBAAA,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC;AAC5B,iBAAC,CAAC;AAEF,gBAAA,OAAO,SAAS;AACpB,aAAC;YAED,IAAI,CAAC,SAAS,GAAG,gBAAgB,CAAC,IAAI,CAAC,SAAS,CAAC;AACjD,YAAA,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,SAAS,CAAC;YAEpC,IAAI,WAAW,EAAE;AACb,gBAAA,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,WAAW,CAAC;;AAExC,SAAC;AAED,QAAA,IAAA,CAAA,eAAe,GAAG,CAAC,QAAoB,KAAI;YACvC,MAAM,YAAY,GAAe,EAAE;AAEnC,YAAA,MAAM,8BAA8B,GAAG,CACnC,KAAiB,EACjB,KAAa,KACb;AACA,gBAAA,KAAK,CAAC,OAAO,CAAC,CAAC,IAAI,KAAI;oBACnB,MAAM,aAAa,mCAAQ,IAAI,CAAA,EAAA,EAAE,KAAK,EAAE,KAAK,GAAE;AAC/C,oBAAA,YAAY,CAAC,IAAI,CAAC,aAAa,CAAC;AAEhC,oBAAA,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE;wBACxD,8BAA8B,CAAC,IAAI,CAAC,QAAQ,EAAE,KAAK,GAAG,CAAC,CAAC;;AAEhE,iBAAC,CAAC;AACN,aAAC;AAED,YAAA,8BAA8B,CAAC,QAAQ,EAAE,CAAC,CAAC;AAC3C,YAAA,IAAI,CAAC,iBAAiB,GAAG,YAAY;AACzC,SAAC;AAuEJ;IArEG,mBAAmB,GAAA;QACf,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE;AACzC,YAAA,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,SAAS,CAAC;;;IAI5C,MAAM,GAAA;AACF,QAAA,QACI,CAAA,CAAA,KAAA,EAAA,EAAA,GAAA,EAAA,0CAAA,EAAK,KAAK,EAAC,QAAQ,EAAA,EACf,CAAQ,CAAA,MAAA,EAAA,EAAA,GAAA,EAAA,0CAAA,EAAA,CAAA,EACP,IAAI,CAAC,iBAAiB;YACnB,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,KAAK,MACnC,WACI,GAAG,EAAE,KAAK,EACV,KAAK,EAAE,CAAA,WAAA,CAAa,IAEnB,IAAI,CAAC,OAAO,KAAK,SAAS,IACvB,oBACI,QAAQ,EAAC,OAAO,EAChB,KAAK,EAAC,4BAA4B,EAAA,EAElC,CACI,CAAA,gBAAA,EAAA,EAAA,KAAK,EAAC,WAAW,EACjB,KAAK,EAAE,IAAI,CAAC,KAAK,EACjB,IAAI,EAAC,iBAAiB,EACtB,WAAW,EAAE,MACT,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,EAE7B,GAAG,EAAE,IAAI,CAAC,EAAE,EACZ,KAAK,EAAE,IAAI,CAAC,WAAW,EACvB,IAAI,EAAE,IAAI,CAAC,IAAI,EACf,YAAY,EACR,IAAI,CAAC,QAAQ;oBACb,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,EAE5B,QAAQ,EAAE,IAAI,CAAC,QAAQ,EAAA,EAEvB,CAAA,CAAA,MAAA,EAAA,EAAM,IAAI,EAAC,cAAc,EAAA,CAAQ,CACpB,EAEjB,CAAA,CAAA,MAAA,EAAA,IAAA,EAAO,IAAI,CAAC,OAAO,CAAQ,CAChB,KAEf,CAAA,CAAA,gBAAA,EAAA,EACI,KAAK,EAAE,IAAI,CAAC,KAAK,EACjB,KAAK,EAAE;AACH,oBAAA,WAAW,EACP,IAAI,CAAC,mBAAmB,CAAC,KAAK,CAAC;wBAC/B,IAAI;AACX,iBAAA,EACD,WAAW,EAAE,MACT,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,EAE7B,YAAY,EACR,IAAI,CAAC,QAAQ;AACb,oBAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,EAE5B,GAAG,EAAE,IAAI,CAAC,EAAE,EACZ,KAAK,EAAE,IAAI,CAAC,WAAW,EACvB,IAAI,EAAE,IAAI,CAAC,IAAI,EAAA,EAEf,CAAM,CAAA,MAAA,EAAA,EAAA,IAAI,EAAC,cAAc,EAAQ,CAAA,CACpB,CACpB,CACC,CACT,CAAC,CACJ;;;;;;"}