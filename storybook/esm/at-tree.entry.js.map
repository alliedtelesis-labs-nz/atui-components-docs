{"version":3,"file":"at-tree.entry.js","sources":["src/components/at-tree/at-tree.tsx"],"sourcesContent":["import { Component, Event, EventEmitter, h, Prop, State } from '@stencil/core';\nimport { ButtonSize } from '../at-button/at-button';\nimport { TreeNode } from '../../types/tree';\n\n/**\n * @category Navigation\n * @description A tree component for displaying hierarchical data.\n */\n\n/**\n * ### ```interface ItemNode```\n * ```\n *  id: string;\n *  displayName: string;\n *  children: ItemNode[];\n *  isSelected?: boolean;\n *  tooltip?: string;\n * ```\n */\n@Component({\n    tag: 'at-tree',\n    shadow: false,\n})\nexport class AtTreeComponent {\n    /**\n     * List of items to be displayed in the tree\n     */\n    @Prop({ mutable: true })\n    item_list: TreeNode[];\n\n    /**\n     * Set the size of the tree button, default sm\n     */\n    @Prop()\n    size: ButtonSize = 'sm';\n\n    /**\n     * Emits when the button is clicked\n     */\n    @Event()\n    atuiClick: EventEmitter<TreeNode>;\n\n    @State() flattenedItemList: Array<TreeNode> = [];\n    @State() flattenedItemStyles = [];\n\n    handleClick = (id: string) => {\n        let clickedItem: TreeNode | null = null;\n\n        const updateIsSelected = (items: TreeNode[]): TreeNode[] => {\n            const tempItems: TreeNode[] = [];\n\n            items.forEach((item) => {\n                const tempItem = { ...item };\n\n                if (item.id === id) {\n                    tempItem.selected = !tempItem.selected;\n                    clickedItem = tempItem;\n                }\n\n                if (item.children) {\n                    tempItem.children = updateIsSelected(item.children);\n                }\n\n                tempItems.push(tempItem);\n            });\n\n            return tempItems;\n        };\n\n        this.item_list = updateIsSelected(this.item_list);\n        this.flattenItemList(this.item_list);\n\n        if (clickedItem) {\n            this.atuiClick.emit(clickedItem);\n        }\n    };\n\n    flattenItemList = (itemList: TreeNode[]) => {\n        const tempItemList: TreeNode[] = [];\n\n        const addToFlattenedAndCheckChildren = (\n            items: TreeNode[],\n            layer: number,\n        ) => {\n            items.forEach((item) => {\n                const itemWithDepth = { ...item, depth: layer };\n                tempItemList.push(itemWithDepth);\n\n                if (item.selected && item.children && item.children.length) {\n                    addToFlattenedAndCheckChildren(item.children, layer + 1);\n                }\n            });\n        };\n\n        addToFlattenedAndCheckChildren(itemList, 0);\n        this.flattenedItemList = tempItemList;\n    };\n\n    componentWillRender() {\n        if (this.item_list && this.item_list.length) {\n            this.flattenItemList(this.item_list);\n        }\n    }\n\n    render() {\n        return (\n            <div class=\"w-full\">\n                <slot />\n                {this.flattenedItemList &&\n                    this.flattenedItemList.map((item, index) => (\n                        <div\n                            key={index}\n                            class={`flex w-full`}\n                        >\n                            {item.tooltip !== undefined ? (\n                                <at-tooltip\n                                    position=\"right\"\n                                    class=\"flex flex-grow items-start\"\n                                >\n                                    <at-tree-item\n                                        class=\"flex-grow\"\n                                        depth={item.depth}\n                                        slot=\"tooltip-trigger\"\n                                        onAtuiClick={() =>\n                                            this.handleClick(item.id)\n                                        }\n                                        key={item.id}\n                                        label={item.displayName}\n                                        size={this.size}\n                                        has_children={\n                                            item.children &&\n                                            item.children.length > 0\n                                        }\n                                        selected={item.selected}\n                                    >\n                                        <slot name=\"item-content\"></slot>\n                                    </at-tree-item>\n\n                                    <span>{item.tooltip}</span>\n                                </at-tooltip>\n                            ) : (\n                                <at-tree-item\n                                    depth={item.depth}\n                                    style={{\n                                        paddingLeft:\n                                            this.flattenedItemStyles[index] +\n                                            'px',\n                                    }}\n                                    onAtuiClick={() =>\n                                        this.handleClick(item.id)\n                                    }\n                                    has_children={\n                                        item.children &&\n                                        item.children.length > 0\n                                    }\n                                    key={item.id}\n                                    label={item.displayName}\n                                    size={this.size}\n                                >\n                                    <slot name=\"item-content\"></slot>\n                                </at-tree-item>\n                            )}\n                        </div>\n                    ))}\n            </div>\n        );\n    }\n}\n"],"names":[],"mappings":"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"}