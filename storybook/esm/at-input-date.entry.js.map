{"version":3,"file":"at-input-date.entry.js","sources":["src/components/at-input-date/at-input-date.tsx"],"sourcesContent":["import {\n    Component,\n    h,\n    Prop,\n    State,\n    Element,\n    EventEmitter,\n    Event,\n    Host,\n} from '@stencil/core';\nimport { DateFormat, MIN_DATE, MAX_DATE } from '../../types';\nimport { fetchTranslations } from '../../utils/translation';\nimport { TimeDatePresentationUtil } from '../../utils/time-date-presentation.util';\nimport { classlist } from '../../utils/classlist';\n\nconst inputVariantsConfig = {\n    variants: {\n        disabled: {\n            false: 'focus-within:ring-active-foreground/30 bg-white',\n            true: 'bg-surface-1 !text-disabled pointer-events-none border-none',\n        },\n        readonly: {\n            false: 'focus-within:ring-active-foreground/30',\n            true: '!bg-surface-1 !text-dark cursor-text border-none',\n        },\n        invalid: {\n            false: 'border-med focus-within:border-active-dark focus-within:ring-active-foreground/30',\n            true: 'border-error-base focus-within:border-error-base focus-within:ring-destructive-foreground/30',\n        },\n    },\n    defaultVariants: {\n        disabled: false,\n        readonly: false,\n        invalid: false,\n    },\n};\n\n@Component({\n    tag: 'at-input-date',\n    shadow: false,\n})\nexport class AtInputDate {\n    /**\n     * Minimum selectable date\n     */\n    @Prop({ mutable: true }) min_date: Date = MIN_DATE;\n\n    /**\n     * Maximum selectable date\n     */\n    @Prop({ mutable: true }) max_date: Date = MAX_DATE;\n\n    /**\n     * Label text displayed above the date picker\n     */\n    @Prop() label?: string;\n\n    /**\n     * Short description or validation hint if required\n     */\n    @Prop() hint_text: string;\n\n    /**\n     * Optional info icon with detailed tooltip description\n     */\n    @Prop() info_text?: string;\n\n    /**\n     * Error text displayed when invalid is set\n     */\n    @Prop() error_text: string;\n\n    /**\n     * Current value of the selected date\n     */\n    @Prop({ mutable: true }) value: Date;\n\n    /**\n     * Adds a required * to the element\n     */\n    @Prop()\n    required: boolean;\n\n    /**\n     * Shows the error text\n     */\n    @Prop()\n    invalid: boolean;\n\n    /**\n     * Makes the input read only\n     */\n    @Prop()\n    readonly: boolean;\n\n    /**\n     * Disables interaction with the input\n     */\n    @Prop()\n    disabled: boolean = false;\n\n    @State() selectedDate: string;\n    @State() translations: any;\n    @Element() el;\n\n    private inputId = `datepicker-${Math.random().toString(36).substring(2, 11)}`;\n\n    /**\n     * Emitted when the date selection changes\n     */\n    @Event() atuiChange: EventEmitter<Date>;\n\n    async componentWillLoad() {\n        this.translations = await fetchTranslations(this.el);\n\n        if (!this.value) {\n            this.value = new Date();\n        }\n\n        this.selectedDate = TimeDatePresentationUtil.getFormattedDate(\n            this.value,\n            'YYYY-MM-DD' as DateFormat,\n        );\n    }\n\n    componentWillRender() {\n        if (!this.selectedDate && this.value) {\n            this.selectedDate = TimeDatePresentationUtil.getFormattedDate(\n                this.value,\n                'YYYY-MM-DD' as DateFormat,\n            );\n        }\n    }\n\n    render() {\n        const getClassname = classlist(\n            'placeholder-text-light pr -24 relative flex min-h-36 min-h-[36px] w-full flex-shrink flex-grow basis-0 gap-4 overflow-hidden rounded-md border border-solid overflow-ellipsis transition-colors duration-300 ease-in-out outline-none focus-within:ring-2 focus-within:outline-0',\n            inputVariantsConfig,\n        );\n\n        const classname = getClassname({\n            invalid: this.invalid,\n            disabled: this.disabled,\n            readonly: this.readonly,\n        });\n\n        return (\n            <Host>\n                <style>{`\n                input[data-name=\"datepicker\"]::-webkit-calendar-picker-indicator {\n                    cursor: pointer;\n                    position: absolute;\n                    right: 8px;\n                    top: 50%;\n                    transform: translateY(-50%);\n                }\n\n                input[data-name=\"datepicker\"] {\n                    padding-right: 22px;\n                    position: relative;\n                }\n                `}</style>\n                <div class=\"flex flex-row\">\n                    <div class=\"flex-fill flex flex-col\">\n                        <div class=\"flex flex-col\">\n                            {(this.label ||\n                                this.required ||\n                                this.info_text) && (\n                                <at-form-label\n                                    label={this.label}\n                                    for={this.inputId}\n                                    required={this.required && !this.readonly}\n                                    info_text={this.info_text}\n                                />\n                            )}\n\n                            {this.hint_text && (\n                                <span\n                                    class=\"text-light mb-8 inline-block text-xs leading-tight\"\n                                    data-name=\"datepicker-hint\"\n                                >\n                                    {this.hint_text}\n                                </span>\n                            )}\n\n                            <div class={classname}>\n                                <input\n                                    type=\"date\"\n                                    id={this.inputId}\n                                    name=\"datePicker\"\n                                    class=\"flex w-full cursor-pointer px-8 py-8 outline-0\"\n                                    readonly={this.readonly ? true : undefined}\n                                    disabled={this.disabled ? true : undefined}\n                                    required={this.required}\n                                    value={this.selectedDate}\n                                    min={TimeDatePresentationUtil.getFormattedDate(\n                                        this.min_date,\n                                        'YYYY-MM-DD' as DateFormat,\n                                    )}\n                                    max={TimeDatePresentationUtil.getFormattedDate(\n                                        this.max_date,\n                                        'YYYY-MM-DD' as DateFormat,\n                                    )}\n                                    data-name=\"datepicker\"\n                                    onChange={(event) => {\n                                        const dateString = (\n                                            event.target as HTMLInputElement\n                                        ).value;\n\n                                        const input =\n                                            event.target as HTMLInputElement;\n\n                                        // Validate year is 4 digits (between 0000-9999)\n                                        const yearMatch =\n                                            dateString.match(/^(\\d{4})-/);\n                                        if (\n                                            !yearMatch ||\n                                            yearMatch[1].length !== 4\n                                        ) {\n                                            // Reset to previous valid date if year is invalid\n                                            (\n                                                event.target as HTMLInputElement\n                                            ).value = this.selectedDate;\n                                            return;\n                                        }\n\n                                        this.selectedDate = dateString;\n                                        this.invalid = !input.validity.valid;\n                                        this.value = new Date(dateString);\n                                        this.atuiChange.emit(this.value);\n                                    }}\n                                />\n                            </div>\n                        </div>\n\n                        {this.error_text && this.invalid && (\n                            <span\n                                class=\"text-error text-sm\"\n                                data-name=\"datepicker-error\"\n                            >\n                                {this.error_text}\n                            </span>\n                        )}\n                    </div>\n                </div>\n            </Host>\n        );\n    }\n}\n"],"names":[],"mappings":";;;;;;;;AAeA,MAAM,mBAAmB,GAAG;AACxB,IAAA,QAAQ,EAAE;AACN,QAAA,QAAQ,EAAE;AACN,YAAA,KAAK,EAAE,iDAAiD;AACxD,YAAA,IAAI,EAAE,6DAA6D;AACtE,SAAA;AACD,QAAA,QAAQ,EAAE;AACN,YAAA,KAAK,EAAE,wCAAwC;AAC/C,YAAA,IAAI,EAAE,kDAAkD;AAC3D,SAAA;AACD,QAAA,OAAO,EAAE;AACL,YAAA,KAAK,EAAE,mFAAmF;AAC1F,YAAA,IAAI,EAAE,8FAA8F;AACvG,SAAA;AACJ,KAAA;AACD,IAAA,eAAe,EAAE;AACb,QAAA,QAAQ,EAAE,KAAK;AACf,QAAA,QAAQ,EAAE,KAAK;AACf,QAAA,OAAO,EAAE,KAAK;AACjB,KAAA;CACJ;MAMY,WAAW,GAAA,MAAA;;;;;AACpB;;AAEG;IACsB,QAAQ,GAAS,QAAQ;AAElD;;AAEG;IACsB,QAAQ,GAAS,QAAQ;AAElD;;AAEG;AACK,IAAA,KAAK;AAEb;;AAEG;AACK,IAAA,SAAS;AAEjB;;AAEG;AACK,IAAA,SAAS;AAEjB;;AAEG;AACK,IAAA,UAAU;AAElB;;AAEG;AACsB,IAAA,KAAK;AAE9B;;AAEG;AAEH,IAAA,QAAQ;AAER;;AAEG;AAEH,IAAA,OAAO;AAEP;;AAEG;AAEH,IAAA,QAAQ;AAER;;AAEG;IAEH,QAAQ,GAAY,KAAK;AAEhB,IAAA,YAAY;AACZ,IAAA,YAAY;;AAGb,IAAA,OAAO,GAAG,CAAc,WAAA,EAAA,IAAI,CAAC,MAAM,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE;AAE7E;;AAEG;AACM,IAAA,UAAU;AAEnB,IAAA,MAAM,iBAAiB,GAAA;QACnB,IAAI,CAAC,YAAY,GAAG,MAAM,iBAAiB,CAAC,IAAI,CAAC,EAAE,CAAC;AAEpD,QAAA,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE;AACb,YAAA,IAAI,CAAC,KAAK,GAAG,IAAI,IAAI,EAAE;;AAG3B,QAAA,IAAI,CAAC,YAAY,GAAG,wBAAwB,CAAC,gBAAgB,CACzD,IAAI,CAAC,KAAK,EACV,YAA0B,CAC7B;;IAGL,mBAAmB,GAAA;QACf,IAAI,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,KAAK,EAAE;AAClC,YAAA,IAAI,CAAC,YAAY,GAAG,wBAAwB,CAAC,gBAAgB,CACzD,IAAI,CAAC,KAAK,EACV,YAA0B,CAC7B;;;IAIT,MAAM,GAAA;QACF,MAAM,YAAY,GAAG,SAAS,CAC1B,kRAAkR,EAClR,mBAAmB,CACtB;QAED,MAAM,SAAS,GAAG,YAAY,CAAC;YAC3B,OAAO,EAAE,IAAI,CAAC,OAAO;YACrB,QAAQ,EAAE,IAAI,CAAC,QAAQ;YACvB,QAAQ,EAAE,IAAI,CAAC,QAAQ;AAC1B,SAAA,CAAC;QAEF,QACI,EAAC,IAAI,EAAA,EAAA,GAAA,EAAA,0CAAA,EAAA,EACD,CAAQ,CAAA,OAAA,EAAA,EAAA,GAAA,EAAA,0CAAA,EAAA,EAAA;;;;;;;;;;;;;iBAaP,CAAS,EACV,CAAK,CAAA,KAAA,EAAA,EAAA,GAAA,EAAA,0CAAA,EAAA,KAAK,EAAC,eAAe,EAAA,EACtB,CAAK,CAAA,KAAA,EAAA,EAAA,GAAA,EAAA,0CAAA,EAAA,KAAK,EAAC,yBAAyB,EAAA,EAChC,CAAK,CAAA,KAAA,EAAA,EAAA,GAAA,EAAA,0CAAA,EAAA,KAAK,EAAC,eAAe,EAAA,EACrB,CAAC,IAAI,CAAC,KAAK;AACR,YAAA,IAAI,CAAC,QAAQ;YACb,IAAI,CAAC,SAAS,MACd,CACI,CAAA,eAAA,EAAA,EAAA,GAAA,EAAA,0CAAA,EAAA,KAAK,EAAE,IAAI,CAAC,KAAK,EACjB,GAAG,EAAE,IAAI,CAAC,OAAO,EACjB,QAAQ,EAAE,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,QAAQ,EACzC,SAAS,EAAE,IAAI,CAAC,SAAS,GAC3B,CACL,EAEA,IAAI,CAAC,SAAS,KACX,6DACI,KAAK,EAAC,oDAAoD,EAAA,WAAA,EAChD,iBAAiB,EAE1B,EAAA,IAAI,CAAC,SAAS,CACZ,CACV,EAED,CAAK,CAAA,KAAA,EAAA,EAAA,GAAA,EAAA,0CAAA,EAAA,KAAK,EAAE,SAAS,EAAA,EACjB,CAAA,CAAA,OAAA,EAAA,EAAA,GAAA,EAAA,0CAAA,EACI,IAAI,EAAC,MAAM,EACX,EAAE,EAAE,IAAI,CAAC,OAAO,EAChB,IAAI,EAAC,YAAY,EACjB,KAAK,EAAC,gDAAgD,EACtD,QAAQ,EAAE,IAAI,CAAC,QAAQ,GAAG,IAAI,GAAG,SAAS,EAC1C,QAAQ,EAAE,IAAI,CAAC,QAAQ,GAAG,IAAI,GAAG,SAAS,EAC1C,QAAQ,EAAE,IAAI,CAAC,QAAQ,EACvB,KAAK,EAAE,IAAI,CAAC,YAAY,EACxB,GAAG,EAAE,wBAAwB,CAAC,gBAAgB,CAC1C,IAAI,CAAC,QAAQ,EACb,YAA0B,CAC7B,EACD,GAAG,EAAE,wBAAwB,CAAC,gBAAgB,CAC1C,IAAI,CAAC,QAAQ,EACb,YAA0B,CAC7B,EAAA,WAAA,EACS,YAAY,EACtB,QAAQ,EAAE,CAAC,KAAK,KAAI;AAChB,gBAAA,MAAM,UAAU,GACZ,KAAK,CAAC,MACT,CAAC,KAAK;AAEP,gBAAA,MAAM,KAAK,GACP,KAAK,CAAC,MAA0B;;gBAGpC,MAAM,SAAS,GACX,UAAU,CAAC,KAAK,CAAC,WAAW,CAAC;AACjC,gBAAA,IACI,CAAC,SAAS;oBACV,SAAS,CAAC,CAAC,CAAC,CAAC,MAAM,KAAK,CAAC,EAC3B;;oBAGM,KAAK,CAAC,MACT,CAAC,KAAK,GAAG,IAAI,CAAC,YAAY;oBAC3B;;AAGJ,gBAAA,IAAI,CAAC,YAAY,GAAG,UAAU;gBAC9B,IAAI,CAAC,OAAO,GAAG,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK;gBACpC,IAAI,CAAC,KAAK,GAAG,IAAI,IAAI,CAAC,UAAU,CAAC;gBACjC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC;AACpC,aAAC,EAAA,CACH,CACA,CACJ,EAEL,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,OAAO,KAC5B,CACI,CAAA,MAAA,EAAA,EAAA,GAAA,EAAA,0CAAA,EAAA,KAAK,EAAC,oBAAoB,eAChB,kBAAkB,EAAA,EAE3B,IAAI,CAAC,UAAU,CACb,CACV,CACC,CACJ,CACH;;;;;;"}