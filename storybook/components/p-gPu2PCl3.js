import{p as t,H as e,d as s,h as i,F as a,t as n}from"./p-CGooRokE.js";import{a as o,T as l}from"./p-mzmOmTeg.js";import{T as c}from"./p-C3LwY5aR.js";import{f as h}from"./p-DuLooPsr.js";import{d as m}from"./p-DLlWJE6U.js";import{d as r}from"./p-BF1qhNk1.js";import{d}from"./p-pi0dA1cy.js";import{d as u}from"./p-COVJfV1p.js";import{d as f}from"./p-BqblBn6C.js";import{d as p}from"./p-CJVSu6V6.js";import{d as b}from"./p-BSx33cCi.js";import{d as x}from"./p-DuWiehaP.js";import{d as y}from"./p-D3zsC1jI.js";const k=t(class extends e{constructor(t){super(),!1!==t&&this.__registerHost(),this.atuiCancel=s(this,"atuiCancel",7),this.atuiSubmit=s(this,"atuiSubmit",7)}units;common_options;min_date=null;min_seconds=60;max_seconds=Number.MAX_SAFE_INTEGER;initial_selected_time;custom_error_message=null;show_all_time=!1;errorText="";secondaryErrorText="";translations;dropdownOptions;timeValue;watchTimeValue(){this.updateSelectedTime(this.timeValue)}timeUnit;watchTimeUnit(){this.updateSelectedTime(this.timeValue)}selectedTime;startDate;get el(){return this}async componentWillLoad(){this.translations=await h(this.el)}componentWillRender(){this.selectedTime||(this.initSelectedTime(this.initial_selected_time),this.initDropdownOptions())}initDropdownOptions(){this.dropdownOptions=this.show_all_time?[o.ALL,...this.units]:this.units}initSelectedTime(t){const e="object"==typeof t?l.getCurrentOrDefaultUnit(t.unit,this.units):o.ALL,s="object"==typeof t?t.value:null;this.timeUnit=e,this.timeValue=s,this.selectedTime=t,this.startDate=this.getRelativeDate()?.startDate}updateSelectedTime(t){const e=this.timeUnit;e!==o.ALL?this.selectedTime={unit:e,value:t}:(this.selectedTime=c.ALL,this.timeValue&&(this.timeValue=null)),this.validateInput(),this.startDate=this.getRelativeDate()?.startDate}validateInput(){if(this.selectedTime!==c.ALL){const t=this.min_date?l.getSecondsAgoFromDate(this.min_date):this.max_seconds,e=l.convertSecondsToUnit(t,this.timeUnit,0,!0),s=l.convertSecondsToUnit(this.min_seconds,this.timeUnit,0,!1);this.errorText=this.timeValue>e?this.translations?this.translations.ATUI.TIME.VALIDATION.MAX_NUMBER.replace("{lowerThanValue}",`${e+1} ${this.timeUnit}`):`Please enter a value lower than ${e} ${this.timeUnit}`:this.timeValue<s?this.translations?this.translations.ATUI.TIME.VALIDATION.MIN_NUMBER.replace("{min}",`${e} ${this.timeUnit}`):`Please enter a value larger than ${s} ${this.timeUnit}`:"",this.errorText&&this.custom_error_message&&(this.secondaryErrorText=this.custom_error_message)}}updateSelectedRange(t){this.timeUnit=t.unit,this.timeValue=t.value,this.selectedTime=t}getRelativeDate(){if("object"==typeof this.selectedTime)return l.getRelativeDateRange(this.selectedTime)}clearSelection(){"object"==typeof this.initial_selected_time?(this.timeValue=this.initial_selected_time.value,this.timeUnit=this.initial_selected_time.unit):(this.timeValue=null,this.timeUnit=o.ALL)}atuiCancel;atuiSubmit;handleCancel(){this.atuiCancel.emit()}handleSubmit(){""===this.errorText&&this.atuiSubmit.emit(this.selectedTime)}handleSelectChange(t){const e=this.translations.ATUI.TIME,s=t.detail;this.timeUnit=this.translations?Object.keys(e).find((t=>e[t]===s)):s}render(){return i("div",{key:"3038a6be54ffc76987d6777d225e0135080b96c7",class:"w-panel-sm flex flex-col gap-16 border border-gray-300",onKeyUp:t=>("Enter"===t.key||" "===t.key)&&this.handleSubmit(),tabindex:0},i("div",{key:"167eb62ffc976625628e4b3242a1fec95269ccae",class:"flex flex-col gap-8 p-12"},i("h5",{key:"52269681fe5a970ae4634a1b9c39367f738251f4",class:"text-h5 text-dark font-medium"},this.translations.ATUI.TIME.SELECT_RELATIVE_TIME),i("div",{key:"a7d9a7732fac82e397534382b372660bcda7edfc",class:"flex flex-col gap-8"},i("at-input-numeric",{key:"10d37ffe1c879913748bfe0008016d6589533267",value:this.timeValue,onAtuiChange:t=>this.timeValue=t.detail}),i("at-select",{key:"977321ef569719d92761c11ad7ed2f7daf6bff7a",class:"flex-fill",value:this.translations.ATUI.TIME[this.timeUnit],options:this.dropdownOptions?this.dropdownOptions.map((t=>this.translations.ATUI.TIME[t])):null,onAtuiChange:t=>this.handleSelectChange(t)})),this.errorText?i(a,null,i("span",{class:"text-error text-sm","data-name":"time-with-unit-error"},this.errorText),this.secondaryErrorText&&i("span",{class:"text-error text-sm","data-name":"time-with-unit-error-secondary"},this.secondaryErrorText)):this.selectedTime!==c.ALL?this.timeValue&&this.selectedTime?.unit&&i("span",{class:"text-med text-sm font-normal"},this.startDate.toLocaleString()," ⁠— NOW"):this.selectedTime===c.ALL&&i("span",{class:"text-med text-sm font-normal"},this.translations.ATUI.TIME.ALL_TIME_LABEL)),this.common_options&&i("div",{key:"ae11f9148542a189a7ffde1d3d2c9bb236c42980",class:"flex flex-col gap-8 px-12"},i("h5",{key:"ec01b35b44d8c8f7f6573cdb3008e615fa0be29d",class:"text-h5 text-dark font-medium"},this.translations.ATUI.TIME.COMMONLY_USED),i("div",{key:"26fc080b033e38c84adff09aa8f38b112240ff19",class:"columns-2","data-name":"time-with-unit-common-options"},this.common_options&&this.common_options.map((t=>i("div",{onClick:()=>this.updateSelectedRange(t),onKeyDown:e=>{e.stopPropagation(),"Enter"!==e.key&&" "!==e.key||this.updateSelectedRange(t)},tabindex:0,class:(this.selectedTime!==c.ALL&&this.selectedTime?.value===t.value&&this.selectedTime?.unit===t.unit?"bg-active-light px-4":"")+" cursor-pointer"},i("small",null,this.translations.ATUI.TIME.LAST," ",t.value," ",this.translations.ATUI.TIME[t.unit])))))),i("footer",{key:"a66cd9dccb818113eb75b61cfe1fcbe5b20f486e",class:"flex justify-between p-8"},i("at-button",{key:"236fed9c8276314094b6eb224635dea543ee0d72",type:"secondaryOutline","data-name":"clear",label:this.translations.ATUI.RESET,onAtuiClick:()=>this.clearSelection()}),i("div",{key:"d4311f2b505f4fc08065325739741f3ec2abdac8",class:"flex gap-8"},i("at-button",{key:"cd2dbb4695fd2e780524abd6d4430bbdfb524806",type:"secondaryOutline","data-name":"cancel",label:this.translations.ATUI.CANCEL,onAtuiClick:()=>this.handleCancel()}),i("at-button",{key:"86d0b6db7d0e722e641c76caa8fdab1a0138b73a","data-name":"apply",label:this.translations.ATUI.APPLY,onAtuiClick:()=>this.handleSubmit()}))))}static get watchers(){return{timeValue:[{watchTimeValue:0}],timeUnit:[{watchTimeUnit:0}]}}},[512,"at-time-with-unit",{units:[16],common_options:[16],min_date:[16],min_seconds:[2],max_seconds:[2],initial_selected_time:[1],custom_error_message:[8],show_all_time:[4],errorText:[32],secondaryErrorText:[32],translations:[32],dropdownOptions:[32],timeValue:[32],timeUnit:[32],selectedTime:[32],startDate:[32]},void 0,{timeValue:[{watchTimeValue:0}],timeUnit:[{watchTimeUnit:0}]}]);function w(){"undefined"!=typeof customElements&&["at-time-with-unit","at-button","at-form-label","at-input-numeric","at-loading","at-menu","at-select","at-select-group","at-select-option","at-tooltip"].forEach((t=>{switch(t){case"at-time-with-unit":customElements.get(n(t))||customElements.define(n(t),k);break;case"at-button":customElements.get(n(t))||m();break;case"at-form-label":customElements.get(n(t))||r();break;case"at-input-numeric":customElements.get(n(t))||d();break;case"at-loading":customElements.get(n(t))||u();break;case"at-menu":customElements.get(n(t))||f();break;case"at-select":customElements.get(n(t))||p();break;case"at-select-group":customElements.get(n(t))||b();break;case"at-select-option":customElements.get(n(t))||x();break;case"at-tooltip":customElements.get(n(t))||y()}}))}export{k as A,w as d}