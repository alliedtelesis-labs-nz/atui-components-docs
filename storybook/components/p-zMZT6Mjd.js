import{p as t,H as e,d as s,h as a,c as i,t as o}from"./p-CGooRokE.js";import{f as n}from"./p-DuLooPsr.js";import{c as d}from"./p-COG8_R0C.js";import{d as r}from"./p-Di0GDcCy.js";import{d as l}from"./p-Cyh6UBB-.js";import{d as c}from"./p-COVJfV1p.js";import{d as h}from"./p-DzzrYA4J.js";const f=d("relative flex flex-col items-end gap-2 rounded-lg border border-solid p-8 transition-[background-color,color,box-shadow] duration-300 ease-in-out",{variants:{invalid:{true:"border-destructive focus-within:border-destructive focus-within:ring-destructive/30 focus-within:ring-2",false:"border-med focus-within:border-active-foreground focus-within:ring-active-foreground/30 focus-within:ring-2"},disabled:{true:"bg-surface-1 pointer-events-none",false:"bg-white"}},compoundVariants:[{disabled:!0,class:"focus-within:ring-0"}],defaultVariants:{invalid:!1,disabled:!1}}),b=d("text-body text-dark w-full resize-none border-none bg-transparent break-words whitespace-pre-wrap shadow-none outline-none focus-visible:ring-0 focus-visible:ring-offset-0",{variants:{invalid:{true:"border-destructive-foreground",false:"border-med"},disabled:{true:"bg-surface-1 pointer-events-none",false:"bg-disableD-LIGHT"}},defaultVariants:{invalid:!1,disabled:!1}}),u=t(class extends e{constructor(t){super(),!1!==t&&this.__registerHost(),this.atChange=s(this,"atChange",7),this.atSubmit=s(this,"atSubmit",7),this.atStop=s(this,"atStop",7),this.atFocus=s(this,"atFocus",7)}label;hint_text;info_text;error_text;placeholder="Enter your message...";max_height=240;max_length=2e3;in_progress=!1;value="";disabled=!1;textareaEl;translations;invalid=!1;get el(){return this}atChange;atSubmit;atStop;atFocus;inputId=`prompt-input-${Math.random().toString(36).substring(2,11)}`;async componentWillLoad(){this.translations=await n(this.el)}focusInput(){this.textareaEl&&(this.textareaEl.focus(),this.atFocus.emit())}handleInput(t){t.stopPropagation(),this.value=t.target.value,this.invalid=!!(this.max_length&&this.value.length>this.max_length),this.atChange.emit(this.value),this.autoResize()}autoResize(){if(this.textareaEl){this.textareaEl.style.height="auto";const t=Math.max(44,Math.min(this.textareaEl.scrollHeight,this.max_height));this.textareaEl.style.height=`${t}px`}}componentDidLoad(){setTimeout((()=>{this.autoResize()}),0)}handleKeyDown(t){"Enter"!==t.key||t.shiftKey||(t.preventDefault(),this.sendMessage())}sendMessage(){this.in_progress?this.atStop.emit():this.value&&""!==this.value.trim()&&!this.invalid&&(this.atSubmit.emit(this.value.trim()),this.value="",this.invalid=!1,setTimeout((()=>{this.autoResize(),this.focusInput()}),0))}render(){const t=!this.disabled&&!this.invalid&&(this.in_progress||this.value&&""!==this.value.trim()),e=f({invalid:this.invalid,disabled:this.disabled}),s=b({invalid:this.invalid,disabled:this.disabled});return a(i,{key:"848d1bd2757d67fd580fc8a206b98ab9fa006db5",id:this.inputId+"-container",class:"w-full px-16"},a("div",{key:"151a89e04c76b9eef039355a8a0ee647806586de",class:"flex flex-col"},a("slot",{key:"17998e19238badfd3605581b13306b2d2fa7d825",name:"label"}),(this.label||this.info_text)&&a("at-form-label",{key:"2d4e95b0093e53c56b9b4859e749496aa9cacd74",label:this.label,for:this.inputId,info_text:this.info_text,"data-name":"prompt-input-label"}),this.hint_text&&a("span",{key:"d9df4341d86b039a1c072a47fda206d77212d59c",class:"text-light mb-8 inline-block text-xs leading-tight","data-name":"prompt-input-hint"},this.hint_text)),a("div",{key:"00f93cbcf36190ddbf745178de3e88b6cf4fbd12",class:e},a("textarea",{key:"2a8ef9072ee3192d7c3e8f60db04a439d33a2377",class:s,disabled:this.disabled,id:this.inputId,placeholder:this.placeholder,onInput:t=>this.handleInput(t),onKeyDown:t=>this.handleKeyDown(t),value:this.value,ref:t=>this.textareaEl=t,style:{minHeight:"44px",maxHeight:this.max_height+"px",overflow:"auto"},"data-name":"prompt-input"}),a("div",{key:"a4ca856b7c1f89138f603d610afab453d85e48bf",class:"flex w-full items-center justify-between gap-1"},a("div",{key:"544091336e44740aa6a657daadf40c53be8cfa6a",class:"flex items-center gap-4"},a("slot",{key:"62b37c3d74007176ff5e92c670bce68abe505cad",name:"actions-left"})),a("div",{key:"d55f1f714b33a2e0a7a0ca89df74a2b874245cf8",class:"flex items-center gap-4 self-end"},a("slot",{key:"64acfccdbdaed1ca05b4db2dce3460167ea891d2",name:"actions-right"}),a("at-button",{key:"90bf22522f16ba6be9da1f174d1c02c360307221",class:"rounded-lg",size:"sm",type:"secondary",icon:this.in_progress?"stop":"arrow_upward",disabled:!t,onClick:()=>this.sendMessage(),onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||this.sendMessage()},"data-name":"prompt-send-button"})))),a("slot",{key:"ffdc63f989c359fcb418c4c0410b7761cef2990b",name:"footer"}),this.invalid&&a("span",{key:"c00825cf72593f16e3bb9a07baf3a0b0d08ef252",class:"text-error-dark text-xs","data-name":"error-text"},this.error_text?this.error_text:this.translations.ATUI.PROMPT.ERROR_MESSAGE))}},[772,"at-prompt-input",{label:[1],hint_text:[1],info_text:[1],error_text:[1],placeholder:[1],max_height:[2],max_length:[2],in_progress:[4],value:[1025],disabled:[4],textareaEl:[32],translations:[32],invalid:[32]}]);function p(){"undefined"!=typeof customElements&&["at-prompt-input","at-button","at-form-label","at-loading","at-tooltip"].forEach((t=>{switch(t){case"at-prompt-input":customElements.get(o(t))||customElements.define(o(t),u);break;case"at-button":customElements.get(o(t))||r();break;case"at-form-label":customElements.get(o(t))||l();break;case"at-loading":customElements.get(o(t))||c();break;case"at-tooltip":customElements.get(o(t))||h()}}))}export{u as A,p as d}