import{p as t,H as e,d as s,h as i,F as a,t as n}from"./p-Ban0-WTF.js";import{b as o,T as c}from"./p-Bhh1cB9X.js";import{T as l}from"./p-C3LwY5aR.js";import{f as h}from"./p-DuLooPsr.js";import{d as m}from"./p-CLTY0v5p.js";import{d as r}from"./p-CricFCQ3.js";import{d}from"./p-DrCCERTW.js";import{d as u}from"./p-DWwNuYx9.js";import{d as p}from"./p-DnA3zFMU.js";import{d as f}from"./p-Dgs0gC4Y.js";import{d as b}from"./p-BC_lJAkx.js";import{d as x}from"./p-DszB-XY6.js";const y=t(class extends e{constructor(t){super(),!1!==t&&this.__registerHost(),this.atuiCancel=s(this,"atuiCancel",7),this.atuiSubmit=s(this,"atuiSubmit",7)}units;common_options;min_date=null;min_seconds=60;max_seconds=Number.MAX_SAFE_INTEGER;initial_selected_time;custom_error_message=null;show_all_time=!1;errorText="";secondaryErrorText="";translations;dropdownOptions;timeValue;watchTimeValue(){this.updateSelectedTime(this.timeValue)}timeUnit;watchTimeUnit(){this.updateSelectedTime(this.timeValue)}selectedTime;startDate;get el(){return this}async componentWillLoad(){this.translations=await h(this.el)}componentWillRender(){this.selectedTime||(this.initSelectedTime(this.initial_selected_time),this.initDropdownOptions())}initDropdownOptions(){this.dropdownOptions=this.show_all_time?[o.ALL,...this.units]:this.units}initSelectedTime(t){const e="object"==typeof t?c.getCurrentOrDefaultUnit(t.unit,this.units):o.ALL,s="object"==typeof t?t.value:null;this.timeUnit=e,this.timeValue=s,this.selectedTime=t,this.startDate=this.getRelativeDate()?.startDate}updateSelectedTime(t){const e=this.timeUnit;e!==o.ALL?this.selectedTime={unit:e,value:t}:(this.selectedTime=l.ALL,this.timeValue&&(this.timeValue=null)),this.validateInput(),this.startDate=this.getRelativeDate()?.startDate}validateInput(){if(this.selectedTime!==l.ALL){const t=this.min_date?c.getSecondsAgoFromDate(this.min_date):this.max_seconds,e=c.convertSecondsToUnit(t,this.timeUnit,0,!0),s=c.convertSecondsToUnit(this.min_seconds,this.timeUnit,0,!1);this.errorText=this.timeValue>e?this.translations?this.translations.ATUI.TIME.VALIDATION.MAX_NUMBER.replace("{lowerThanValue}",`${e+1} ${this.timeUnit}`):`Please enter a value lower than ${e} ${this.timeUnit}`:this.timeValue<s?this.translations?this.translations.ATUI.TIME.VALIDATION.MIN_NUMBER.replace("{min}",`${e} ${this.timeUnit}`):`Please enter a value larger than ${s} ${this.timeUnit}`:"",this.errorText&&this.custom_error_message&&(this.secondaryErrorText=this.custom_error_message)}}updateSelectedRange(t){this.timeUnit=t.unit,this.timeValue=t.value,this.selectedTime=t}getRelativeDate(){if("object"==typeof this.selectedTime)return c.getRelativeDateRange(this.selectedTime)}clearSelection(){"object"==typeof this.initial_selected_time?(this.timeValue=this.initial_selected_time.value,this.timeUnit=this.initial_selected_time.unit):(this.timeValue=null,this.timeUnit=o.ALL)}atuiCancel;atuiSubmit;handleCancel(){this.atuiCancel.emit()}handleSubmit(){""===this.errorText&&this.atuiSubmit.emit(this.selectedTime)}handleSelectChange(t){const e=this.translations.ATUI.TIME,s=t.detail;this.timeUnit=this.translations?Object.keys(e).find((t=>e[t]===s)):s}render(){return i("div",{key:"9efecb9aee87abac33a2a49e109e6f0e80eabb9d",class:"w-panel-sm flex flex-col gap-16 border border-gray-300",onKeyUp:t=>("Enter"===t.key||" "===t.key)&&this.handleSubmit(),tabindex:0},i("div",{key:"9c295b4eca30248474268523aad8b988c0bc5f05",class:"flex flex-col gap-8 p-12"},i("h5",{key:"7c13846c58133ee8df4be7c602a1d10d8e01c5cc",class:"text-h5 text-dark font-medium"},this.translations.ATUI.TIME.SELECT_RELATIVE_TIME),i("div",{key:"afc088dbab93ca26715ea55c5e4a38fe2adcb93e",class:"flex flex-col gap-8"},i("at-input-numeric",{key:"5803d89122b10e00f79fe0788a39cf9d61b90faa",value:this.timeValue,onAtuiChange:t=>this.timeValue=t.detail}),i("at-select",{key:"351ea321e79da232aba9bc2f6a8ae97c3610b064",class:"flex-fill",value:this.translations.ATUI.TIME[this.timeUnit],options:this.dropdownOptions?this.dropdownOptions.map((t=>this.translations.ATUI.TIME[t])):null,onAtuiChange:t=>this.handleSelectChange(t)})),this.errorText?i(a,null,i("span",{class:"text-error text-sm","data-name":"time-with-unit-error"},this.errorText),this.secondaryErrorText&&i("span",{class:"text-error text-sm","data-name":"time-with-unit-error-secondary"},this.secondaryErrorText)):this.selectedTime!==l.ALL?this.timeValue&&this.selectedTime?.unit&&i("span",{class:"text-med text-sm font-normal"},this.startDate.toLocaleString()," ⁠— NOW"):this.selectedTime===l.ALL&&i("span",{class:"text-med text-sm font-normal"},this.translations.ATUI.TIME.ALL_TIME_LABEL)),this.common_options&&i("div",{key:"218c748bbd4bdf9d70e6de34a5e95128d338011c",class:"flex flex-col gap-8 px-12"},i("h5",{key:"af5c2630f32fcd626e6fda7589c87aa99a83681c",class:"text-h5 text-dark font-medium"},this.translations.ATUI.TIME.COMMONLY_USED),i("div",{key:"ae95bda23ae5fa2d4e050dcdaa09654a3b3153e4",class:"columns-2","data-name":"time-with-unit-common-options"},this.common_options&&this.common_options.map((t=>i("div",{onClick:()=>this.updateSelectedRange(t),onKeyDown:e=>{e.stopPropagation(),"Enter"!==e.key&&" "!==e.key||this.updateSelectedRange(t)},tabindex:0,class:(this.selectedTime!==l.ALL&&this.selectedTime?.value===t.value&&this.selectedTime?.unit===t.unit?"bg-active-light px-4":"")+" cursor-pointer"},i("small",null,this.translations.ATUI.TIME.LAST," ",t.value," ",this.translations.ATUI.TIME[t.unit])))))),i("footer",{key:"22e28aeb9b4862e5b62a315ecca173492b58eb2e",class:"flex justify-between p-8"},i("at-button",{key:"4691f44757526c63dbcbe780ffa3e975c8ef41bd",type:"secondaryOutline","data-name":"clear",label:this.translations.ATUI.RESET,onAtuiClick:()=>this.clearSelection()}),i("div",{key:"33daa228f57c32f170bf0a4826c8f219c9d6719e",class:"flex gap-8"},i("at-button",{key:"d6700cfd1b1fb5d2a4cb6ee56d3b2d7239fa6b7f",type:"secondaryOutline","data-name":"cancel",label:this.translations.ATUI.CANCEL,onAtuiClick:()=>this.handleCancel()}),i("at-button",{key:"08df792fddde0fa2e238db977c9466b736d3a418","data-name":"apply",label:this.translations.ATUI.APPLY,onAtuiClick:()=>this.handleSubmit()}))))}static get watchers(){return{timeValue:[{watchTimeValue:0}],timeUnit:[{watchTimeUnit:0}]}}},[512,"at-time-with-unit",{units:[16],common_options:[16],min_date:[16],min_seconds:[2],max_seconds:[2],initial_selected_time:[1],custom_error_message:[8],show_all_time:[4],errorText:[32],secondaryErrorText:[32],translations:[32],dropdownOptions:[32],timeValue:[32],timeUnit:[32],selectedTime:[32],startDate:[32]},void 0,{timeValue:[{watchTimeValue:0}],timeUnit:[{watchTimeUnit:0}]}]);function k(){"undefined"!=typeof customElements&&["at-time-with-unit","at-button","at-form-label","at-input-numeric","at-loading","at-menu","at-select","at-select-option","at-tooltip"].forEach((t=>{switch(t){case"at-time-with-unit":customElements.get(n(t))||customElements.define(n(t),y);break;case"at-button":customElements.get(n(t))||m();break;case"at-form-label":customElements.get(n(t))||r();break;case"at-input-numeric":customElements.get(n(t))||d();break;case"at-loading":customElements.get(n(t))||u();break;case"at-menu":customElements.get(n(t))||p();break;case"at-select":customElements.get(n(t))||f();break;case"at-select-option":customElements.get(n(t))||b();break;case"at-tooltip":customElements.get(n(t))||x()}}))}export{y as A,k as d}