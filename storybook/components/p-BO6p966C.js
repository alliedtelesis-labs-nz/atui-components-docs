const t=Math.min,n=Math.max,e=Math.round,o=Math.floor,r=t=>({x:t,y:t}),i={left:"right",right:"left",bottom:"top",top:"bottom"},c={start:"end",end:"start"};function l(e,o,r){return n(e,t(o,r))}function a(t,n){return"function"==typeof t?t(n):t}function s(t){return t.split("-")[0]}function u(t){return t.split("-")[1]}function f(t){return"x"===t?"y":"x"}function d(t){return"y"===t?"height":"width"}const m=new Set(["top","bottom"]);function y(t){return m.has(s(t))?"y":"x"}function h(t){return f(y(t))}function p(t){return t.replace(/start|end/g,(t=>c[t]))}const w=["left","right"],g=["right","left"],x=["top","bottom"],v=["bottom","top"];function b(t){return t.replace(/left|right|bottom|top/g,(t=>i[t]))}function A(t){const{x:n,y:e,width:o,height:r}=t;return{width:o,height:r,top:e,left:n,right:n+o,bottom:e+r,x:n,y:e}}function S(t,n,e){let{reference:o,floating:r}=t;const i=y(n),c=h(n),l=d(c),a=s(n),f="y"===i,m=o.x+o.width/2-r.width/2,p=o.y+o.height/2-r.height/2,w=o[l]/2-r[l]/2;let g;switch(a){case"top":g={x:m,y:o.y-r.height};break;case"bottom":g={x:m,y:o.y+o.height};break;case"right":g={x:o.x+o.width,y:p};break;case"left":g={x:o.x-r.width,y:p};break;default:g={x:o.x,y:o.y}}switch(u(n)){case"start":g[c]-=w*(e&&f?-1:1);break;case"end":g[c]+=w*(e&&f?-1:1)}return g}async function R(t,n){var e;void 0===n&&(n={});const{x:o,y:r,platform:i,rects:c,elements:l,strategy:s}=t,{boundary:u="clippingAncestors",rootBoundary:f="viewport",elementContext:d="floating",altBoundary:m=!1,padding:y=0}=a(n,t),h=function(t){return"number"!=typeof t?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(t):{top:t,right:t,bottom:t,left:t}}(y),p=l[m?"floating"===d?"reference":"floating":d],w=A(await i.getClippingRect({element:null==(e=await(null==i.isElement?void 0:i.isElement(p)))||e?p:p.contextElement||await(null==i.getDocumentElement?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:f,strategy:s})),g="floating"===d?{x:o,y:r,width:c.floating.width,height:c.floating.height}:c.reference,x=await(null==i.getOffsetParent?void 0:i.getOffsetParent(l.floating)),v=await(null==i.isElement?void 0:i.isElement(x))&&await(null==i.getScale?void 0:i.getScale(x))||{x:1,y:1},b=A(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:g,offsetParent:x,strategy:s}):g);return{top:(w.top-b.top+h.top)/v.y,bottom:(b.bottom-w.bottom+h.bottom)/v.y,left:(w.left-b.left+h.left)/v.x,right:(b.right-w.right+h.right)/v.x}}const F=new Set(["left","top"]);function k(){return"undefined"!=typeof window}function C(t){return O(t)?(t.nodeName||"").toLowerCase():"#document"}function T(t){var n;return(null==t||null==(n=t.ownerDocument)?void 0:n.defaultView)||window}function M(t){var n;return null==(n=(O(t)?t.ownerDocument:t.document)||window.document)?void 0:n.documentElement}function O(t){return!!k()&&(t instanceof Node||t instanceof T(t).Node)}function P(t){return!!k()&&(t instanceof Element||t instanceof T(t).Element)}function z(t){return!!k()&&(t instanceof HTMLElement||t instanceof T(t).HTMLElement)}function D(t){return!(!k()||"undefined"==typeof ShadowRoot)&&(t instanceof ShadowRoot||t instanceof T(t).ShadowRoot)}const L=new Set(["inline","contents"]);function B(t){const{overflow:n,overflowX:e,overflowY:o,display:r}=_(t);return/auto|scroll|overlay|hidden|clip/.test(n+o+e)&&!L.has(r)}const E=new Set(["table","td","th"]);function I(t){return E.has(C(t))}const N=[":popover-open",":modal"];function j(t){return N.some((n=>{try{return t.matches(n)}catch(t){return!1}}))}const q=["transform","translate","scale","rotate","perspective"],H=["transform","translate","scale","rotate","perspective","filter"],$=["paint","layout","strict","content"];function V(t){const n=W(),e=P(t)?_(t):t;return q.some((t=>!!e[t]&&"none"!==e[t]))||!!e.containerType&&"normal"!==e.containerType||!n&&!!e.backdropFilter&&"none"!==e.backdropFilter||!n&&!!e.filter&&"none"!==e.filter||H.some((t=>(e.willChange||"").includes(t)))||$.some((t=>(e.contain||"").includes(t)))}function W(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}const X=new Set(["html","body","#document"]);function Y(t){return X.has(C(t))}function _(t){return T(t).getComputedStyle(t)}function G(t){return P(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function J(t){if("html"===C(t))return t;const n=t.assignedSlot||t.parentNode||D(t)&&t.host||M(t);return D(n)?n.host:n}function K(t){const n=J(t);return Y(n)?t.ownerDocument?t.ownerDocument.body:t.body:z(n)&&B(n)?n:K(n)}function Q(t,n,e){var o;void 0===n&&(n=[]),void 0===e&&(e=!0);const r=K(t),i=r===(null==(o=t.ownerDocument)?void 0:o.body),c=T(r);if(i){const t=U(c);return n.concat(c,c.visualViewport||[],B(r)?r:[],t&&e?Q(t):[])}return n.concat(r,Q(r,[],e))}function U(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Z(t){const n=_(t);let o=parseFloat(n.width)||0,r=parseFloat(n.height)||0;const i=z(t),c=i?t.offsetWidth:o,l=i?t.offsetHeight:r,a=e(o)!==c||e(r)!==l;return a&&(o=c,r=l),{width:o,height:r,$:a}}function tt(t){return P(t)?t:t.contextElement}function nt(t){const n=tt(t);if(!z(n))return r(1);const o=n.getBoundingClientRect(),{width:i,height:c,$:l}=Z(n);let a=(l?e(o.width):o.width)/i,s=(l?e(o.height):o.height)/c;return a&&Number.isFinite(a)||(a=1),s&&Number.isFinite(s)||(s=1),{x:a,y:s}}const et=r(0);function ot(t){const n=T(t);return W()&&n.visualViewport?{x:n.visualViewport.offsetLeft,y:n.visualViewport.offsetTop}:et}function rt(t,n,e,o){void 0===n&&(n=!1),void 0===e&&(e=!1);const i=t.getBoundingClientRect(),c=tt(t);let l=r(1);n&&(o?P(o)&&(l=nt(o)):l=nt(t));const a=function(t,n,e){return void 0===n&&(n=!1),!(!e||n&&e!==T(t))&&n}(c,e,o)?ot(c):r(0);let s=(i.left+a.x)/l.x,u=(i.top+a.y)/l.y,f=i.width/l.x,d=i.height/l.y;if(c){const t=T(c),n=o&&P(o)?T(o):o;let e=t,r=U(e);for(;r&&o&&n!==e;){const t=nt(r),n=r.getBoundingClientRect(),o=_(r),i=n.left+(r.clientLeft+parseFloat(o.paddingLeft))*t.x,c=n.top+(r.clientTop+parseFloat(o.paddingTop))*t.y;s*=t.x,u*=t.y,f*=t.x,d*=t.y,s+=i,u+=c,e=T(r),r=U(e)}}return A({width:f,height:d,x:s,y:u})}function it(t,n){const e=G(t).scrollLeft;return n?n.left+e:rt(M(t)).left+e}function ct(t,n){const e=t.getBoundingClientRect();return{x:e.left+n.scrollLeft-it(t,e),y:e.top+n.scrollTop}}const lt=new Set(["absolute","fixed"]);function at(t,e,o){let i;if("viewport"===e)i=function(t,n){const e=T(t),o=M(t),r=e.visualViewport;let i=o.clientWidth,c=o.clientHeight,l=0,a=0;if(r){i=r.width,c=r.height;const t=W();(!t||t&&"fixed"===n)&&(l=r.offsetLeft,a=r.offsetTop)}const s=it(o);if(s<=0){const t=o.ownerDocument,n=t.body,e=getComputedStyle(n),r="CSS1Compat"===t.compatMode&&parseFloat(e.marginLeft)+parseFloat(e.marginRight)||0,c=Math.abs(o.clientWidth-n.clientWidth-r);c<=25&&(i-=c)}else s<=25&&(i+=s);return{width:i,height:c,x:l,y:a}}(t,o);else if("document"===e)i=function(t){const e=M(t),o=G(t),r=t.ownerDocument.body,i=n(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),c=n(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let l=-o.scrollLeft+it(t);const a=-o.scrollTop;return"rtl"===_(r).direction&&(l+=n(e.clientWidth,r.clientWidth)-i),{width:i,height:c,x:l,y:a}}(M(t));else if(P(e))i=function(t,n){const e=rt(t,!0,"fixed"===n),o=e.top+t.clientTop,i=e.left+t.clientLeft,c=z(t)?nt(t):r(1);return{width:t.clientWidth*c.x,height:t.clientHeight*c.y,x:i*c.x,y:o*c.y}}(e,o);else{const n=ot(t);i={x:e.x-n.x,y:e.y-n.y,width:e.width,height:e.height}}return A(i)}function st(t,n){const e=J(t);return!(e===n||!P(e)||Y(e))&&("fixed"===_(e).position||st(e,n))}function ut(t,n,e){const o=z(n),i=M(n),c="fixed"===e,l=rt(t,!0,c,n);let a={scrollLeft:0,scrollTop:0};const s=r(0);function u(){s.x=it(i)}if(o||!o&&!c)if(("body"!==C(n)||B(i))&&(a=G(n)),o){const t=rt(n,!0,c,n);s.x=t.x+n.clientLeft,s.y=t.y+n.clientTop}else i&&u();c&&!o&&i&&u();const f=!i||o||c?r(0):ct(i,a);return{x:l.left+a.scrollLeft-s.x-f.x,y:l.top+a.scrollTop-s.y-f.y,width:l.width,height:l.height}}function ft(t){return"static"===_(t).position}function dt(t,n){if(!z(t)||"fixed"===_(t).position)return null;if(n)return n(t);let e=t.offsetParent;return M(t)===e&&(e=e.ownerDocument.body),e}function mt(t,n){const e=T(t);if(j(t))return e;if(!z(t)){let n=J(t);for(;n&&!Y(n);){if(P(n)&&!ft(n))return n;n=J(n)}return e}let o=dt(t,n);for(;o&&I(o)&&ft(o);)o=dt(o,n);return o&&Y(o)&&ft(o)&&!V(o)?e:o||function(t){let n=J(t);for(;z(n)&&!Y(n);){if(V(n))return n;if(j(n))return null;n=J(n)}return null}(t)||e}const yt={convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{elements:n,rect:e,offsetParent:o,strategy:i}=t;const c="fixed"===i,l=M(o),a=!!n&&j(n.floating);if(o===l||a&&c)return e;let s={scrollLeft:0,scrollTop:0},u=r(1);const f=r(0),d=z(o);if((d||!d&&!c)&&(("body"!==C(o)||B(l))&&(s=G(o)),z(o))){const t=rt(o);u=nt(o),f.x=t.x+o.clientLeft,f.y=t.y+o.clientTop}const m=!l||d||c?r(0):ct(l,s);return{width:e.width*u.x,height:e.height*u.y,x:e.x*u.x-s.scrollLeft*u.x+f.x+m.x,y:e.y*u.y-s.scrollTop*u.y+f.y+m.y}},getDocumentElement:M,getClippingRect:function(e){let{element:o,boundary:r,rootBoundary:i,strategy:c}=e;const l=[..."clippingAncestors"===r?j(o)?[]:function(t,n){const e=n.get(t);if(e)return e;let o=Q(t,[],!1).filter((t=>P(t)&&"body"!==C(t))),r=null;const i="fixed"===_(t).position;let c=i?J(t):t;for(;P(c)&&!Y(c);){const n=_(c),e=V(c);e||"fixed"!==n.position||(r=null),(i?!e&&!r:!e&&"static"===n.position&&r&&lt.has(r.position)||B(c)&&!e&&st(t,c))?o=o.filter((t=>t!==c)):r=n,c=J(c)}return n.set(t,o),o}(o,this._c):[].concat(r),i],a=l.reduce(((e,r)=>{const i=at(o,r,c);return e.top=n(i.top,e.top),e.right=t(i.right,e.right),e.bottom=t(i.bottom,e.bottom),e.left=n(i.left,e.left),e}),at(o,l[0],c));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},getOffsetParent:mt,getElementRects:async function(t){const n=this.getOffsetParent||mt,e=this.getDimensions,o=await e(t.floating);return{reference:ut(t.reference,await n(t.floating),t.strategy),floating:{x:0,y:0,width:o.width,height:o.height}}},getClientRects:function(t){return Array.from(t.getClientRects())},getDimensions:function(t){const{width:n,height:e}=Z(t);return{width:n,height:e}},getScale:nt,isElement:P,isRTL:function(t){return"rtl"===_(t).direction}};function ht(t,n){return t.x===n.x&&t.y===n.y&&t.width===n.width&&t.height===n.height}function pt(e,r,i,c){void 0===c&&(c={});const{ancestorScroll:l=!0,ancestorResize:a=!0,elementResize:s="function"==typeof ResizeObserver,layoutShift:u="function"==typeof IntersectionObserver,animationFrame:f=!1}=c,d=tt(e),m=l||a?[...d?Q(d):[],...Q(r)]:[];m.forEach((t=>{l&&t.addEventListener("scroll",i,{passive:!0}),a&&t.addEventListener("resize",i)}));const y=d&&u?function(e,r){let i,c=null;const l=M(e);function a(){var t;clearTimeout(i),null==(t=c)||t.disconnect(),c=null}return function s(u,f){void 0===u&&(u=!1),void 0===f&&(f=1),a();const d=e.getBoundingClientRect(),{left:m,top:y,width:h,height:p}=d;if(u||r(),!h||!p)return;const w={rootMargin:-o(y)+"px "+-o(l.clientWidth-(m+h))+"px "+-o(l.clientHeight-(y+p))+"px "+-o(m)+"px",threshold:n(0,t(1,f))||1};let g=!0;function x(t){const n=t[0].intersectionRatio;if(n!==f){if(!g)return s();n?s(!1,n):i=setTimeout((()=>{s(!1,1e-7)}),1e3)}1!==n||ht(d,e.getBoundingClientRect())||s(),g=!1}try{c=new IntersectionObserver(x,{...w,root:l.ownerDocument})}catch(t){c=new IntersectionObserver(x,w)}c.observe(e)}(!0),a}(d,i):null;let h,p=-1,w=null;s&&(w=new ResizeObserver((t=>{let[n]=t;n&&n.target===d&&w&&(w.unobserve(r),cancelAnimationFrame(p),p=requestAnimationFrame((()=>{var t;null==(t=w)||t.observe(r)}))),i()})),d&&!f&&w.observe(d),w.observe(r));let g=f?rt(e):null;return f&&function t(){const n=rt(e);g&&!ht(g,n)&&i(),g=n,h=requestAnimationFrame(t)}(),i(),()=>{var t;m.forEach((t=>{l&&t.removeEventListener("scroll",i),a&&t.removeEventListener("resize",i)})),null==y||y(),null==(t=w)||t.disconnect(),w=null,f&&cancelAnimationFrame(h)}}const wt=function(t){return void 0===t&&(t=0),{name:"offset",options:t,async fn(n){var e,o;const{x:r,y:i,placement:c,middlewareData:l}=n,f=await async function(t,n){const{placement:e,platform:o,elements:r}=t,i=await(null==o.isRTL?void 0:o.isRTL(r.floating)),c=s(e),l=u(e),f="y"===y(e),d=F.has(c)?-1:1,m=i&&f?-1:1,h=a(n,t);let{mainAxis:p,crossAxis:w,alignmentAxis:g}="number"==typeof h?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&"number"==typeof g&&(w="end"===l?-1*g:g),f?{x:w*m,y:p*d}:{x:p*d,y:w*m}}(n,t);return c===(null==(e=l.offset)?void 0:e.placement)&&null!=(o=l.arrow)&&o.alignmentOffset?{}:{x:r+f.x,y:i+f.y,data:{...f,placement:c}}}}},gt=function(t){return void 0===t&&(t={}),{name:"shift",options:t,async fn(n){const{x:e,y:o,placement:r}=n,{mainAxis:i=!0,crossAxis:c=!1,limiter:u={fn:t=>{let{x:n,y:e}=t;return{x:n,y:e}}},...d}=a(t,n),m={x:e,y:o},h=await R(n,d),p=y(s(r)),w=f(p);let g=m[w],x=m[p];i&&(g=l(g+h["y"===w?"top":"left"],g,g-h["y"===w?"bottom":"right"])),c&&(x=l(x+h["y"===p?"top":"left"],x,x-h["y"===p?"bottom":"right"]));const v=u.fn({...n,[w]:g,[p]:x});return{...v,data:{x:v.x-e,y:v.y-o,enabled:{[w]:i,[p]:c}}}}}},xt=function(t){return void 0===t&&(t={}),{name:"flip",options:t,async fn(n){var e,o;const{placement:r,middlewareData:i,rects:c,initialPlacement:l,platform:f,elements:m}=n,{mainAxis:A=!0,crossAxis:S=!0,fallbackPlacements:F,fallbackStrategy:k="bestFit",fallbackAxisSideDirection:C="none",flipAlignment:T=!0,...M}=a(t,n);if(null!=(e=i.arrow)&&e.alignmentOffset)return{};const O=s(r),P=y(l),z=s(l)===l,D=await(null==f.isRTL?void 0:f.isRTL(m.floating)),L=F||(z||!T?[b(l)]:function(t){const n=b(t);return[p(t),n,p(n)]}(l)),B="none"!==C;!F&&B&&L.push(...function(t,n,e,o){const r=u(t);let i=function(t,n,e){switch(t){case"top":case"bottom":return e?n?g:w:n?w:g;case"left":case"right":return n?x:v;default:return[]}}(s(t),"start"===e,o);return r&&(i=i.map((t=>t+"-"+r)),n&&(i=i.concat(i.map(p)))),i}(l,T,C,D));const E=[l,...L],I=await R(n,M),N=[];let j=(null==(o=i.flip)?void 0:o.overflows)||[];if(A&&N.push(I[O]),S){const t=function(t,n,e){void 0===e&&(e=!1);const o=u(t),r=h(t),i=d(r);let c="x"===r?o===(e?"end":"start")?"right":"left":"start"===o?"bottom":"top";return n.reference[i]>n.floating[i]&&(c=b(c)),[c,b(c)]}(r,c,D);N.push(I[t[0]],I[t[1]])}if(j=[...j,{placement:r,overflows:N}],!N.every((t=>t<=0))){var q,H;const t=((null==(q=i.flip)?void 0:q.index)||0)+1,n=E[t];if(n&&("alignment"!==S||P===y(n)||j.every((t=>y(t.placement)!==P||t.overflows[0]>0))))return{data:{index:t,overflows:j},reset:{placement:n}};let e=null==(H=j.filter((t=>t.overflows[0]<=0)).sort(((t,n)=>t.overflows[1]-n.overflows[1]))[0])?void 0:H.placement;if(!e)switch(k){case"bestFit":{var $;const t=null==($=j.filter((t=>{if(B){const n=y(t.placement);return n===P||"y"===n}return!0})).map((t=>[t.placement,t.overflows.filter((t=>t>0)).reduce(((t,n)=>t+n),0)])).sort(((t,n)=>t[1]-n[1]))[0])?void 0:$[0];t&&(e=t);break}case"initialPlacement":e=l}if(r!==e)return{reset:{placement:e}}}return{}}}},vt=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(o){var r,i;const{placement:c,rects:l,platform:f,elements:d}=o,{apply:m=()=>{},...h}=a(e,o),p=await R(o,h),w=s(c),g=u(c),x="y"===y(c),{width:v,height:b}=l.floating;let A,S;"top"===w||"bottom"===w?(A=w,S=g===(await(null==f.isRTL?void 0:f.isRTL(d.floating))?"start":"end")?"left":"right"):(S=w,A="end"===g?"top":"bottom");const F=b-p.top-p.bottom,k=v-p.left-p.right;let C=t(b-p[A],F),T=t(v-p[S],k);if(null!=(r=o.middlewareData.shift)&&r.enabled.x&&(T=k),null!=(i=o.middlewareData.shift)&&i.enabled.y&&(C=F),!o.middlewareData.shift&&!g){const t=n(p.left,0),e=n(p.right,0),o=n(p.top,0),r=n(p.bottom,0);x?T=v-2*(0!==t||0!==e?t+e:n(p.left,p.right)):C=b-2*(0!==o||0!==r?o+r:n(p.top,p.bottom))}await m({...o,availableWidth:T,availableHeight:C});const M=await f.getDimensions(d.floating);return v!==M.width||b!==M.height?{reset:{rects:!0}}:{}}}},bt=(t,n,e)=>{const o=new Map,r={platform:yt,...e},i={...r.platform,_c:o};return(async(t,n,e)=>{const{placement:o="bottom",strategy:r="absolute",middleware:i=[],platform:c}=e,l=i.filter(Boolean),a=await(null==c.isRTL?void 0:c.isRTL(n));let s=await c.getElementRects({reference:t,floating:n,strategy:r}),{x:u,y:f}=S(s,o,a),d=o,m={},y=0;for(let e=0;e<l.length;e++){const{name:i,fn:h}=l[e],{x:p,y:w,data:g,reset:x}=await h({x:u,y:f,initialPlacement:o,placement:d,strategy:r,middlewareData:m,rects:s,platform:c,elements:{reference:t,floating:n}});u=null!=p?p:u,f=null!=w?w:f,m={...m,[i]:{...m[i],...g}},x&&y<=50&&(y++,"object"==typeof x&&(x.placement&&(d=x.placement),x.rects&&(s=!0===x.rects?await c.getElementRects({reference:t,floating:n,strategy:r}):x.rects),({x:u,y:f}=S(s,d,a))),e=-1)}return{x:u,y:f,placement:d,strategy:r,middlewareData:m}})(t,n,{...r,platform:i})};export{pt as a,vt as b,bt as c,xt as f,wt as o,gt as s}