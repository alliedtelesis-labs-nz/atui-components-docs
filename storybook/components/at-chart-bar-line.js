import{p as t,H as s,h as i,c as e,t as o}from"./p-CtWJ4BTZ.js";import{C as a,a as n,L as r,B as h,b as l,c as p,T as d,d as m,e as c,P as f,p as b,f as u,g as y,i as g,h as x}from"./p-7mQ_RyCI.js";import{T as _}from"./p-DqF-mRjp.js";const C={xs:"h-[70px]",sm:"h-[160px]",md:"h-[235px]",lg:"h-[330px]",xl:"h-[440px]",auto:"h-full"},D=t(class extends s{constructor(t){super(),!1!==t&&this.__registerHost()}type;data;x_axis_format;y_axis_format;options;tooltip_options;legend_format;thresholds;point_styles;time_range;height="md";canvasEl;config;color_palette=a.CATEGORICAL;async getConfig(){return this.config}initChart(){n.register(r,h,l,p,d,m,c,f,b,u,y,g);const t=x(this.color_palette);if(t&&this.applyPresetPalette(t),this.point_styles&&this.pointStylesSetup(),this.config={type:this.type,data:{labels:this.data.labels,datasets:[...this.data.datasets,...this.formatThresholds()]},options:{devicePixelRatio:2,maintainAspectRatio:!1,scales:{y:this.y_axis_format||{beginAtZero:!0,type:"linear",min:0},x:this.x_axis_format||{type:"time",time:{displayFormats:{day:"ddd",minute:"MMM D H:mm",hour:"MMM D H:mm"}},ticks:{font:{size:11},autoSkip:!0,align:"center",maxRotation:0,minRotation:0}}},...this.options,plugins:{tooltip:this.tooltip_options||{mode:"index",intersect:!1,position:"nearest",animation:{duration:150}},legend:this.legend_format||{labels:{boxWidth:8,boxHeight:8,fontSize:10,borderRadius:2},onHover:t=>{t.native&&(t.native.target.style.cursor="pointer")},display:!0}},clip:!1,elements:{line:{tension:0,borderWidth:2}}}},this.time_range){const t=this.getMinMaxDateStrings(this.time_range);this.config.options.scales.x.min=t.min,this.config.options.scales.x.max=t.max}new n(this.canvasEl,this.config),this.canvasEl.style.width="",this.canvasEl.style.height=""}componentDidUpdate(){this.data&&this.data.datasets.length&&this.initChart()}componentDidLoad(){this.data&&this.data.datasets.length&&this.initChart()}pointStylesSetup(){this.data.datasets=this.data.datasets.map((t=>({...t,...this.point_styles})))}applyPresetPalette(t){this.color_palette!==a.CUSTOM&&(this.data.datasets=this.data.datasets.map(((s,i)=>{const e=t[i%t.length];return{...s,backgroundColor:e,borderColor:e}})))}getMinMaxDateStrings(t){const s=t.selected,i=t.custom?_.getAbsoluteDateRange(t.custom):null,{startDate:e,endDate:o}=_.getDateRange(i,s,null);return{min:""+e,max:""+o}}formatThresholds=()=>{if(!this.thresholds)return[];const t=[];return this.thresholds.forEach((s=>{t.push({type:"line",label:s.label,borderColor:s.color,borderCapStyle:"butt",backgroundColor:"white",fill:!1,data:s.data,pointRadius:0,borderDash:s.dashLine?[6,3]:void 0,tension:0,stepped:s.stepped,order:1})})),t};render(){return i(e,{key:"358b305a734dae5cfb93c795c5f9c19ef8050ffd",style:{height:"100%",width:"100%"}},i("section",{key:"461a3374b720921668154255bb790867958bc3fe",class:"min-w-100 "+C[this.height]},i("canvas",{key:"780496e99a45bc176808ccb6869ed083b2e399fd",ref:t=>this.canvasEl=t})))}},[512,"at-chart-bar-line",{type:[1],data:[1040],x_axis_format:[16],y_axis_format:[16],options:[16],tooltip_options:[16],legend_format:[16],thresholds:[16],point_styles:[16],time_range:[8],height:[1],color_palette:[1],getConfig:[64]}]),M=D,R=function(){"undefined"!=typeof customElements&&["at-chart-bar-line"].forEach((t=>{"at-chart-bar-line"===t&&(customElements.get(o(t))||customElements.define(o(t),D))}))};export{M as AtChartBarLine,R as defineCustomElement}