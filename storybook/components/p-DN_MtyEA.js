import{p as t,H as e,d as s,h as i,F as a,t as o}from"./p-CGooRokE.js";import{b as n,T as c}from"./p-B3Y_DZ8s.js";import{T as l}from"./p-C3LwY5aR.js";import{f as h}from"./p-DuLooPsr.js";import{d as m}from"./p-Di0GDcCy.js";import{d as r}from"./p-Cyh6UBB-.js";import{d}from"./p-Zx2yDCJc.js";import{d as u}from"./p-COVJfV1p.js";import{d as f}from"./p-Bi3WoZuh.js";import{d as p}from"./p-D_mt2G7u.js";import{d as b}from"./p-BlDSuP1U.js";import{d as x}from"./p-B9K5Bk9_.js";import{d as y}from"./p-DzzrYA4J.js";const k=t(class extends e{constructor(t){super(),!1!==t&&this.__registerHost(),this.atuiCancel=s(this,"atuiCancel",7),this.atuiSubmit=s(this,"atuiSubmit",7)}units;common_options;min_date=null;min_seconds=60;max_seconds=Number.MAX_SAFE_INTEGER;initial_selected_time;custom_error_message=null;show_all_time=!1;errorText="";secondaryErrorText="";translations;dropdownOptions;timeValue;watchTimeValue(){this.updateSelectedTime(this.timeValue)}timeUnit;watchTimeUnit(){this.updateSelectedTime(this.timeValue)}selectedTime;startDate;get el(){return this}async componentWillLoad(){this.translations=await h(this.el)}componentWillRender(){this.selectedTime||(this.initSelectedTime(this.initial_selected_time),this.initDropdownOptions())}initDropdownOptions(){this.dropdownOptions=this.show_all_time?[n.ALL,...this.units]:this.units}initSelectedTime(t){const e="object"==typeof t?c.getCurrentOrDefaultUnit(t.unit,this.units):n.ALL,s="object"==typeof t?t.value:null;this.timeUnit=e,this.timeValue=s,this.selectedTime=t,this.startDate=this.getRelativeDate()?.startDate}updateSelectedTime(t){const e=this.timeUnit;e!==n.ALL?this.selectedTime={unit:e,value:t}:(this.selectedTime=l.ALL,this.timeValue&&(this.timeValue=null)),this.validateInput(),this.startDate=this.getRelativeDate()?.startDate}validateInput(){if(this.selectedTime!==l.ALL){const t=this.min_date?c.getSecondsAgoFromDate(this.min_date):this.max_seconds,e=c.convertSecondsToUnit(t,this.timeUnit,0,!0),s=c.convertSecondsToUnit(this.min_seconds,this.timeUnit,0,!1);this.errorText=this.timeValue>e?this.translations?this.translations.ATUI.TIME.VALIDATION.MAX_NUMBER.replace("{lowerThanValue}",`${e+1} ${this.timeUnit}`):`Please enter a value lower than ${e} ${this.timeUnit}`:this.timeValue<s?this.translations?this.translations.ATUI.TIME.VALIDATION.MIN_NUMBER.replace("{min}",`${e} ${this.timeUnit}`):`Please enter a value larger than ${s} ${this.timeUnit}`:"",this.errorText&&this.custom_error_message&&(this.secondaryErrorText=this.custom_error_message)}}updateSelectedRange(t){this.timeUnit=t.unit,this.timeValue=t.value,this.selectedTime=t}getRelativeDate(){if("object"==typeof this.selectedTime)return c.getRelativeDateRange(this.selectedTime)}clearSelection(){"object"==typeof this.initial_selected_time?(this.timeValue=this.initial_selected_time.value,this.timeUnit=this.initial_selected_time.unit):(this.timeValue=null,this.timeUnit=n.ALL)}atuiCancel;atuiSubmit;handleCancel(){this.atuiCancel.emit()}handleSubmit(){""===this.errorText&&this.atuiSubmit.emit(this.selectedTime)}handleSelectChange(t){const e=this.translations.ATUI.TIME,s=t.detail;this.timeUnit=this.translations?Object.keys(e).find((t=>e[t]===s)):s}render(){return i("div",{key:"e59fe7c01a4a6d0c1b2b31213290be2a3862c7b5",class:"w-panel-sm flex flex-col gap-16 border border-gray-300",onKeyUp:t=>("Enter"===t.key||" "===t.key)&&this.handleSubmit(),tabindex:0},i("div",{key:"67cbcec34e8fcf5f13d3292591e52f42b5724cb4",class:"flex flex-col gap-8 p-12"},i("h5",{key:"398fbf44f5c55c0f77d40d94f2b404a47d055452",class:"text-h5 text-dark font-medium"},this.translations.ATUI.TIME.SELECT_RELATIVE_TIME),i("div",{key:"453eac0afc8101a1e8299f1c1e3f28cf87a19ca2",class:"flex flex-col gap-8"},i("at-input-numeric",{key:"de42bc4e32e6b27e3764d690e962fff36a176445",value:this.timeValue,onAtuiChange:t=>this.timeValue=t.detail}),i("at-select",{key:"83309fd94ed0cf478bcbf6e3b48524cfb417126d",class:"flex-fill",value:this.translations.ATUI.TIME[this.timeUnit],options:this.dropdownOptions?this.dropdownOptions.map((t=>this.translations.ATUI.TIME[t])):null,onAtuiChange:t=>this.handleSelectChange(t)})),this.errorText?i(a,null,i("span",{class:"text-error text-sm","data-name":"time-with-unit-error"},this.errorText),this.secondaryErrorText&&i("span",{class:"text-error text-sm","data-name":"time-with-unit-error-secondary"},this.secondaryErrorText)):this.selectedTime!==l.ALL?this.timeValue&&this.selectedTime?.unit&&i("span",{class:"text-med text-sm font-normal"},this.startDate.toLocaleString()," ⁠— NOW"):this.selectedTime===l.ALL&&i("span",{class:"text-med text-sm font-normal"},this.translations.ATUI.TIME.ALL_TIME_LABEL)),this.common_options&&i("div",{key:"414728be64b74a18e3489d4c5a8d392a8908b9d9",class:"flex flex-col gap-8 px-12"},i("h5",{key:"5550a4097def29bf4b5b065e94462d92b6654e6c",class:"text-h5 text-dark font-medium"},this.translations.ATUI.TIME.COMMONLY_USED),i("div",{key:"03980735b9f1c16523674af1b9e5883d9f5a905c",class:"columns-2","data-name":"time-with-unit-common-options"},this.common_options&&this.common_options.map((t=>i("div",{onClick:()=>this.updateSelectedRange(t),onKeyDown:e=>{e.stopPropagation(),"Enter"!==e.key&&" "!==e.key||this.updateSelectedRange(t)},tabindex:0,class:(this.selectedTime!==l.ALL&&this.selectedTime?.value===t.value&&this.selectedTime?.unit===t.unit?"bg-active-light px-4":"")+" cursor-pointer"},i("small",null,this.translations.ATUI.TIME.LAST," ",t.value," ",this.translations.ATUI.TIME[t.unit])))))),i("footer",{key:"c35a6b21c5204992d1a24616504213cb52977de9",class:"flex justify-between p-8"},i("at-button",{key:"6299fae84a896d211c803b140f001bbadc6db083",type:"secondaryOutline","data-name":"clear",label:this.translations.ATUI.RESET,onAtuiClick:()=>this.clearSelection()}),i("div",{key:"505e7abd62c317b213be76f13df4cdcfaa5a2367",class:"flex gap-8"},i("at-button",{key:"3adc136c5fd151360571187818750d0e40bbb94f",type:"secondaryOutline","data-name":"cancel",label:this.translations.ATUI.CANCEL,onAtuiClick:()=>this.handleCancel()}),i("at-button",{key:"a072ba756953ed5bd26c0c8fbd78c6bb46e8eff7","data-name":"apply",label:this.translations.ATUI.APPLY,onAtuiClick:()=>this.handleSubmit()}))))}static get watchers(){return{timeValue:[{watchTimeValue:0}],timeUnit:[{watchTimeUnit:0}]}}},[512,"at-time-with-unit",{units:[16],common_options:[16],min_date:[16],min_seconds:[2],max_seconds:[2],initial_selected_time:[1],custom_error_message:[8],show_all_time:[4],errorText:[32],secondaryErrorText:[32],translations:[32],dropdownOptions:[32],timeValue:[32],timeUnit:[32],selectedTime:[32],startDate:[32]},void 0,{timeValue:[{watchTimeValue:0}],timeUnit:[{watchTimeUnit:0}]}]);function w(){"undefined"!=typeof customElements&&["at-time-with-unit","at-button","at-form-label","at-input-numeric","at-loading","at-menu","at-select","at-select-group","at-select-option","at-tooltip"].forEach((t=>{switch(t){case"at-time-with-unit":customElements.get(o(t))||customElements.define(o(t),k);break;case"at-button":customElements.get(o(t))||m();break;case"at-form-label":customElements.get(o(t))||r();break;case"at-input-numeric":customElements.get(o(t))||d();break;case"at-loading":customElements.get(o(t))||u();break;case"at-menu":customElements.get(o(t))||f();break;case"at-select":customElements.get(o(t))||p();break;case"at-select-group":customElements.get(o(t))||b();break;case"at-select-option":customElements.get(o(t))||x();break;case"at-tooltip":customElements.get(o(t))||y()}}))}export{k as A,w as d}