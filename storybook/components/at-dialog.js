import{p as a,H as t,d as i,h as e,c as s,t as o}from"./p-CGooRokE.js";const n=a(class extends t{constructor(a){super(),!1!==a&&this.__registerHost(),this.atuiDialogChange=i(this,"atuiDialogChange",7)}get el(){return this}role="dialog";backdrop=!0;close_backdrop=!1;trigger_id;isOpen=!1;atuiDialogChange;dialog;dialogWrapper;triggerEls=[];externalTriggerListeners=[];async toggleDialog(){this.isOpen?await this.closeDialog():await this.openDialog()}async openDialog(){this.dialog&&!this.isOpen&&(!0===this.backdrop?this.dialog.showModal():this.dialog.show(),this.isOpen=!0,this.atuiDialogChange.emit(this.isOpen))}async closeDialog(){this.dialog&&this.isOpen&&(this.dialog.close(),this.isOpen=!1,this.atuiDialogChange.emit(this.isOpen),this.dialog.removeAttribute("open"))}async getIsOpen(){return this.isOpen}handleDialogClose=()=>{this.isOpen&&this.closeDialog()};handleKeyDown=a=>{"Escape"===a.key&&this.isOpen&&(a.preventDefault(),this.closeDialog())};offClickHandler(a){this.close_backdrop&&this.dialog?.open&&(this.dialogWrapper?.contains(a.target)||this.handleDialogClose())}async componentDidLoad(){if(this.trigger_id){if(this.triggerEls=Array.from(document.querySelectorAll(`[data-dialog="${this.trigger_id}"]`)),0===this.triggerEls.length)return void console.warn(`atui-dialog: No elements found with data-dialog="${this.trigger_id}"`);this.setupExternalTriggerListeners()}}disconnectedCallback(){this.cleanupExternalTriggerListeners()}cleanupExternalTriggerListeners(){this.externalTriggerListeners.forEach((({element:a,event:t,handler:i})=>{a.removeEventListener(t,i)})),this.externalTriggerListeners=[]}setupExternalTriggerListeners(){if(!this.triggerEls||0===this.triggerEls.length)return;const a=async a=>{a.preventDefault(),a.stopPropagation(),await this.toggleDialog()},t=async a=>{switch(a.key){case"Enter":case" ":a.preventDefault(),await this.toggleDialog()}};this.triggerEls.forEach((i=>{i.addEventListener("click",a),i.addEventListener("keydown",t),this.externalTriggerListeners.push({element:i,event:"click",handler:a},{element:i,event:"keydown",handler:t})}))}render(){return e(s,{key:"14ab35170fabe37526ab0d63e6df3f656474f586","data-open":this.isOpen},e("dialog",{key:"0d80d8cabb5bca16702189b0adb05b23599e9188",ref:a=>this.dialog=a,"data-name":"dialog",class:this.backdrop?"backdrop":"",role:this.role,"aria-modal":"true",onClose:this.handleDialogClose,onKeyDown:this.handleKeyDown},e("div",{key:"f7a821d9dbfe9f42dc0fb05b9e59392ff3c63d30","data-name":"content",ref:a=>this.dialogWrapper=a},e("slot",{key:"7d25236427ff067ae1d1f025c421c229129782d4"}))))}static get style(){return"@keyframes fadeIn{from{background-color:rgba(0, 0, 0, 0)}to{background-color:rgba(0, 0, 0, 0.2)}}@keyframes animInUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes animOut{from{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(0.95)}}dialog.backdrop.sc-at-dialog::backdrop{margin:0;inset:0;background:rgba(0, 0, 0, 0.2);animation:fadeIn 0.3s ease forwards;transition:opacity var(--token-transition-time) ease-in-out allow-discrete}dialog.backdrop.sc-at-dialog::backdrop{z-index:var(--z-backdrop, 1000)}.sc-at-dialog-h{display:contents}.sc-at-dialog-h dialog.sc-at-dialog{position:fixed;inset:0;margin:0;display:flex;align-items:center;justify-content:center;min-width:100vw;min-height:100vh;overflow:hidden;border:0;padding:0;background:transparent;z-index:var(--token-z-index-modal);transform-origin:center;opacity:0;box-shadow:var(--token-shadow-3);visibility:hidden;transition:translate 0.3s ease, scale 0.3s ease, opacity 0.3s ease, visibility 0s linear 0.3s}.sc-at-dialog-h dialog.backdrop.sc-at-dialog{display:flex;width:100vw;height:100vh}.sc-at-dialog-h dialog[open].sc-at-dialog{translate:0 0;scale:1;opacity:1;visibility:visible;transition:translate 0.3s ease, scale 0.3s ease, opacity 0.3s ease, visibility 0s linear}@starting-style{.sc-at-dialog-h dialog[open]{opacity:0}}.sc-at-dialog-h dialog.sc-at-dialog:not([open]){opacity:0;visibility:hidden}"}},[774,"at-dialog",{role:[1],backdrop:[516],close_backdrop:[516],trigger_id:[1],isOpen:[32],toggleDialog:[64],openDialog:[64],closeDialog:[64],getIsOpen:[64]},[[5,"mousedown","offClickHandler"]]]),r=n,d=function(){"undefined"!=typeof customElements&&["at-dialog"].forEach((a=>{"at-dialog"===a&&(customElements.get(o(a))||customElements.define(o(a),n))}))};export{r as AtDialog,d as defineCustomElement}