import{p as t,H as e,d as s,h as a,c as i,t as o}from"./p-CGooRokE.js";import{a as n,T as r,D as m}from"./p-B3Y_DZ8s.js";import l from"moment";import{f as c}from"./p-DuLooPsr.js";import{d as u}from"./p-Di0GDcCy.js";import{d as h}from"./p-IT6sF-Fy.js";import{d}from"./p-P8smdZSF.js";import{d as f}from"./p-Bk0G8U1m.js";import{d as p}from"./p-DhOP89rt.js";import{d as b}from"./p-BZIZdvYB.js";import{d as g}from"./p-COVJfV1p.js";import{d as _}from"./p-Bi3WoZuh.js";import{d as v}from"./p-Bysykz15.js";import{d as w}from"./p-Cfcmc9gI.js";import{d as k}from"./p-Rw0Ekv0e.js";import{d as E}from"./p-C6-i-eWH.js";import{d as x}from"./p-OMhFRNWv.js";import{d as y}from"./p-Dfg4lUNr.js";import{M as j,T as C}from"./p-C3LwY5aR.js";var D,S;!function(t){t.SECONDS="s",t.MINUTES="min",t.HOURS="hr",t.DAYS="d",t.WEEKS="w",t.MONTHS="m",t.YEARS="yr"}(D||(D={})),function(t){t.SECONDS="SECONDS",t.MINUTES="MINUTES",t.HOURS="HOURS",t.DAYS="DAYS",t.WEEKS="WEEKS",t.MONTHS="MONTHS",t.YEARS="YEARS"}(S||(S={}));const T=t(class extends e{constructor(t){super(),!1!==t&&this.__registerHost(),this.atuiChange=s(this,"atuiChange",7)}selected_time_range={selected:{unit:n.HOURS,value:1}};range_limit=7;presets;enable_relative_time=!0;custom_error_message=null;show_all_time=!1;enable_range_limit=!0;today;lowerLimit;defaultFromDate;translations;relativeTimeMenuEl;absoluteTimeMenuEl;get el(){return this}units=[n.MINUTES,n.HOURS,n.DAYS,n.WEEKS,n.MONTHS,n.YEARS];minSeconds=300;async componentWillLoad(){this.translations=await c(this.el),this.today=new Date}componentWillRender(){this.lowerLimit=this.enable_range_limit?l().subtract(this.range_limit,"day").toDate():r.floorDateByTimeUnit(j,m.HOURS),this.defaultFromDate=l(this.today).subtract(1,"hours").toDate()}getLongUnitDisplay(t){if(!t.custom&&t.selected)return S[t.selected.unit]}getRelativeDate(t){if(!t.custom&&t.selected)return r.getRelativeDateRange(t.selected)}getCustomStartAndEndDate(t){if(!t.custom)return;const{from:e,to:s}=t.custom;return{fromDate:l(e).toDate(),toDate:l(s).toDate()}}getShortUnitDisplay(t){return D[t.unit]}atuiChange;onChangeCustomTime(t){this.selected_time_range={selected:C.CUSTOM,custom:t},this.atuiChange.emit({...this.selected_time_range})}onChangeRelativeTime(t){this.selected_time_range={selected:t},this.atuiChange.emit({...this.selected_time_range})}get buttonGroupOptions(){const t=[];return t.push(this.selected_time_range.selected===C.ALL?{value:a("div",{class:"text-dark flex items-center gap-4 font-normal"},a("span",{class:"font-medium"},this.translations.ATUI.TIME.ALL_TIME_LABEL))}:this.selected_time_range.custom?{value:[a("div",{class:"text-dark flex items-center gap-4 font-normal"},a("span",null,this.getCustomStartAndEndDate(this.selected_time_range)?.fromDate.toLocaleString()),a("span",{class:"icon-md material-icons text-light"},"arrow_forward"),a("span",null,this.selected_time_range.custom.lockEndDateToNow?"NOW":this.getCustomStartAndEndDate(this.selected_time_range)?.toDate.toLocaleString()))]}:{value:a("div",{class:"text-dark flex items-center gap-4 font-normal"},a("span",{class:"font-medium"},this.translations.ATUI.TIME.LAST," ",this.selected_time_range.selected.value," ",this.translations.ATUI.TIME[this.getLongUnitDisplay(this.selected_time_range)]," ",":"),a("span",null,this.getRelativeDate(this.selected_time_range).startDate.toLocaleString()),a("span",{class:"icon-md material-icons text-light"},"arrow_forward"),a("span",null,"NOW"))}),t.push({value:a("div",{class:"flex items-center"},a("span",{class:"icon-md material-icons text-light"},"date_range"))}),t}get predefinedTimeRanges(){const t=[];return this.presets.forEach((e=>{t.push({value:a("span",null,e.value,this.getShortUnitDisplay(e))})})),t.push({value:a("div",{class:"flex items-center"},a("span",{class:"material-icons text-body text-light"},"date_range"))}),t}render(){return a(i,{key:"3ded49bfee610bef89ce7dd0c6d12069b7aac326",class:"relative flex justify-center gap-8"},this.enable_relative_time&&a("at-button-group",{key:"6fc8f490828a6e5f67e0dbeb7583f0759f9f0c9b",options:this.buttonGroupOptions,onAtuiIndexChange:t=>0===t.detail&&this.relativeTimeMenuEl.focus()||1===t.detail&&this.absoluteTimeMenuEl.focus()}),!this.enable_relative_time&&a("at-button-group",{key:"0daef2db546fb4f7b1cad32274fca47c1896ea86",options:this.predefinedTimeRanges,onAtuiIndexChange:t=>{t.detail<this.presets.length?this.onChangeRelativeTime(this.presets[t.detail]):t.detail===this.predefinedTimeRanges.length-1&&this.absoluteTimeMenuEl.focus()}}),a("div",{key:"ba52ad62497c5bccb76cca882e36e21946bca0ad",ref:t=>this.relativeTimeMenuEl=t,class:"absolute top-[42px] z-10 h-0 overflow-hidden bg-white focus-within:h-fit focus-within:overflow-visible focus:h-fit",tabindex:0,onChange:t=>t.stopPropagation()},a("at-time-with-unit",{key:"20bdcc3f21146e6b5972536246aa13d61790bf5e",units:this.units,common_options:this.presets,min_date:this.lowerLimit,min_seconds:this.minSeconds,initial_selected_time:this.selected_time_range.selected===C.CUSTOM?C.ALL:this.selected_time_range.selected,custom_error_message:this.custom_error_message,show_all_time:this.show_all_time,onAtuiSubmit:t=>this.onChangeRelativeTime(t.detail),onAtuiCancel:()=>{this.relativeTimeMenuEl.focus(),this.relativeTimeMenuEl.blur()}})),a("div",{key:"2b25c7f5370c97b7e9789904992609d7948994ee",ref:t=>this.absoluteTimeMenuEl=t,class:"absolute top-[42px] z-10 h-0 overflow-hidden bg-white focus-within:h-fit focus-within:overflow-visible focus:h-fit",tabindex:0,onChange:t=>t.stopPropagation()},a("at-custom-time-range",{key:"a8e4c8d3da01b3d86821772fbd2ddb3f4a89d514",min_date:this.lowerLimit,default_to_date:this.today,default_from_date:this.defaultFromDate,from_date_value:this.getCustomStartAndEndDate(this.selected_time_range)?.fromDate,to_date_value:this.getCustomStartAndEndDate(this.selected_time_range)?.toDate,lock_end_date_to_now:this.selected_time_range.custom?.lockEndDateToNow,onAtuiSubmit:t=>this.onChangeCustomTime(t.detail),onAtuiCancel:()=>{this.absoluteTimeMenuEl.focus(),this.absoluteTimeMenuEl.blur()}})))}},[512,"at-time-range",{selected_time_range:[16],range_limit:[2],presets:[16],enable_relative_time:[4],custom_error_message:[8],show_all_time:[4],enable_range_limit:[4],today:[32],lowerLimit:[32],defaultFromDate:[32],translations:[32],relativeTimeMenuEl:[32],absoluteTimeMenuEl:[32]}]),R=T,A=function(){"undefined"!=typeof customElements&&["at-time-range","at-button","at-button-group","at-button-group-option","at-custom-time-range","at-form-label","at-input-numeric","at-loading","at-menu","at-select","at-select-group","at-select-option","at-time-with-unit","at-toggle-switch","at-tooltip"].forEach((t=>{switch(t){case"at-time-range":customElements.get(o(t))||customElements.define(o(t),T);break;case"at-button":customElements.get(o(t))||u();break;case"at-button-group":customElements.get(o(t))||h();break;case"at-button-group-option":customElements.get(o(t))||d();break;case"at-custom-time-range":customElements.get(o(t))||f();break;case"at-form-label":customElements.get(o(t))||p();break;case"at-input-numeric":customElements.get(o(t))||b();break;case"at-loading":customElements.get(o(t))||g();break;case"at-menu":customElements.get(o(t))||_();break;case"at-select":customElements.get(o(t))||v();break;case"at-select-group":customElements.get(o(t))||w();break;case"at-select-option":customElements.get(o(t))||k();break;case"at-time-with-unit":customElements.get(o(t))||E();break;case"at-toggle-switch":customElements.get(o(t))||x();break;case"at-tooltip":customElements.get(o(t))||y()}}))};export{R as AtTimeRange,A as defineCustomElement}