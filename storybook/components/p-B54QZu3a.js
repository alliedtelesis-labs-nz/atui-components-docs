import{p as t,H as e,d as s,h as i,F as a,t as o}from"./p-CGooRokE.js";import{b as n,T as l}from"./p-B3Y_DZ8s.js";import{T as h}from"./p-C3LwY5aR.js";import{f as c}from"./p-DuLooPsr.js";import{d as m}from"./p-B9YfMiOg.js";import{d as r}from"./p-DsS6ahmK.js";import{d}from"./p-DvVoc_Rk.js";import{d as u}from"./p-COVJfV1p.js";import{d as p}from"./p-B2F_aseg.js";import{d as f}from"./p-Cbs26yaV.js";import{d as b}from"./p-Dswk26mK.js";import{d as x}from"./p-BhrSg38l.js";import{d as y}from"./p-B8-EiVSh.js";const k=t(class extends e{constructor(t){super(),!1!==t&&this.__registerHost(),this.atuiCancel=s(this,"atuiCancel",7),this.atuiSubmit=s(this,"atuiSubmit",7)}units;common_options;min_date=null;min_seconds=60;max_seconds=Number.MAX_SAFE_INTEGER;initial_selected_time;custom_error_message=null;show_all_time=!1;errorText="";secondaryErrorText="";translations;dropdownOptions;timeValue;watchTimeValue(){this.updateSelectedTime(this.timeValue)}timeUnit;watchTimeUnit(){this.updateSelectedTime(this.timeValue)}selectedTime;startDate;get el(){return this}async componentWillLoad(){this.translations=await c(this.el)}componentWillRender(){this.selectedTime||(this.initSelectedTime(this.initial_selected_time),this.initDropdownOptions())}initDropdownOptions(){this.dropdownOptions=this.show_all_time?[n.ALL,...this.units]:this.units}initSelectedTime(t){const e="object"==typeof t?l.getCurrentOrDefaultUnit(t.unit,this.units):n.ALL,s="object"==typeof t?t.value:null;this.timeUnit=e,this.timeValue=s,this.selectedTime=t,this.startDate=this.getRelativeDate()?.startDate}updateSelectedTime(t){const e=this.timeUnit;e!==n.ALL?this.selectedTime={unit:e,value:t}:(this.selectedTime=h.ALL,this.timeValue&&(this.timeValue=null)),this.validateInput(),this.startDate=this.getRelativeDate()?.startDate}validateInput(){if(this.selectedTime!==h.ALL){const t=this.min_date?l.getSecondsAgoFromDate(this.min_date):this.max_seconds,e=l.convertSecondsToUnit(t,this.timeUnit,0,!0),s=l.convertSecondsToUnit(this.min_seconds,this.timeUnit,0,!1);this.errorText=this.timeValue>e?this.translations?this.translations.ATUI.TIME.VALIDATION.MAX_NUMBER.replace("{lowerThanValue}",`${e+1} ${this.timeUnit}`):`Please enter a value lower than ${e} ${this.timeUnit}`:this.timeValue<s?this.translations?this.translations.ATUI.TIME.VALIDATION.MIN_NUMBER.replace("{min}",`${e} ${this.timeUnit}`):`Please enter a value larger than ${s} ${this.timeUnit}`:"",this.errorText&&this.custom_error_message&&(this.secondaryErrorText=this.custom_error_message)}}updateSelectedRange(t){this.timeUnit=t.unit,this.timeValue=t.value,this.selectedTime=t}getRelativeDate(){if("object"==typeof this.selectedTime)return l.getRelativeDateRange(this.selectedTime)}clearSelection(){"object"==typeof this.initial_selected_time?(this.timeValue=this.initial_selected_time.value,this.timeUnit=this.initial_selected_time.unit):(this.timeValue=null,this.timeUnit=n.ALL)}atuiCancel;atuiSubmit;handleCancel(){this.atuiCancel.emit()}handleSubmit(){""===this.errorText&&this.atuiSubmit.emit(this.selectedTime)}handleSelectChange(t){const e=this.translations.ATUI.TIME,s=t.detail;this.timeUnit=this.translations?Object.keys(e).find((t=>e[t]===s)):s}render(){return i("div",{key:"6c791a959ed758cd92bb18d32c57db44365a6ea8",class:"w-panel-sm flex flex-col gap-16 border border-gray-300",onKeyUp:t=>("Enter"===t.key||" "===t.key)&&this.handleSubmit(),tabindex:0},i("div",{key:"c10f324559eecd5c96406004ad6c3a8704432211",class:"flex flex-col gap-8 p-12"},i("h5",{key:"4aa677bf9025ab3c8da0d282ce3955d2bd7d03f9",class:"text-h5 text-dark font-medium"},this.translations.ATUI.TIME.SELECT_RELATIVE_TIME),i("div",{key:"ab25d2d52f15c5fd994e11f763841b0fd6544275",class:"flex flex-col gap-8"},i("at-input-numeric",{key:"9038044bf14e409422a49c658caa428f64fe0493",value:this.timeValue,onAtuiChange:t=>this.timeValue=t.detail}),i("at-select",{key:"46cfb5729173af6155a4d0e46cff58e7f70f24e7",class:"flex-fill",value:this.translations.ATUI.TIME[this.timeUnit],options:this.dropdownOptions?this.dropdownOptions.map((t=>this.translations.ATUI.TIME[t])):null,onAtuiChange:t=>this.handleSelectChange(t)})),this.errorText?i(a,null,i("span",{class:"text-error text-sm","data-name":"time-with-unit-error"},this.errorText),this.secondaryErrorText&&i("span",{class:"text-error text-sm","data-name":"time-with-unit-error-secondary"},this.secondaryErrorText)):this.selectedTime!==h.ALL?this.timeValue&&this.selectedTime?.unit&&i("span",{class:"text-med text-sm font-normal"},this.startDate.toLocaleString()," ⁠— NOW"):this.selectedTime===h.ALL&&i("span",{class:"text-med text-sm font-normal"},this.translations.ATUI.TIME.ALL_TIME_LABEL)),this.common_options&&i("div",{key:"208569b3d1f9c45b16bce13f49b97069cdf8f920",class:"flex flex-col gap-8 px-12"},i("h5",{key:"40d9b843d6c64d7c55916e67efc82ba837e17e2d",class:"text-h5 text-dark font-medium"},this.translations.ATUI.TIME.COMMONLY_USED),i("div",{key:"0743a7bba91e7a3d2f6dda8ba56cf6d013d05a4b",class:"columns-2","data-name":"time-with-unit-common-options"},this.common_options&&this.common_options.map((t=>i("div",{onClick:()=>this.updateSelectedRange(t),onKeyDown:e=>{e.stopPropagation(),"Enter"!==e.key&&" "!==e.key||this.updateSelectedRange(t)},tabindex:0,class:(this.selectedTime!==h.ALL&&this.selectedTime?.value===t.value&&this.selectedTime?.unit===t.unit?"bg-active-light px-4":"")+" cursor-pointer"},i("small",null,this.translations.ATUI.TIME.LAST," ",t.value," ",this.translations.ATUI.TIME[t.unit])))))),i("footer",{key:"26510e79ced8510fd5d678d915ab62c07e1b6a18",class:"flex justify-between p-8"},i("at-button",{key:"a4d83881ac29e9b6397d4b2a6f06af82e20f5634",type:"secondaryOutline","data-name":"clear",label:this.translations.ATUI.RESET,onAtuiClick:()=>this.clearSelection()}),i("div",{key:"ee6f576023a60bf05d8c966b2873803b0e44e6d7",class:"flex gap-8"},i("at-button",{key:"89d2db9c1224a181276819e4e27620cfd57700db",type:"secondaryOutline","data-name":"cancel",label:this.translations.ATUI.CANCEL,onAtuiClick:()=>this.handleCancel()}),i("at-button",{key:"bf237393e64e7b5d311559516e1746b0bfee511e","data-name":"apply",label:this.translations.ATUI.APPLY,onAtuiClick:()=>this.handleSubmit()}))))}static get watchers(){return{timeValue:[{watchTimeValue:0}],timeUnit:[{watchTimeUnit:0}]}}},[512,"at-time-with-unit",{units:[16],common_options:[16],min_date:[16],min_seconds:[2],max_seconds:[2],initial_selected_time:[1],custom_error_message:[8],show_all_time:[4],errorText:[32],secondaryErrorText:[32],translations:[32],dropdownOptions:[32],timeValue:[32],timeUnit:[32],selectedTime:[32],startDate:[32]},void 0,{timeValue:[{watchTimeValue:0}],timeUnit:[{watchTimeUnit:0}]}]);function w(){"undefined"!=typeof customElements&&["at-time-with-unit","at-button","at-form-label","at-input-numeric","at-loading","at-menu","at-select","at-select-group","at-select-option","at-tooltip"].forEach((t=>{switch(t){case"at-time-with-unit":customElements.get(o(t))||customElements.define(o(t),k);break;case"at-button":customElements.get(o(t))||m();break;case"at-form-label":customElements.get(o(t))||r();break;case"at-input-numeric":customElements.get(o(t))||d();break;case"at-loading":customElements.get(o(t))||u();break;case"at-menu":customElements.get(o(t))||p();break;case"at-select":customElements.get(o(t))||f();break;case"at-select-group":customElements.get(o(t))||b();break;case"at-select-option":customElements.get(o(t))||x();break;case"at-tooltip":customElements.get(o(t))||y()}}))}export{k as A,w as d}