import{p as t,H as e,h as s,c as i,t as o}from"./p-CtWJ4BTZ.js";import{C as n,a,D as r,A as h,f as l,g as c,i as d,h as p}from"./p-7mQ_RyCI.js";const u={xs:"h-[70px]",sm:"h-[160px]",md:"h-[235px]",lg:"h-[330px]",xl:"h-[440px]",auto:"h-full"},m=t(class extends e{constructor(t){super(),!1!==t&&this.__registerHost()}data;options;height="md";legend_format={labels:{boxWidth:10,boxHeight:10,fontSize:11},onHover:t=>{t.native&&(t.native.target.style.cursor="pointer")},display:!0};tooltip_options={mode:"index",intersect:!1,position:"nearest"};plugins;animations;color_palette=n.CATEGORICAL;center_value;center_text;cutout=70;canvasEl;config;async getConfig(){return this.config}defaultPieTooltipOptions={mode:"index",intersect:!0,position:"nearest",animation:{duration:150}};getDrawCenterTextPlugin(){return{id:"DrawCenterTextPlugin",afterDatasetDraw:t=>{const e=(t.chartArea.left+t.chartArea.right)/2,s=(t.chartArea.top+t.chartArea.bottom)/2,i=t.ctx;if(!i)return;i.restore();const o=t.chartArea.bottom-t.chartArea.top,n=(o/250).toFixed(2)+"em sans-serif",a=(o/180).toFixed(2)+"em sans-serif";i.fillStyle="#0f172a",i.textAlign="center",i.textBaseline="middle",i.font="500 "+a;const r=(t,e,s,o,n)=>{i.font="500 "+t;const a=i.measureText(e),r=a.actualBoundingBoxAscent+a.actualBoundingBoxDescent;"middle"!=n&&(o="top"===n?o-r:o+r),i.fillText(e,s,o)};this.center_value?(r(a,this.center_value,e,s,"top"),r(n,this.center_text,e,s,"bottom")):this.center_text&&r(n,this.center_text,e,s,"middle"),i.save()}}}initChart(){a.register(r,h,l,c,d);const t=p(this.color_palette);t&&this.applyPresetPalette(t);const e=this.plugins?[...this.plugins]:[];(this.center_text||this.center_value)&&e.push(this.getDrawCenterTextPlugin()),this.config={type:"doughnut",data:{...this.data,datasets:this.data.datasets.map((t=>({...t,cutout:this.cutout+"%"})))},options:{animation:this.animations,...this.options,maintainAspectRatio:!0,aspectRatio:1,layout:{padding:16},plugins:{legend:this.legend_format,tooltip:this.tooltip_options||this.defaultPieTooltipOptions}},plugins:e},new a(this.canvasEl,this.config),this.canvasEl.style.width="100%",this.canvasEl.style.height="100%"}applyPresetPalette(t){this.color_palette!==n.CUSTOM&&(this.data.datasets=this.data.datasets.map((e=>{const s=e.data.map(((e,s)=>t[s%t.length]));return{...e,backgroundColor:s,hoverBackgroundColor:s,borderColor:s,hoverBorderColor:s}})))}componentDidUpdate(){this.data&&this.data.datasets.length&&this.initChart()}componentDidLoad(){this.data&&this.data.datasets.length&&this.initChart()}render(){return s(i,{key:"8c9f28902414ab8d81a34963cba1a59ee6fc867e",role:"region",class:"relative flex w-full flex-col items-center justify-center "+u[this.height]},s("canvas",{key:"5f8adcbc14fe77068b9dcb0082edf4b00b357ff4",ref:t=>this.canvasEl=t,style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",maxWidth:"100%",maxHeight:"100%"}}))}},[512,"at-chart-donut",{data:[16],options:[16],height:[1],legend_format:[16],tooltip_options:[16],plugins:[16],animations:[16],color_palette:[1],center_value:[1],center_text:[1],cutout:[2],getConfig:[64]}]),f=m,g=function(){"undefined"!=typeof customElements&&["at-chart-donut"].forEach((t=>{"at-chart-donut"===t&&(customElements.get(o(t))||customElements.define(o(t),m))}))};export{f as AtChartDonut,g as defineCustomElement}