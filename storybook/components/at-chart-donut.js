import{p as t,H as e,h as s,c as i,t as o}from"./p-CGooRokE.js";import{C as n,a,D as r,A as h,f as c,g as l,i as d,h as p}from"./p-BFIVuvTv.js";const u={xs:"h-[70px]",sm:"h-[160px]",md:"h-[235px]",lg:"h-[330px]",xl:"h-[440px]",auto:"h-full"},f=t(class extends e{constructor(t){super(),!1!==t&&this.__registerHost()}data;options;height="auto";legend_position="top";legend_format={labels:{boxWidth:10,boxHeight:10,fontSize:11},onHover:t=>{t.native&&(t.native.target.style.cursor="pointer")},onClick:(t,e,s)=>{const i=s.chart;i.toggleDataVisibility(e.index);const o=i.data.labels?.some(((t,e)=>i.getDataVisibility(e)));i.options.plugins?.tooltip&&(i.options.plugins.tooltip.enabled=!!o),i.update()},display:!0};tooltip_options={mode:"nearest",intersect:!0,position:"nearest"};plugins;color_palette=n.CATEGORICAL;center_value;center_text;cutout=70;canvasEl;config;chart;async getConfig(){return this.config}async resize(){this.chart&&this.chart.resize()}defaultPieTooltipOptions={mode:"nearest",intersect:!0,position:"nearest",animation:{duration:150}};getDrawCenterTextPlugin(){return{id:"DrawCenterTextPlugin",afterDatasetDraw:t=>{const e=(t.chartArea.left+t.chartArea.right)/2,s=(t.chartArea.top+t.chartArea.bottom)/2,i=t.ctx;if(!i)return;i.restore();const o=t.chartArea.bottom-t.chartArea.top,n=(o/200).toFixed(2)+"em sans-serif",a=(o/140).toFixed(2)+"em sans-serif";i.fillStyle="#0f172a",i.textAlign="center",i.textBaseline="middle",i.font="500 "+a;const r=(t,e,s,o,n)=>{i.font="500 "+t;const a=i.measureText(e),r=a.actualBoundingBoxAscent+a.actualBoundingBoxDescent;"middle"!=n&&(o="top"===n?o-r:o+r),i.fillText(e,s,o)};this.center_value?(r(a,this.center_value,e,s,"top"),r(n,this.center_text,e,s,"bottom")):this.center_text&&r(n,this.center_text,e,s,"middle"),i.save()}}}initChart(){a.register(r,h,c,l,d);const t=window.devicePixelRatio||1,e=p(this.color_palette);e&&this.applyPresetPalette(e);const s=this.plugins?[...this.plugins]:[];(this.center_text||this.center_value)&&s.push(this.getDrawCenterTextPlugin()),this.config={type:"doughnut",data:{...this.data,datasets:this.data.datasets.map((t=>({...t,cutout:this.cutout+"%"})))},options:{devicePixelRatio:t,maintainAspectRatio:!1,aspectRatio:1,layout:{padding:16},interaction:{mode:"nearest",intersect:!0},plugins:{legend:{...this.legend_format||{},position:this.legend_position,fullSize:!0},tooltip:{...this.tooltip_options||this.defaultPieTooltipOptions,filter:t=>t.chart.getDataVisibility(t.dataIndex),enabled:!0}},...this.options||{}},plugins:s},this.chart&&this.chart.destroy(),this.chart=new a(this.canvasEl,this.config)}applyPresetPalette(t){this.color_palette!==n.CUSTOM&&(this.data.datasets=this.data.datasets.map((e=>{const s=e.data.map(((e,s)=>t[s%t.length]));return{...e,backgroundColor:s,hoverBackgroundColor:s,borderColor:s,hoverBorderColor:s}})))}componentDidUpdate(){this.data&&this.data.datasets.length&&this.initChart()}componentDidLoad(){this.data&&this.data.datasets.length&&this.initChart()}render(){return s(i,{key:"d4ef298003a26142fe541a88dd418a12880c39d5",style:{height:"100%",width:"100%"}},s("canvas",{key:"f79cb2c1ec79e70902c7af2045178d358bdf01c5",ref:t=>this.canvasEl=t,class:"w-full min-w-100 "+u[this.height]}))}},[512,"at-chart-donut",{data:[16],options:[16],height:[1],legend_position:[1],legend_format:[16],tooltip_options:[16],plugins:[16],color_palette:[1],center_value:[1],center_text:[1],cutout:[2],getConfig:[64],resize:[64]}]),m=f,g=function(){"undefined"!=typeof customElements&&["at-chart-donut"].forEach((t=>{"at-chart-donut"===t&&(customElements.get(o(t))||customElements.define(o(t),f))}))};export{m as AtChartDonut,g as defineCustomElement}