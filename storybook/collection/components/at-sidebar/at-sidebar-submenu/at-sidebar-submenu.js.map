{"version":3,"file":"at-sidebar-submenu.js","sourceRoot":"","sources":["../../../../src/components/at-sidebar/at-sidebar-submenu/at-sidebar-submenu.tsx"],"names":[],"mappings":"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","sourcesContent":["import {\n    Component,\n    h,\n    Host,\n    Prop,\n    State,\n    Listen,\n    Element,\n} from '@stencil/core';\n\n/**\n * @category Navigation\n * @description Display nested sub-menus in the atui-sidebar.\n * Sub-menu's can be collapsed via atui-accordion-item when the parent sidebar is expanded.\n * Submenu content is collapsed and hidden when the parent sidebar is collapsed.\n * Menu indent styling is supported up to 3 levels.\n *\n * @slot submenu-content - To place the atui-sidebar-menuitem(s) in the sub menu\n * @slot submenu-hover-content - To place the atui-sidebar-menuitem(s) in the sub menu on collapsed mode\n */\n@Component({\n    tag: 'at-sidebar-submenu',\n    shadow: false,\n})\nexport class AtSidebarSubmenuComponent {\n    /**\n     * Label to be displayed for the menu item\n     */\n    @Prop() label!: string;\n\n    /**\n     * Icon to be displayed with the label\n     */\n    @Prop() icon?: string;\n\n    /**\n     * Alert badge for the menu item\n     */\n    @Prop() badge?: string;\n\n    /**\n     * Will change the styling of the menuitem when set\n     */\n    @Prop() is_active?: boolean;\n\n    @State() isSidebarOpen: boolean = false;\n    @State() isAccordionOpen: boolean = false;\n    @State() atuiAccordionItem: HTMLAtAccordionItemElement;\n    @Element() el!: HTMLElement;\n\n    constructor() {\n        this.handleAtuiChange = this.handleAtuiChange.bind(this);\n    }\n\n    async componentDidLoad() {\n        await this.updateInitialStates();\n    }\n\n    async componentDidUpdate() {\n        await this.updateInitialStates();\n    }\n\n    private async updateInitialStates() {\n        const accordionItem = this.el.querySelector('at-accordion-item');\n        if (accordionItem) {\n            this.isAccordionOpen = await accordionItem.getIsOpen();\n        }\n\n        const parentSidebar = this.el.closest('at-sidebar');\n        if (parentSidebar) {\n            this.isSidebarOpen = await (parentSidebar as any).getIsOpen();\n        }\n    }\n\n    @Listen('atuiSidebarChange', { target: 'window' })\n    handleAtuiChange(event: CustomEvent<boolean>) {\n        const target = event.target as HTMLElement;\n\n        const parentSidebar = this.el.closest('at-sidebar');\n\n        if (target === parentSidebar) {\n            this.isSidebarOpen = event.detail;\n\n            if (!this.isSidebarOpen && this.atuiAccordionItem) {\n                this.atuiAccordionItem.closeAccordion();\n            }\n        }\n    }\n\n    @Listen('atuiAccordionChange', { target: 'window' })\n    handleAtuiAccordionChange(event: CustomEvent<boolean>) {\n        this.isAccordionOpen = event.detail;\n    }\n\n    private getIsActive() {\n        if (this.isSidebarOpen) {\n            return !this.isAccordionOpen && this.is_active;\n        }\n        return this.is_active;\n    }\n\n    render() {\n        return (\n            <Host>\n                <at-accordion-item\n                    class={!this.isSidebarOpen ? 'hidden' : ''}\n                    aria-hidden={!this.isSidebarOpen}\n                    ref={(el) => (this.atuiAccordionItem = el)}\n                    item_id=\"one\"\n                >\n                    {(this.label || this.icon) && (\n                        <at-sidebar-menuitem\n                            slot=\"accordion-trigger\"\n                            icon={this.icon}\n                            label={this.label}\n                            badge={this.badge}\n                            is_active={this.getIsActive()}\n                        >\n                            {this.isSidebarOpen && (\n                                <i\n                                    slot=\"menu-item-actions\"\n                                    role=\"presentation\"\n                                    aria-hidden=\"true\"\n                                    class=\"material-icons text-icon-md group-data-[state=expanded]/accordion-item:rotate-180\"\n                                >\n                                    keyboard_arrow_down\n                                </i>\n                            )}\n                        </at-sidebar-menuitem>\n                    )}\n\n                    <div class=\"font-normal\">\n                        <slot name=\"submenu-content\"></slot>\n                    </div>\n                </at-accordion-item>\n\n                <at-menu\n                    class={this.isSidebarOpen ? 'hidden' : 'w-menu'}\n                    aria-hidden={this.isSidebarOpen}\n                    trigger=\"hover\"\n                    position=\"right\"\n                    align=\"start\"\n                    width={this.isSidebarOpen ? '0' : 'w-menu'}\n                >\n                    <at-sidebar-menuitem\n                        slot=\"menu-trigger\"\n                        icon={this.icon}\n                        badge={this.badge}\n                        label={this.label}\n                        is_active={this.getIsActive()}\n                    ></at-sidebar-menuitem>\n                    <div class=\"font-normal\">\n                        <slot name=\"submenu-hover-content\"></slot>\n                    </div>\n                </at-menu>\n            </Host>\n        );\n    }\n}\n"]}