{"version":3,"file":"atui-time-with-unit.js","sourceRoot":"","sources":["../../../../src/components/atui-time-range/atui-time-with-unit/atui-time-with-unit.tsx"],"names":[],"mappings":"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","sourcesContent":["import {\n    Component,\n    h,\n    Prop,\n    State,\n    Element,\n    Watch,\n    Event,\n    EventEmitter,\n    Fragment,\n} from '@stencil/core';\nimport { TimeExtraOptions, TimeUnit, TimeWithUnit } from '../../../types/time';\nimport { TimePresets } from '../../../models/atui-time-range.models';\nimport { DateRange, TimeRangeDisplay } from '../../../types/date';\nimport { fetchTranslations } from '../../../utils/translation';\nimport { TimeDateUtil } from '../../../utils/time-date.util';\n\n/**\n * @category Form Controls\n * @description A time with unit component for selecting a time period.\n */\n\n@Component({\n    tag: 'atui-time-with-unit',\n    shadow: false,\n})\nexport class AtuiTimeWithUnitComponent {\n    /**\n     * Available time units for selection\n     */\n    @Prop()\n    units: TimeUnit[];\n\n    /**\n     * Common time preset options to display\n     */\n    @Prop()\n    common_options: TimePresets[];\n\n    /**\n     * Minimum date constraint for time selection\n     */\n    @Prop()\n    min_date: Date = null;\n\n    /**\n     * Minimum number of seconds allowed for time selection\n     */\n    @Prop()\n    min_seconds = 60;\n\n    /**\n     * Maximum number of seconds allowed for time selection\n     */\n    @Prop()\n    max_seconds: number = Number.MAX_SAFE_INTEGER;\n\n    /**\n     * Initial time selection value\n     */\n    @Prop()\n    initial_selected_time: TimeWithUnit | TimeRangeDisplay.ALL;\n\n    /**\n     * Custom error message to display when validation fails\n     */\n    @Prop()\n    custom_error_message = null;\n\n    /**\n     * Whether to show the 'All Time' option\n     */\n    @Prop()\n    show_all_time = false;\n\n    @State() errorText: string = '';\n    @State() secondaryErrorText: string = '';\n    @State() translations: any;\n    @State() dropdownOptions: (TimeUnit | TimeExtraOptions)[];\n    @State() timeValue: number;\n    @Watch('timeValue')\n    watchTimeValue() {\n        this.updateSelectedTime(this.timeValue);\n    }\n    @State() timeUnit: TimeUnit | TimeExtraOptions;\n    @Watch('timeUnit')\n    watchTimeUnit() {\n        this.updateSelectedTime(this.timeValue);\n    }\n    @State() selectedTime: TimeWithUnit | TimeRangeDisplay.ALL;\n    @State() startDate;\n    @Element() el;\n\n    async componentWillLoad() {\n        this.translations = await fetchTranslations(this.el);\n    }\n\n    componentWillRender() {\n        if (!this.selectedTime) {\n            this.initSelectedTime(this.initial_selected_time);\n            this.initDropdownOptions();\n        }\n    }\n\n    private initDropdownOptions(): void {\n        this.dropdownOptions = this.show_all_time\n            ? [TimeExtraOptions.ALL, ...this.units]\n            : this.units;\n    }\n\n    private initSelectedTime(\n        initialTimeRange: TimeWithUnit | TimeRangeDisplay.ALL,\n    ): void {\n        const unit =\n            typeof initialTimeRange === 'object'\n                ? TimeDateUtil.getCurrentOrDefaultUnit(\n                      initialTimeRange.unit,\n                      this.units,\n                  )\n                : TimeExtraOptions.ALL;\n        const value =\n            typeof initialTimeRange === 'object'\n                ? initialTimeRange.value\n                : null;\n\n        this.timeUnit = unit;\n        this.timeValue = value;\n        this.selectedTime = initialTimeRange;\n        this.startDate = this.getRelativeDate()?.startDate;\n    }\n\n    updateSelectedTime(value: number): void {\n        const unit = this.timeUnit;\n\n        if (unit !== TimeExtraOptions.ALL) {\n            this.selectedTime = { unit, value };\n        } else {\n            this.selectedTime = TimeRangeDisplay.ALL;\n            if (this.timeValue) {\n                this.timeValue = null;\n            }\n        }\n        this.validateInput();\n        this.startDate = this.getRelativeDate()?.startDate;\n    }\n\n    validateInput() {\n        if (this.selectedTime !== TimeRangeDisplay.ALL) {\n            const maxSeconds = this.min_date\n                ? TimeDateUtil.getSecondsAgoFromDate(this.min_date)\n                : this.max_seconds;\n            const maxTimeValue = TimeDateUtil.convertSecondsToUnit(\n                maxSeconds,\n                this.timeUnit,\n                0,\n                true,\n            );\n            const minTimeValue = TimeDateUtil.convertSecondsToUnit(\n                this.min_seconds,\n                this.timeUnit,\n                0,\n                false,\n            );\n            if (this.timeValue > maxTimeValue)\n                this.errorText = this.translations\n                    ? this.translations.ATUI.TIME.VALIDATION.MAX_NUMBER.replace(\n                          '{lowerThanValue}',\n                          `${maxTimeValue + 1} ${this.timeUnit}`,\n                      )\n                    : `Please enter a value lower than ${maxTimeValue} ${this.timeUnit}`;\n            else if (this.timeValue < minTimeValue)\n                this.errorText = this.translations\n                    ? this.translations.ATUI.TIME.VALIDATION.MIN_NUMBER.replace(\n                          '{min}',\n                          `${maxTimeValue} ${this.timeUnit}`,\n                      )\n                    : `Please enter a value larger than ${minTimeValue} ${this.timeUnit}`;\n            else this.errorText = '';\n            if (this.errorText && this.custom_error_message) {\n                this.secondaryErrorText = this.custom_error_message;\n            }\n        }\n    }\n\n    updateSelectedRange(value: TimeWithUnit): void {\n        this.timeUnit = value.unit;\n        this.timeValue = value.value;\n        this.selectedTime = value;\n    }\n\n    getRelativeDate(): DateRange {\n        if (typeof this.selectedTime === 'object') {\n            return TimeDateUtil.getRelativeDateRange(this.selectedTime);\n        }\n    }\n\n    clearSelection(): void {\n        if (typeof this.initial_selected_time === 'object') {\n            this.timeValue = this.initial_selected_time.value;\n            this.timeUnit = this.initial_selected_time.unit;\n        } else {\n            this.timeValue = null;\n            this.timeUnit = TimeExtraOptions.ALL;\n        }\n    }\n\n    /**\n     * Emitted when the user cancels the time selection\n     */\n    @Event() atuiCancel: EventEmitter<null>;\n    /**\n     * Emitted when the user submits the time selection\n     */\n    @Event() atuiSubmit: EventEmitter<TimeWithUnit | TimeRangeDisplay.ALL>;\n\n    handleCancel(): void {\n        this.atuiCancel.emit();\n    }\n\n    handleSubmit(): void {\n        if (this.errorText === '') {\n            this.atuiSubmit.emit(this.selectedTime);\n        }\n    }\n\n    handleSelectChange(event: CustomEvent): void {\n        const timeTranslationObject = this.translations.ATUI.TIME;\n        const newValue = event.detail;\n        this.timeUnit = (\n            this.translations\n                ? Object.keys(timeTranslationObject).find(\n                      (key) => timeTranslationObject[key] === newValue,\n                  )\n                : newValue\n        ) as TimeUnit;\n    }\n\n    render() {\n        return (\n            <div\n                class=\"flex w-panel-sm flex-col gap-16 border border-gray-300\"\n                onKeyUp={(event) =>\n                    (event.key === 'Enter' || event.key === ' ') &&\n                    this.handleSubmit()\n                }\n                tabindex={0}\n            >\n                <div class=\"flex flex-col gap-8 p-12\">\n                    <h5 class=\"text-h5 font-medium text-dark\">\n                        {this.translations.ATUI.TIME.SELECT_RELATIVE_TIME}\n                    </h5>\n                    <div class=\"flex flex-col gap-8\">\n                        <atui-input-numeric\n                            value={this.timeValue}\n                            onAtuiChange={(event) =>\n                                (this.timeValue = event.detail as number)\n                            }\n                        ></atui-input-numeric>\n                        <atui-select\n                            class=\"flex-fill\"\n                            value={this.translations.ATUI.TIME[this.timeUnit]}\n                            options={\n                                this.dropdownOptions\n                                    ? this.dropdownOptions.map(\n                                          (option) =>\n                                              this.translations.ATUI.TIME[\n                                                  option\n                                              ],\n                                      )\n                                    : null\n                            }\n                            onAtuiChange={(event) =>\n                                this.handleSelectChange(event)\n                            }\n                        />\n                    </div>\n\n                    {this.errorText ? (\n                        <Fragment>\n                            <span\n                                class=\"text-sm text-error\"\n                                data-name=\"time-with-unit-error\"\n                            >\n                                {this.errorText}\n                            </span>\n                            {this.secondaryErrorText && (\n                                <span\n                                    class=\"text-sm text-error\"\n                                    data-name=\"time-with-unit-error-secondary\"\n                                >\n                                    {this.secondaryErrorText}\n                                </span>\n                            )}\n                        </Fragment>\n                    ) : this.selectedTime !== TimeRangeDisplay.ALL ? (\n                        this.timeValue &&\n                        this.selectedTime?.unit && (\n                            <span class=\"text-sm font-normal text-med\">\n                                {this.startDate.toLocaleString()} ⁠— NOW\n                            </span>\n                        )\n                    ) : (\n                        this.selectedTime === TimeRangeDisplay.ALL && (\n                            <span class=\"text-sm font-normal text-med\">\n                                {this.translations.ATUI.TIME.ALL_TIME_LABEL}\n                            </span>\n                        )\n                    )}\n                </div>\n                {this.common_options && (\n                    <div class=\"flex flex-col gap-8 px-12\">\n                        <h5 class=\"text-h5 font-medium text-dark\">\n                            {this.translations.ATUI.TIME.COMMONLY_USED}\n                        </h5>\n                        <div\n                            class=\"columns-2\"\n                            data-name=\"time-with-unit-common-options\"\n                        >\n                            {this.common_options &&\n                                this.common_options.map((timerange) => (\n                                    <div\n                                        onClick={() =>\n                                            this.updateSelectedRange(timerange)\n                                        }\n                                        onKeyDown={(event) => {\n                                            event.stopPropagation();\n                                            if (\n                                                event.key === 'Enter' ||\n                                                event.key === ' '\n                                            )\n                                                this.updateSelectedRange(\n                                                    timerange,\n                                                );\n                                        }}\n                                        tabindex={0}\n                                        class={`${this.selectedTime !== TimeRangeDisplay.ALL && this.selectedTime?.value === timerange.value && this.selectedTime?.unit === timerange.unit ? 'bg-active-light px-4' : ''} cursor-pointer`}\n                                    >\n                                        <small>\n                                            {this.translations.ATUI.TIME.LAST}{' '}\n                                            {timerange.value}{' '}\n                                            {\n                                                this.translations.ATUI.TIME[\n                                                    timerange.unit\n                                                ]\n                                            }\n                                        </small>\n                                    </div>\n                                ))}\n                        </div>\n                    </div>\n                )}\n                <footer class=\"flex justify-between p-8\">\n                    <atui-button\n                        type=\"secondaryOutline\"\n                        data-name=\"clear\"\n                        label={this.translations.ATUI.RESET}\n                        onAtuiClick={() => this.clearSelection()}\n                    ></atui-button>\n\n                    <div class=\"flex gap-8\">\n                        <atui-button\n                            type=\"secondaryOutline\"\n                            data-name=\"cancel\"\n                            label={this.translations.ATUI.CANCEL}\n                            onAtuiClick={() => this.handleCancel()}\n                        ></atui-button>\n                        <atui-button\n                            data-name=\"apply\"\n                            label={this.translations.ATUI.APPLY}\n                            onAtuiClick={() => this.handleSubmit()}\n                        ></atui-button>\n                    </div>\n                </footer>\n            </div>\n        );\n    }\n}\n"]}