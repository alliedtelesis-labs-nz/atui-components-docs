{"version":3,"file":"atui-menu.js","sourceRoot":"","sources":["../../../src/components/atui-menu/atui-menu.tsx"],"names":[],"mappings":"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","sourcesContent":["import {\n    Component,\n    h,\n    Host,\n    Prop,\n    State,\n    Element,\n    Method,\n    Event,\n    EventEmitter,\n} from '@stencil/core';\nimport { cva } from 'class-variance-authority';\n\n/**\n * @category Actions\n * @description A versatile menu component for actions with keyboard support and positioning. Features auto-open behavior, customizable triggers, and accessible menu item management.\n */\n\nexport type Position = 'top' | 'bottom' | 'left' | 'right';\nexport type Align = 'start' | 'end';\nexport type OpenOn = 'hover' | 'click';\nexport type AriaRole = 'menu' | 'listbox';\n\nconst variants = cva(\n    'fixed z-menu w-full rounded-md border border-solid border-light bg-white p-4 shadow-md',\n    {\n        variants: {\n            open: {\n                true: null,\n                false: 'hidden',\n            },\n        },\n    },\n);\n\n@Component({\n    tag: 'atui-menu',\n    shadow: false,\n})\nexport class AtuiMenu {\n    /**\n     * Menu's x offset from edge in pixels. Only applied for origin_x = 'start' | 'end'\n     */\n    @Prop() offset_x: number = 0;\n\n    /**\n     * Menu's y offset from edge in pixels. Only applied for origin_y = 'top' | 'bottom'\n     */\n    @Prop() offset_y: number = 0;\n\n    /**\n     * Position of opened menu element relative to trigger element.\n     */\n    @Prop() position: Position = 'bottom';\n\n    /**\n     * Alignment of opened menu element relative to trigger element.\n     */\n    @Prop() align: Align = 'start';\n\n    /**\n     * String representing the 'width' style of the menu element ('auto' or 'NUMpx'). Use auto when you want the menu to inherit the host's width..\n     */\n    @Prop() width?: string = '280px';\n\n    /**\n     * Prevent closing of menu when options are selected. Used for multi-selection controls.\n     */\n    @Prop() autoclose: boolean = true;\n\n    /**\n     * Event type that triggers the menu open state. Click or Hover.\n     */\n    @Prop() trigger: OpenOn = 'click';\n\n    /**\n     * Close the menu when the user clicks within the menu panel. Default for single selection menus.\n     */\n    @Prop() role: AriaRole = 'menu';\n\n    /**\n     * Prevent opening menu\n     */\n    @Prop() disabled: boolean = false;\n\n    @State() isOpen = false;\n    @State() isIntersectingViewport = false;\n    @State() triggerPosition: DOMRect;\n    triggerEl: HTMLElement;\n    menuEl: HTMLElement;\n    private updatePosition = () => {\n        requestAnimationFrame(() => {\n            const trigger = this.triggerEl;\n            if (trigger) {\n                this.triggerPosition = trigger.getBoundingClientRect();\n            }\n        });\n    };\n\n    @Element() el: HTMLElement;\n\n    /**\n     * Toggles the dropdown menu's open state.\n     */\n    @Method()\n    async toggleMenu(): Promise<void> {\n        this.menuStateChange.emit(!this.isOpen);\n        this.isOpen = !this.isOpen;\n        this.updatePosition();\n    }\n\n    /**\n     * Toggles the dropdown menu's open state.\n     */\n    @Method()\n    async openMenu(): Promise<void> {\n        this.isOpen = true;\n        this.menuStateChange.emit(true);\n    }\n\n    /**\n     * Toggles the dropdown menu's open state.\n     */\n    @Method()\n    async closeMenu(): Promise<void> {\n        this.isOpen = false;\n        this.menuStateChange.emit(false);\n    }\n\n    /**\n     * Return the current menu open state\n     */\n    @Method()\n    async getIsOpen(): Promise<boolean> {\n        return this.isOpen;\n    }\n\n    /**\n     * Emits an event containing the open menu state.\n     */\n    @Event() menuStateChange: EventEmitter<boolean>;\n\n    private timedOutCloser;\n    private observer: IntersectionObserver;\n\n    componentDidLoad() {\n        this.updatePosition();\n        window.addEventListener('scroll', this.updatePosition, true);\n        window.addEventListener('resize', this.updatePosition);\n        window.addEventListener('click', this.handleOutsideClick);\n        this.initIntersectionObserver();\n    }\n\n    disconnectedCallback() {\n        window.removeEventListener('scroll', this.updatePosition, true);\n        window.removeEventListener('resize', this.updatePosition);\n        window.removeEventListener('click', this.handleOutsideClick);\n\n        if (this.observer) {\n            this.observer.disconnect();\n        }\n    }\n\n    private initIntersectionObserver(): void {\n        const options = {\n            root: null,\n            rootMargin: '0px',\n            threshold: 1.0,\n        };\n\n        this.observer = new IntersectionObserver((entries) => {\n            entries.forEach((entry) => {\n                if (!entry.isIntersecting) {\n                    this.isIntersectingViewport = true;\n                    this.positionStrategy(entry);\n                } else {\n                    this.isIntersectingViewport = false;\n                }\n            });\n        }, options);\n\n        const menuElement = this.el.querySelector(\n            '[data-name=\"menu-content-wrapper\"]',\n        );\n        if (menuElement) {\n            this.observer.observe(menuElement);\n        }\n    }\n\n    private positionStrategy(entry: IntersectionObserverEntry): void {\n        if (!this.isOpen) return;\n\n        const viewportWidth = window.innerWidth;\n        const viewportHeight = window.innerHeight;\n        const { top, right, left, height } = entry.boundingClientRect;\n\n        // TODO: VCOMPLIB-887: Improve menu positioning strategy\n\n        if (this.position === 'bottom' && top + height >= viewportHeight) {\n            this.position = 'top';\n        } else if (this.position === 'top' && top <= 0) {\n            this.position = 'bottom';\n        }\n        if (this.position === 'right' && right >= viewportWidth) {\n            this.position = 'left';\n        } else if (this.position === 'left' && left <= 0) {\n            this.position = 'right';\n        }\n    }\n\n    private mouseEnterHandler(): void {\n        if (this.timedOutCloser) clearTimeout(this.timedOutCloser);\n        if (!this.isOpen) {\n            this.isOpen = true;\n            this.menuStateChange.emit(true);\n            this.updatePosition();\n        }\n    }\n\n    private mouseLeaveHandler(): void {\n        this.timedOutCloser = setTimeout(() => {\n            this.isOpen = false;\n            this.menuStateChange.emit(false);\n        }, 150);\n    }\n\n    private handleOutsideClick = (event: MouseEvent) => {\n        if (this.isOpen && !this.el.contains(event.target as Node)) {\n            this.mouseLeaveHandler();\n        }\n    };\n\n    get positionStyle(): { [key: string]: string } {\n        const style: { [key: string]: string } = {};\n\n        const triggerRect = this.triggerEl?.getBoundingClientRect();\n        const menuRect = this.menuEl?.getBoundingClientRect();\n\n        if (!triggerRect) return style;\n\n        switch (this.position) {\n            case 'top':\n                style.top = `${triggerRect.top - menuRect.height}px`;\n                if (this.align === 'start') {\n                    style.left = `${triggerRect.left}px`;\n                } else {\n                    style.right = `${window.innerWidth - triggerRect.right}px`;\n                }\n                break;\n            case 'bottom':\n                style.top = `${triggerRect.bottom + this.offset_y}px`;\n                if (this.align === 'start') {\n                    style.left = `${triggerRect.left}px`;\n                } else {\n                    style.right = `${window.innerWidth - triggerRect.right - 8}px`;\n                }\n                break;\n            case 'left':\n                style.left = `${triggerRect.left - menuRect.width}px`;\n                if (this.align === 'start') {\n                    style.top = `${triggerRect.top}px`;\n                } else {\n                    style.bottom = `${window.innerHeight - triggerRect.bottom}px`;\n                }\n                break;\n            case 'right':\n                style.left = `${triggerRect.right + this.offset_x}px`;\n                if (this.align === 'start') {\n                    style.top = `${triggerRect.top}px`;\n                } else {\n                    style.bottom = `${window.innerHeight - triggerRect.bottom}px`;\n                }\n                break;\n        }\n\n        style.width = this.width;\n\n        return style;\n    }\n\n    render() {\n        const classname = variants({\n            open: this.isOpen,\n        });\n\n        return (\n            <Host>\n                <div\n                    class=\"relative\"\n                    onBlur={() =>\n                        this.trigger === 'click' && !this.disabled\n                            ? this.mouseLeaveHandler()\n                            : null\n                    }\n                >\n                    <div\n                        aria-haspopup=\"true\"\n                        data-name=\"menu-trigger\"\n                        ref={(el) => (this.triggerEl = el)}\n                        aria-expanded={`${this.isOpen ? 'true' : 'false'}`}\n                        onMouseEnter={() =>\n                            this.trigger === 'hover' && !this.disabled\n                                ? this.mouseEnterHandler()\n                                : null\n                        }\n                        onKeyDown={async (event) => {\n                            if (event.key === 'Escape') {\n                                await this.closeMenu();\n                            }\n                        }}\n                        onMouseLeave={() =>\n                            this.trigger === 'hover' && !this.disabled\n                                ? this.mouseLeaveHandler()\n                                : null\n                        }\n                        onClick={() =>\n                            this.trigger === 'click' && !this.disabled\n                                ? this.toggleMenu()\n                                : null\n                        }\n                        class={this.disabled ? 'contents' : ''}\n                    >\n                        <slot name=\"menu-trigger\" />\n                    </div>\n\n                    <div\n                        role={this.role}\n                        style={this.positionStyle}\n                        data-position={this.position}\n                        data-align={this.align}\n                        ref={(el) => (this.menuEl = el)}\n                        aria-hidden={`${this.isOpen ? 'false' : 'true'}`}\n                        onMouseEnter={() =>\n                            this.trigger === 'hover' &&\n                            !this.disabled &&\n                            this.mouseEnterHandler()\n                        }\n                        onMouseLeave={() =>\n                            this.trigger === 'hover' &&\n                            !this.disabled &&\n                            this.mouseLeaveHandler()\n                        }\n                        onKeyDown={(event) => {\n                            if (\n                                event.key === 'Enter' ||\n                                event.key === ' ' ||\n                                event.key === 'Escape'\n                            ) {\n                                if (this.autoclose) {\n                                    this.mouseLeaveHandler();\n                                }\n                            }\n                        }}\n                        onClick={() =>\n                            this.autoclose && this.mouseLeaveHandler()\n                        }\n                        class={classname}\n                        data-name=\"menu-content-wrapper\"\n                    >\n                        <slot name=\"menu-content\" />\n                    </div>\n                </div>\n            </Host>\n        );\n    }\n}\n"]}