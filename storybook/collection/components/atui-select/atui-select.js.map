{"version":3,"file":"atui-select.js","sourceRoot":"","sources":["../../../src/components/atui-select/atui-select.tsx"],"names":[],"mappings":"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","sourcesContent":["import {\n    Component,\n    Prop,\n    State,\n    Element,\n    h,\n    Host,\n    Event,\n    EventEmitter,\n} from '@stencil/core';\nimport { fetchTranslations } from '../../utils/translation';\nimport { cva } from 'class-variance-authority';\nimport { SelectOption } from '../../types/select';\nimport {\n    handleArrowNavigation,\n    handleHomeEndNavigation,\n} from '../../utils/keyboard-navigation';\n\nconst inputVariants = cva(\n    'height-[36px] transition[background-color,color,box-shadow] placeholder-text-light group/select:focus-within:ring-2 w-full cursor-pointer rounded-md border border-solid p-8 outline-0 duration-300 ease-in-out focus:ring-2',\n    {\n        variants: {\n            focused: {\n                false: 'ring-active-foreground/30',\n                true: 'pointer-events-none',\n            },\n            disabled: {\n                false: 'bg-white focus-within:ring-active-foreground/30',\n                true: 'pointer-events-none border-none bg-surface-1 !text-disabled',\n            },\n            readonly: {\n                false: 'focus-within:ring-active-foreground/30',\n                true: 'cursor-text border-none !bg-surface-1 !text-dark',\n            },\n            invalid: {\n                false: 'border-med focus-within:border-active-dark focus-within:ring-active-foreground/30',\n                true: 'border-error-base focus-within:border-error-base focus-within:ring-destructive-foreground/30',\n            },\n        },\n        defaultVariants: {\n            disabled: false,\n            readonly: false,\n            invalid: false,\n        },\n    },\n);\n\nconst optionVariants = cva(\n    'transition[background-color,color,box-shadow] flex w-full cursor-pointer items-center truncate p-8 text-body font-normal duration-300 ease-in-out focus:outline-0 focus:ring-2 focus:ring-inset focus:ring-active-foreground/40',\n    {\n        variants: {\n            active: {\n                true: 'bg-active-light text-active',\n                false: 'bg-white hover:bg-disabled-light',\n            },\n        },\n    },\n);\n\n/**\n * @category Form Controls\n * @description A dropdown selection component for choosing single values from a list of options. Features search functionality, keyboard navigation, and accessibility support.\n */\n@Component({\n    tag: 'atui-select',\n    shadow: false,\n})\nexport class AtuiSelectComponent {\n    /**\n     * Value of the currently selected option\n     */\n    @Prop({ mutable: true })\n    value: string;\n\n    /**\n     * Sets the options in the dropdown\n     */\n    @Prop()\n    options: SelectOption[];\n\n    /**\n     * Label of the input.\n     */\n    @Prop()\n    label?: string;\n\n    /**\n     * Short description or validation hint if required.\n     */\n    @Prop()\n    hint_text?: string;\n\n    /**\n     * Optional info icon with detailed tooltip description. Displayed at right of label.\n     */\n    @Prop()\n    info_text?: string;\n\n    /**\n     * Placeholder for the select.\n     */\n    @Prop()\n    placeholder?: string;\n\n    /**\n     * Error message visible when input is valid.\n     */\n    @Prop()\n    error_text?: string;\n\n    /**\n     * Indicated form field is required.\n     */\n    @Prop()\n    required?: boolean;\n\n    /**\n     * Set the input to appear valid.\n     */\n    @Prop()\n    invalid?: boolean;\n\n    /**\n     * Set input to readonly mode, allows users to select any active values.\n     */\n    @Prop()\n    readonly?: boolean;\n\n    /**\n     * Disable user interaction. Disabled state should be applied via form control.\n     */\n    @Prop()\n    disabled?: boolean;\n\n    /**\n     * Set the select input to be clearable. Only enabled on typeahead selects.\n     */\n    @Prop()\n    clearable?: boolean;\n\n    /**\n     * Set the select to appear as a typeahead input.\n     */\n    @Prop()\n    typeahead?: boolean = false;\n\n    /**\n     * Close the menu when the user clicks within the menu panel. Default for single selection menus.\n     */\n    @Prop()\n    autoclose?: boolean = true;\n\n    inputEl: HTMLInputElement;\n    @State() searchText: string = '';\n    @State() isOpen: boolean = false;\n    @State() translations: any;\n    @State() hasMatchingOptions: boolean = false;\n    @State() parentWidth: string;\n\n    @Element() el: HTMLElement;\n    private menuId = `dropdown-${Math.random().toString(36).substring(2, 11)}`;\n    private menuRef: HTMLAtuiMenuElement;\n    private optionEls: HTMLLIElement[] = [];\n\n    /**\n     * Emits an event containing the selected value when changed.\n     */\n    @Event()\n    atuiChange: EventEmitter<string>;\n\n    async componentWillLoad(): Promise<void> {\n        this.translations = await fetchTranslations(this.el);\n    }\n\n    componentDidLoad() {\n        this.el\n            .querySelectorAll('li[data-name=\"select-option\"]')\n            .forEach((option) => {\n                this.optionEls.push(option as HTMLLIElement);\n            });\n        const parentRect = this.el.getBoundingClientRect();\n        this.parentWidth = `${parentRect.width}px`;\n    }\n\n    private updateIsOpenState(event: CustomEvent<boolean>): void {\n        this.isOpen = event.detail;\n    }\n\n    private async handleChange(option: string): Promise<void> {\n        if (this.autoclose) {\n            await this.menuRef?.closeMenu();\n        }\n        this.value = option;\n        this.searchText = '';\n        this.inputEl.focus();\n        this.atuiChange.emit(this.value);\n    }\n\n    private async handleClear(): Promise<void> {\n        this.searchText = '';\n    }\n\n    private async handleKeyDownMenu(event: KeyboardEvent): Promise<void> {\n        if (event.key === 'Escape') {\n            event.preventDefault();\n            await this.menuRef.closeMenu();\n            this.inputEl.focus();\n            return;\n        }\n\n        if (event.key === 'Enter' || event.key === ' ') {\n            if (event.target instanceof HTMLLIElement) {\n                event.preventDefault();\n                event.target.click();\n            }\n            return;\n        }\n\n        if (event.key === 'Tab') {\n            return;\n        }\n\n        const menuContainer = this.el.querySelector(\n            'ul[id=\"atui-select\"]',\n        ) as HTMLElement;\n        if (!menuContainer) return;\n\n        handleArrowNavigation(event, menuContainer);\n        handleHomeEndNavigation(event, menuContainer);\n    }\n\n    render() {\n        return (\n            <Host\n                class=\"group/select\"\n                onFocusout={async (event: FocusEvent) => {\n                    await this.handleClear();\n                    const relatedTarget = event.relatedTarget as HTMLElement;\n                    if (\n                        !relatedTarget ||\n                        (!this.el.contains(relatedTarget) &&\n                            !relatedTarget.closest('[data-atui-menu-portal]'))\n                    ) {\n                        setTimeout(async () => {\n                            await this.menuRef?.closeMenu();\n                        }, 100);\n                    }\n                }}\n            >\n                {this.renderlabel()}\n                <atui-menu\n                    ref={(el) => (this.menuRef = el)}\n                    trigger=\"click\"\n                    align=\"start\"\n                    width={this.parentWidth}\n                    role=\"listbox\"\n                    portal={true}\n                    disabled={this.disabled || this.readonly}\n                    onAtuiMenuStateChange={(event) =>\n                        this.updateIsOpenState(event)\n                    }\n                >\n                    {this.renderInput()}\n                    {!this.disabled || !this.readonly\n                        ? this.renderOptions()\n                        : null}\n                </atui-menu>\n\n                <div>\n                    {this.error_text && this.invalid && (\n                        <span\n                            class=\"text-error\"\n                            data-name=\"select-error\"\n                        >\n                            {this.error_text}\n                        </span>\n                    )}\n                </div>\n            </Host>\n        );\n    }\n\n    renderlabel() {\n        return (\n            <div class=\"mb-4 flex flex-col\">\n                <slot name=\"label\" />\n                {(this.label || this.required || this.info_text) && (\n                    <atui-form-label\n                        for={this.menuId}\n                        label={this.label}\n                        required={this.required && !this.readonly}\n                        info_text={this.info_text}\n                    />\n                )}\n                {this.hint_text && (\n                    <span\n                        class=\"inline-block text-xs leading-tight text-light\"\n                        data-name=\"select-hint\"\n                    >\n                        {this.hint_text}\n                    </span>\n                )}\n            </div>\n        );\n    }\n\n    renderInput() {\n        const classname = inputVariants({\n            invalid: this.invalid,\n            disabled: this.disabled,\n            readonly: this.readonly,\n        });\n\n        return (\n            <div\n                class=\"relative flex items-center gap-4\"\n                slot=\"menu-trigger\"\n            >\n                <input\n                    class={classname}\n                    role=\"combobox\"\n                    list=\"atui-select\"\n                    autoComplete=\"off\"\n                    aria-autocomplete={this.typeahead ? 'list' : undefined}\n                    aria-expanded={this.isOpen}\n                    aria-controls={this.menuId}\n                    type=\"text\"\n                    readonly={true}\n                    disabled={this.disabled}\n                    placeholder={this.placeholder}\n                    value={this.value}\n                    onInput={(e: InputEvent) => e.preventDefault()}\n                    data-name=\"select-input\"\n                    ref={(el) => (this.inputEl = el)}\n                ></input>\n\n                {!this.readonly && !this.disabled && (\n                    <div\n                        class=\"user-select-none pointer-events-none absolute right-4 flex h-full items-center bg-transparent p-4 text-foreground\"\n                        role=\"presentation\"\n                        tabindex={-1}\n                    >\n                        <span\n                            class=\"material-icons h-16 w-16 text-[16px] leading-[16px]\"\n                            data-name=\"button-icon-right\"\n                        >\n                            {this.isOpen ? 'arrow_drop_up' : 'arrow_drop_down'}\n                        </span>\n                    </div>\n                )}\n            </div>\n        );\n    }\n\n    renderOptions() {\n        return (\n            <ul\n                slot=\"menu-content\"\n                class=\"contents\"\n                id=\"atui-select\"\n                onKeyDown={async (event) => {\n                    await this.handleKeyDownMenu(event);\n                }}\n            >\n                {this.typeahead && (\n                    <div class=\"relative z-10 bg-white p-4\">\n                        <input\n                            type=\"text\"\n                            class={`transition[background-color,color] mb-4 h-24 w-full flex-shrink flex-grow basis-0 rounded-md bg-surface-1 p-8 outline-0 ring-active-foreground/30 duration-300 ease-in-out focus:ring-2 ${\n                                this.clearable ? 'pr-24' : ''\n                            } `}\n                            placeholder=\"Search...\"\n                            value={this.searchText}\n                            onInput={(event) => {\n                                this.searchText = (\n                                    event.target as HTMLInputElement\n                                ).value.toLowerCase();\n                                const trimmedSearch = this.searchText\n                                    .trim()\n                                    .toLowerCase();\n                                this.hasMatchingOptions = trimmedSearch\n                                    ? this.options?.some((option) =>\n                                          option.value\n                                              .toLowerCase()\n                                              .includes(trimmedSearch),\n                                      )\n                                    : true;\n                            }}\n                            onClick={(e) => e.stopPropagation()}\n                        />\n\n                        {this.clearable && this.searchText !== '' && (\n                            <div class=\"absolute right-4 top-4\">\n                                <atui-button\n                                    size=\"sm\"\n                                    icon=\"cancel\"\n                                    type=\"secondaryText\"\n                                    onClick={(event) => {\n                                        event.stopPropagation();\n                                        this.handleClear();\n                                    }}\n                                    data-name=\"select-clear\"\n                                ></atui-button>\n                            </div>\n                        )}\n                    </div>\n                )}\n\n                {this.options\n                    ?.filter(\n                        (option) =>\n                            !this.searchText ||\n                            option.value\n                                .toLowerCase()\n                                .includes(this.searchText),\n                    )\n                    .map((option) => this.renderOption(option))}\n\n                {this.typeahead &&\n                    this.searchText &&\n                    !this.hasMatchingOptions && (\n                        <div class=\"w-full bg-white px-16 py-8 text-body text-light\">\n                            {this.translations?.ATUI?.NO_RESULTS_FOUND ||\n                                'No results found'}\n                        </div>\n                    )}\n            </ul>\n        );\n    }\n\n    renderOption(option: SelectOption) {\n        const classname = optionVariants({\n            active: this.value === option.value,\n        });\n\n        const isSelected = this.value === option.value;\n\n        return (\n            <li\n                role=\"option\"\n                value={option.value}\n                data-name=\"select-option\"\n                aria-selected={isSelected ? 'true' : 'false'}\n                tabIndex={0}\n                class={classname}\n                onClick={() => this.handleChange(option.value)}\n            >\n                {option.value}\n            </li>\n        );\n    }\n}\n"]}