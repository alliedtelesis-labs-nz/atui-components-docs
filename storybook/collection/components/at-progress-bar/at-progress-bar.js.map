{"version":3,"file":"at-progress-bar.js","sourceRoot":"","sources":["../../../src/components/at-progress-bar/at-progress-bar.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, h, Host, Prop, State, Watch } from '@stencil/core';\n\ntype Size = 'sm' | 'lg';\n\nexport type ProgressBarType = 'info' | 'success' | 'warning' | 'error';\n\nconst progressBarVariants = {\n    success: 'bg-success-base',\n    warning: 'bg-warning-base',\n    error: 'bg-destructive-foreground',\n    info: 'bg-info-foreground',\n};\n\nconst trackClass = 'bg-surface-2 rounded-[2px] overflow-hidden';\n\n/**\n * @category Data Visualization\n * @description A progress bar component for displaying percentage values or progress loading, with customizable colors and sizes.\n * @slot label-before - Placed before the progress bar to add custom label content.\n * @slot label-after - Placed after the progress bar to add custom label content.\n */\n@Component({\n    tag: 'at-progress-bar',\n    shadow: false,\n})\nexport class AtProgressBar {\n    /**\n     * Percentage value of the progress bar.\n     */\n    @Prop() percentage: number = 0;\n    /**\n     * Mode of the progress bar, either determinate or indeterminate (loading).\n     */\n    @Prop() mode?: 'determinate' | 'indeterminate' = 'determinate';\n\n    /**\n     * Type of the progress bar, which determines its color.\n     */\n    @Prop() type?: ProgressBarType = 'info';\n\n    /**\n     * Height of the progress bar\n     */\n    @Prop()\n    size?: Size = 'sm';\n\n    @State() private clamped: number = 0;\n\n    @Watch('percentage')\n    onPercentageChange() {\n        this.clampPercentage();\n    }\n\n    componentWillLoad() {\n        this.clampPercentage();\n    }\n\n    private clampPercentage() {\n        const n = Number(this.percentage);\n        if (Number.isFinite(n)) {\n            this.clamped = Math.min(100, Math.max(0, n));\n            console.log('Clamped percentage:', this.clamped);\n        } else {\n            this.clamped = 0;\n        }\n    }\n\n    get statusBarClass(): string {\n        return `${this.size === 'lg' ? 'h-[16px]' : 'h-8'} flex items-stretch rounded-[2px] overflow-hidden`;\n    }\n\n    get segments(): string {\n        return `flex flex-grow items-stretch justify-center transition-all duration-500`;\n    }\n\n    renderIndeterminate() {\n        return (\n            <Host\n                role=\"progressbar\"\n                aria-busy=\"true\"\n                aria-valuemin=\"0\"\n                aria-valuemax=\"100\"\n                class={`${this.statusBarClass} overflow-hidden`}\n            >\n                <slot name=\"label-before\" />\n                <div class={`relative h-full w-full ${trackClass}`}>\n                    <div\n                        class={`${progressBarVariants[this.type]} motion-safe:animate-progress-left absolute top-0 h-full`}\n                        style={{\n                            width: '30%',\n                            left: '-30%',\n                            willChange: 'left',\n                        }}\n                        aria-hidden=\"true\"\n                    />\n                </div>\n                <slot name=\"label-after\" />\n            </Host>\n        );\n    }\n\n    renderDeterminate() {\n        const background = 100 - this.clamped;\n        const fill = this.clamped;\n        return (\n            <Host\n                role=\"progressbar\"\n                aria-busy=\"true\"\n                aria-valuemin=\"0\"\n                aria-valuemax=\"100\"\n                class={this.statusBarClass}\n            >\n                <slot name=\"label-before\" />\n                <div class=\"flex w-full flex-1 items-stretch justify-start overflow-visible\">\n                    <div\n                        class={`${this.segments} ${progressBarVariants[this.type]}`}\n                        style={{\n                            flexBasis: fill.toString() + '%',\n                        }}\n                        aria-hidden=\"true\"\n                    ></div>\n                    <div\n                        class={` ${this.segments} ${trackClass}`}\n                        style={{\n                            flexBasis: background.toString() + '%',\n                        }}\n                        aria-hidden=\"true\"\n                    ></div>\n                </div>\n                <slot name=\"label-after\" />\n            </Host>\n        );\n    }\n\n    render() {\n        return this.mode === 'indeterminate'\n            ? this.renderIndeterminate()\n            : this.renderDeterminate();\n    }\n}\n"]}