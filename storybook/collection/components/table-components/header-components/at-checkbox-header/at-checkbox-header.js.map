{"version":3,"file":"at-checkbox-header.js","sourceRoot":"","sources":["../../../../../src/components/table-components/header-components/at-checkbox-header/at-checkbox-header.tsx"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,CAAC,EAAE,KAAK,EAAE,OAAO,EAAE,MAAM,eAAe,CAAC;AAG7D;;;GAGG;AAMH,MAAM,OAAO,yBAAyB;IACzB,MAAM,CAAC;IACP,QAAQ,CAAU;IAClB,SAAS,CAAU;IACjB,EAAE,CAA8B;IAE3C,IAAI,CAAC,MAAM;QACP,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,EAAE,CAAC;QACvB,IAAI,CAAC,WAAW,EAAE,CAAC;QAEnB,MAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,gBAAgB,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;QACjE,MAAM,YAAY,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC,OAAgB,EAAE,EAAE;YACnD,OAAO,OAAO,OAAO,CAAC,IAAI,KAAK,SAAS;gBACpC,CAAC,CAAC,OAAO,CAAC,IAAI;gBACd,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;QACjD,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC,MAAM,IAAI,KAAK,CAAC,MAAM,KAAK,YAAY,CAAC,MAAM,CAAC;IAC1E,CAAC;IAED,MAAM;QACF,OAAO,IAAI,CAAC,EAAE,CAAC;IACnB,CAAC;IAED,OAAO,CAAC,MAAM;QACV,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,WAAW,EAAE,CAAC;QACnB,OAAO,IAAI,CAAC;IAChB,CAAC;IAED,YAAY,CAAC,OAAgB;QACzB,IAAI,OAAO,KAAK,SAAS,EAAE,CAAC;YACxB,MAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,gBAAgB,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;YACjE,KAAK,CAAC,OAAO,CAAC,CAAC,OAAgB,EAAE,EAAE;gBAC/B,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;YAC5D,CAAC,CAAC,CAAC;QACP,CAAC;IACL,CAAC;IAEO,WAAW;QACf,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG;YAAE,OAAO;QAE9B,MAAM,aAAa,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,gBAAgB,EAAE,CAAC;QACzD,MAAM,IAAI,GAAU,aAAa,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC3D,IAAI,IAAI,CAAC,MAAM,CAAC,WAAW,KAAK,SAAS,EAAE,CAAC;YACxC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;QAClD,CAAC;IACL,CAAC;IAED,MAAM;QACF,OAAO,CACH,oEACI,QAAQ,EAAE,IAAI,CAAC,QAAQ,EACvB,KAAK,EAAE,IAAI,CAAC,SAAS,EACrB,YAAY,EAAE,CAAC,KAAkB,EAAE,EAAE,CACjC,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,MAAM,CAAC,GAExB,CAClB,CAAC;IACN,CAAC;;;;;;;;CACJ","sourcesContent":["import { Component, h, State, Element } from '@stencil/core';\nimport { ICellRendererComp, RowNode } from 'ag-grid-community';\n\n/**\n * @category Table Cell\n * @description A header component for displaying a checkbox.\n */\n\n@Component({\n    tag: 'at-checkbox-header',\n    shadow: false,\n})\nexport class AtCheckboxHeaderComponent implements ICellRendererComp {\n    @State() params;\n    @State() disabled: boolean;\n    @State() isChecked: boolean;\n    @Element() el: HTMLAtCheckboxHeaderElement;\n\n    init(params) {\n        this.params = params;\n        this.params.width = 60;\n        this.setDisabled();\n\n        const nodes = this.params.api.getRenderedNodes().filter(Boolean);\n        const checkedNodes = nodes.filter((rowNode: RowNode) => {\n            return typeof rowNode.data === 'boolean'\n                ? rowNode.data\n                : rowNode.data[this.params.column.colId];\n        });\n        this.isChecked = nodes.length && nodes.length === checkedNodes.length;\n    }\n\n    getGui(): HTMLAtCheckboxHeaderElement {\n        return this.el;\n    }\n\n    refresh(params): boolean {\n        this.params = params;\n        this.setDisabled();\n        return true;\n    }\n\n    setRowsValue(checked: boolean): void {\n        if (checked !== undefined) {\n            const nodes = this.params.api.getRenderedNodes().filter(Boolean);\n            nodes.forEach((rowNode: RowNode) => {\n                rowNode.setDataValue(this.params.column.colId, checked);\n            });\n        }\n    }\n\n    private setDisabled(): void {\n        if (!this.params?.api) return;\n\n        const renderedNodes = this.params.api.getRenderedNodes();\n        const data: any[] = renderedNodes.map((node) => node.data);\n        if (this.params.getDisabled !== undefined) {\n            this.disabled = this.params.getDisabled(data);\n        }\n    }\n\n    render() {\n        return (\n            <at-checkbox\n                disabled={this.disabled}\n                value={this.isChecked}\n                onAtuiChange={(event: CustomEvent) =>\n                    this.setRowsValue(event.detail)\n                }\n            ></at-checkbox>\n        );\n    }\n}\n"]}