{"version":3,"file":"at-prompt-message.entry.cjs.js","sources":["src/components/prompt-components/at-prompt-message/at-prompt-message.scss?tag=at-prompt-message","src/components/prompt-components/at-prompt-message/at-prompt-message.tsx"],"sourcesContent":["@keyframes atPromptFadeIn {\n    from {\n        opacity: 0;\n    }\n    to {\n        opacity: 1;\n    }\n}\n\n@keyframes atPromptTypingCursorBlink {\n    0%,\n    50% {\n        opacity: 1;\n    }\n    51%,\n    100% {\n        opacity: 0;\n    }\n}\n\n.at-prompt-fade-in {\n    animation: atPromptFadeIn 0.6s ease-out;\n}\n","import {\n    Component,\n    Element,\n    Event,\n    EventEmitter,\n    Fragment,\n    h,\n    Host,\n    Prop,\n    State,\n    Watch,\n} from '@stencil/core';\nimport { classlist } from '../../../utils/classlist';\nimport { fetchTranslations } from '../../../utils/translation';\nimport {\n    PromptResponseAnimation,\n    PromptResponseScore,\n    PromptUserRole,\n} from '../../../types';\n\nconst messageVariantsConfig = {\n    variants: {\n        role: {\n            user: 'bg-surface-2 text-dark ml-auto inline-block p-8',\n            assistant: 'text-dark mr-auto',\n            system: 'text-dark mr-auto',\n        },\n        loading: {\n            true: 'animate-pulse',\n            false: '',\n        },\n    },\n    defaultVariants: {\n        role: 'user',\n        loading: false,\n    },\n};\n\nconst getMessageClasses = classlist(\n    'rounded-lg py-4 text-base',\n    messageVariantsConfig,\n);\n\n/**\n * @category Prompt\n * @description A message component for displaying individual chat messages with different roles (user, assistant). Supports optional avatars, loading states, error states, and interactive actions like copy, edit, and retry.\n * @slot - Custom message content (alternative to using the content prop)\n */\n@Component({\n    tag: 'at-prompt-message',\n    shadow: false,\n    styleUrl: 'at-prompt-message.scss',\n})\nexport class AtPromptMessage {\n    /**\n     * The role/type of the message sender (only 'user' and 'assistant' are supported)\n     */\n    @Prop() role: PromptUserRole = 'user';\n\n    /**\n     * The message content text\n     */\n    @Prop() content: string = '';\n\n    /**\n     * Display name for the message sender\n     */\n    @Prop() name: string;\n\n    /**\n     * Shows loading state with animated placeholder content\n     */\n    @Prop() loading: boolean = false;\n\n    /**\n     * Shows error state styling and enables retry action\n     */\n    @Prop() error: boolean = false;\n\n    /**\n     * Custom error message text (defaults to generic error message)\n     */\n    @Prop() error_message: string;\n\n    /**\n     * The current vote score of the message\n     */\n    @Prop() score: PromptResponseScore = PromptResponseScore.NONE;\n\n    /**\n     * Display voting actions for assistant messages\n     */\n    @Prop() enable_vote: boolean = false;\n\n    /**\n     * Display copy action for assistant messages - copies message content to clipboard\n     */\n    @Prop() enable_copy: boolean = false;\n\n    /**\n     * Display edit action for user messages\n     */\n    @Prop() enable_edit: boolean = false;\n\n    /**\n     * Unique identifier for the message\n     */\n    @Prop() message_id: string;\n\n    /**\n     * Animation type for text streaming effect\n     * - 'none': No animation (default)\n     * - 'fade': Fade in the entire message\n     * - 'words': Animate words appearing sequentially\n     */\n    @Prop() response_animation: PromptResponseAnimation = 'words';\n\n    /**\n     * Emitted when the copy action is triggered\n     */\n    @Event() atCopy: EventEmitter<string>;\n\n    /**\n     * Emitted when a vote action is triggered\n     */\n    @Event() atVote: EventEmitter<{ messageId: string; score: number }>;\n\n    /**\n     * Emitted when the retry action is triggered (for assistant messages with errors)\n     */\n    @Event() atRetry: EventEmitter<void>;\n\n    /**\n     * Emitted when the edit action is triggered (for user messages)\n     */\n    @Event() atEdit: EventEmitter<string>;\n\n    @State() translations: any;\n    @State() copyFeedbackVisible: boolean = false;\n    @State() animatedContent: string = '';\n    @State() isAnimating: boolean = false;\n    errorEl: HTMLDivElement;\n    @Element() el: HTMLAtInputElement;\n\n    async componentWillLoad() {\n        this.translations = await fetchTranslations(this.el);\n        this.initializeContent();\n    }\n\n    @Watch('content')\n    watchContentChange(newContent: string) {\n        if (\n            newContent &&\n            this.response_animation === 'words' &&\n            this.role === 'assistant'\n        ) {\n            this.startWordAnimation(newContent);\n        } else {\n            this.animatedContent = newContent;\n        }\n    }\n\n    private initializeContent() {\n        if (\n            this.content &&\n            this.response_animation === 'words' &&\n            this.role === 'assistant'\n        ) {\n            this.startWordAnimation(this.content);\n        } else {\n            this.animatedContent = this.content;\n        }\n    }\n\n    private startWordAnimation(content: string) {\n        if (this.isAnimating) return;\n\n        this.isAnimating = true;\n        this.animatedContent = '';\n\n        const words = content.split(' ');\n        let currentWordIndex = 0;\n\n        const animateNextWord = () => {\n            if (currentWordIndex < words.length) {\n                if (currentWordIndex === 0) {\n                    this.animatedContent = words[currentWordIndex];\n                } else {\n                    this.animatedContent += ' ' + words[currentWordIndex];\n                }\n                currentWordIndex++;\n\n                const delay = Math.random() * 30 + 30;\n                setTimeout(animateNextWord, delay);\n            } else {\n                this.isAnimating = false;\n            }\n        };\n\n        setTimeout(animateNextWord, 30);\n    }\n\n    private handleCopy = async () => {\n        try {\n            await navigator.clipboard.writeText(this.content);\n            this.copyFeedbackVisible = true;\n            this.atCopy.emit(this.content);\n\n            setTimeout(() => {\n                this.copyFeedbackVisible = false;\n            }, 2000);\n        } catch (err) {\n            console.error('Failed to copy text:', err);\n        }\n    };\n\n    private handleRetry = () => {\n        this.atRetry.emit();\n    };\n\n    private handleEdit = () => {\n        this.atEdit.emit(this.content);\n    };\n\n    private handleVote = (score: number) => {\n        const newScore =\n            this.score === score ? PromptResponseScore.NONE : score;\n        this.atVote.emit({ messageId: this.message_id, score: newScore });\n    };\n\n    private renderActions() {\n        if (this.loading) return null;\n\n        return (\n            <div\n                class=\"mt-2 flex items-center justify-end gap-2\"\n                data-name=\"message-actions\"\n            >\n                {this.role === 'user' && this.enable_edit && (\n                    <at-tooltip position=\"top\">\n                        <at-button\n                            slot=\"tooltip-trigger\"\n                            size=\"sm\"\n                            type=\"secondaryText\"\n                            icon=\"edit\"\n                            class=\"text-xs\"\n                            onClick={this.handleEdit}\n                            data-name=\"edit-button\"\n                        />\n                        <span>\n                            {this.translations?.ATUI?.PROMPT?.EDIT || 'Edit'}\n                        </span>\n                    </at-tooltip>\n                )}\n\n                {this.role === 'assistant' && this.enable_vote && (\n                    <Fragment>\n                        <at-tooltip position=\"top\">\n                            <at-button\n                                slot=\"tooltip-trigger\"\n                                size=\"sm\"\n                                type=\"secondaryText\"\n                                onClick={() =>\n                                    this.handleVote(PromptResponseScore.UP)\n                                }\n                                data-name=\"vote-up-button\"\n                            >\n                                {this.score === PromptResponseScore.UP ? (\n                                    <svg\n                                        xmlns=\"http://www.w3.org/2000/svg\"\n                                        height=\"15px\"\n                                        viewBox=\"0 -960 960 960\"\n                                        width=\"15px\"\n                                        fill=\"#000000\"\n                                    >\n                                        <path d=\"M720-144H264v-480l288-288 32 22q18 13 26.5 33t3.5 41l-38 192h264q30 0 51 21t21 51v57q0 8-1.5 14.5T906-467L787-188q-9 20-27 32t-40 12Z\" />\n                                    </svg>\n                                ) : (\n                                    <svg\n                                        xmlns=\"http://www.w3.org/2000/svg\"\n                                        height=\"15px\"\n                                        viewBox=\"0 -960 960 960\"\n                                        width=\"15px\"\n                                        fill=\"#adb5bd\"\n                                    >\n                                        <path d=\"M720-144H264v-480l288-288 32 22q17 12 26 30.5t5 38.5l-1 5-38 192h264q30 0 51 21t21 51v57q0 8-1.5 14.5T906-467L786.93-187.8Q778-168 760-156t-40 12Zm-384-72h384l120-279v-57H488l49-243-201 201v378Zm0-378v378-378Z\" />\n                                    </svg>\n                                )}\n                            </at-button>\n                            <span>\n                                {this.translations?.ATUI?.PROMPT?.HELPFUL ||\n                                    'Helpful'}\n                            </span>\n                        </at-tooltip>\n\n                        <at-tooltip position=\"top\">\n                            <at-button\n                                slot=\"tooltip-trigger\"\n                                size=\"sm\"\n                                type=\"secondaryText\"\n                                onClick={() =>\n                                    this.handleVote(PromptResponseScore.DOWN)\n                                }\n                                data-name=\"vote-down-button\"\n                            >\n                                {this.score === PromptResponseScore.DOWN ? (\n                                    <svg\n                                        xmlns=\"http://www.w3.org/2000/svg\"\n                                        height=\"15px\"\n                                        viewBox=\"0 -960 960 960\"\n                                        width=\"15px\"\n                                        fill=\"#000000\"\n                                    >\n                                        <path d=\"M240-816h456v480L408-48l-32-22q-18-13-26.5-33t-3.5-41l38-192H120q-30 0-51-21t-21-51v-57q0-8 1.5-14.5T54-493l119-279q8-20 26.5-32t40.5-12Z\" />\n                                    </svg>\n                                ) : (\n                                    <svg\n                                        xmlns=\"http://www.w3.org/2000/svg\"\n                                        width=\"15px\"\n                                        viewBox=\"0 -960 960 960\"\n                                        height=\"15px\"\n                                        fill=\"#adb5bd\" // token-border-dark\n                                    >\n                                        <path d=\"M240-816h456v480L408-48l-32-22q-17-12-26-30.5t-5-38.5l1-5 38-192H120q-30 0-51-21t-21-51v-57q0-8 1.5-14.5T54-493l119-279q8-20 26.5-32t40.5-12Zm384 72H240L120-465v57h352l-49 243 201-201v-378Zm0 378v-378 378Z\" />\n                                    </svg>\n                                )}\n                            </at-button>\n                            <span>\n                                {this.translations?.ATUI?.PROMPT?.NOT_HELPFUL ||\n                                    'Not Helpful'}\n                            </span>\n                        </at-tooltip>\n                    </Fragment>\n                )}\n\n                {this.role === 'assistant' && this.enable_copy && (\n                    <at-tooltip position=\"top\">\n                        <at-button\n                            slot=\"tooltip-trigger\"\n                            size=\"sm\"\n                            icon={\n                                this.copyFeedbackVisible\n                                    ? 'check'\n                                    : 'content_copy'\n                            }\n                            type=\"secondaryText\"\n                            onClick={this.handleCopy}\n                            data-name=\"copy-button\"\n                        />\n                        <span>\n                            {this.copyFeedbackVisible\n                                ? this.translations?.ATUI?.PROMPT?.COPIED ||\n                                  'Copied'\n                                : this.translations?.ATUI?.PROMPT?.COPY ||\n                                  'Copy'}\n                        </span>\n                    </at-tooltip>\n                )}\n\n                {this.role === 'assistant' && this.error && (\n                    <at-tooltip position=\"top\">\n                        <at-button\n                            slot=\"tooltip-trigger\"\n                            size=\"sm\"\n                            type=\"secondaryText\"\n                            icon=\"refresh\"\n                            onClick={this.handleRetry}\n                            data-name=\"retry-button\"\n                        />\n                        <span>\n                            {this.translations?.ATUI?.PROMPT?.RETRY || 'Retry'}\n                        </span>\n                    </at-tooltip>\n                )}\n            </div>\n        );\n    }\n\n    private renderContent() {\n        if (this.loading) {\n            return (\n                <div\n                    class=\"py-8\"\n                    data-name=\"loading-wrapper\"\n                >\n                    <at-loading\n                        class=\"flex items-center gap-4 py-8\"\n                        data-name=\"loading-content\"\n                        variant=\"typing\"\n                        size=\"sm\"\n                    />\n                </div>\n            );\n        }\n\n        if (this.error) {\n            return (\n                <div\n                    class=\"space-y-2\"\n                    ref={(el) => (this.errorEl = el)}\n                    data-name=\"error-content\"\n                >\n                    <p class=\"text-destructive-foreground\">\n                        {this.error_message ||\n                            this.translations?.ATUI?.PROMPT\n                                ?.ERROR_GENERATING_RESPONSE ||\n                            'Error generating response'}\n                    </p>\n                </div>\n            );\n        }\n\n        const contentToDisplay =\n            this.response_animation === 'words' && this.role === 'assistant'\n                ? this.animatedContent\n                : this.content;\n\n        const animationClass =\n            this.response_animation === 'fade' ||\n            this.response_animation === 'words'\n                ? 'at-prompt-fade-in'\n                : '';\n\n        return (\n            <div\n                class={`prose prose-sm preserve-newlines max-w-none ${animationClass}`}\n                data-name=\"message-content\"\n            >\n                <slot></slot>\n                {contentToDisplay}\n            </div>\n        );\n    }\n\n    render() {\n        const messageClasses = getMessageClasses({\n            role: this.role,\n            loading: this.loading,\n        });\n\n        return (\n            <Host\n                class=\"flex w-full gap-8\"\n                data-name=\"message-container\"\n                data-role={this.role}\n            >\n                <div class=\"flex flex-1 flex-col\">\n                    {this.name && (\n                        <span\n                            class=\"text-light self-start text-sm\"\n                            data-name=\"message-name\"\n                        >\n                            {this.name}\n                        </span>\n                    )}\n\n                    <div class={messageClasses}>{this.renderContent()}</div>\n\n                    {this.renderActions()}\n                </div>\n            </Host>\n        );\n    }\n}\n"],"names":["classlist","PromptResponseScore","fetchTranslations","h","Fragment","Host"],"mappings":"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"}