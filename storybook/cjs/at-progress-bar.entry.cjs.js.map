{"version":3,"file":"at-progress-bar.entry.cjs.js","sources":["src/components/at-progress-bar/at-progress-bar.tsx"],"sourcesContent":["import { Component, h, Host, Prop, State, Watch } from '@stencil/core';\n\ntype Size = 'sm' | 'lg';\n\nexport type ProgressBarType = 'info' | 'success' | 'warning' | 'error';\n\nconst progressBarVariants = {\n    success: 'bg-success-base',\n    warning: 'bg-warning-base',\n    error: 'bg-destructive-foreground',\n    info: 'bg-info-foreground',\n};\n\nconst trackClass = 'bg-surface-2 rounded-[2px] overflow-hidden';\n\n/**\n * @category Data Visualization\n * @description A progress bar component for displaying percentage values or progress loading, with customizable colors and sizes.\n * @slot label-before - Placed before the progress bar to add custom label content.\n * @slot label-after - Placed after the progress bar to add custom label content.\n */\n@Component({\n    tag: 'at-progress-bar',\n    shadow: false,\n})\nexport class AtProgressBar {\n    /**\n     * Percentage value of the progress bar.\n     */\n    @Prop() percentage: number = 0;\n    /**\n     * Mode of the progress bar, either determinate or indeterminate (loading).\n     */\n    @Prop() mode?: 'determinate' | 'indeterminate' = 'determinate';\n\n    /**\n     * Type of the progress bar, which determines its color.\n     */\n    @Prop() type?: ProgressBarType = 'info';\n\n    /**\n     * Height of the progress bar\n     */\n    @Prop()\n    size?: Size = 'sm';\n\n    @State() private clamped: number = 0;\n\n    @Watch('percentage')\n    onPercentageChange() {\n        this.clampPercentage();\n    }\n\n    componentWillLoad() {\n        this.clampPercentage();\n    }\n\n    private clampPercentage() {\n        const n = Number(this.percentage);\n        if (Number.isFinite(n)) {\n            this.clamped = Math.min(100, Math.max(0, n));\n            console.log('Clamped percentage:', this.clamped);\n        } else {\n            this.clamped = 0;\n        }\n    }\n\n    get statusBarClass(): string {\n        return `${this.size === 'lg' ? 'h-[16px]' : 'h-8'} flex items-stretch rounded-[2px] overflow-hidden`;\n    }\n\n    get segments(): string {\n        return `flex flex-grow items-stretch justify-center transition-all duration-500`;\n    }\n\n    renderIndeterminate() {\n        return (\n            <Host\n                role=\"progressbar\"\n                aria-busy=\"true\"\n                aria-valuemin=\"0\"\n                aria-valuemax=\"100\"\n                class={`${this.statusBarClass} overflow-hidden`}\n            >\n                <slot name=\"label-before\" />\n                <div class={`relative h-full w-full ${trackClass}`}>\n                    <div\n                        class={`${progressBarVariants[this.type]} motion-safe:animate-progress-left absolute top-0 h-full`}\n                        style={{\n                            width: '30%',\n                            left: '-30%',\n                            willChange: 'left',\n                        }}\n                        aria-hidden=\"true\"\n                    />\n                </div>\n                <slot name=\"label-after\" />\n            </Host>\n        );\n    }\n\n    renderDeterminate() {\n        const background = 100 - this.clamped;\n        const fill = this.clamped;\n        return (\n            <Host\n                role=\"progressbar\"\n                aria-busy=\"true\"\n                aria-valuemin=\"0\"\n                aria-valuemax=\"100\"\n                class={this.statusBarClass}\n            >\n                <slot name=\"label-before\" />\n                <div class=\"flex w-full flex-1 items-stretch justify-start overflow-visible\">\n                    <div\n                        class={`${this.segments} ${progressBarVariants[this.type]}`}\n                        style={{\n                            flexBasis: fill.toString() + '%',\n                        }}\n                        aria-hidden=\"true\"\n                    ></div>\n                    <div\n                        class={` ${this.segments} ${trackClass}`}\n                        style={{\n                            flexBasis: background.toString() + '%',\n                        }}\n                        aria-hidden=\"true\"\n                    ></div>\n                </div>\n                <slot name=\"label-after\" />\n            </Host>\n        );\n    }\n\n    render() {\n        return this.mode === 'indeterminate'\n            ? this.renderIndeterminate()\n            : this.renderDeterminate();\n    }\n}\n"],"names":["h","Host"],"mappings":"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"}