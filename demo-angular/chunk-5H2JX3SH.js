import{b as m,d as r,e as b,j as C,k as _,l as v,p as l,q as A}from"./chunk-AUZXF75R.js";import"./chunk-IB57YH4K.js";import"./chunk-T4ZXHZ4L.js";import{a as O,b as h,c as T}from"./chunk-WNQGRM7V.js";import{h as x}from"./chunk-B7O3QC5Z.js";var P="#0f172a",j={xs:"h-[70px]",sm:"h-[160px]",md:"h-[235px]",lg:"h-[330px]",xl:"h-[440px]",auto:"h-full"},S=class{constructor(t){O(this,t),this.height="md",this.legend_format={labels:{boxWidth:10,boxHeight:10,fontSize:11},onHover:e=>{e.native&&(e.native.target.style.cursor="pointer")},display:!0},this.tooltip_options={mode:"index",intersect:!1,position:"nearest"},this.color_palette=l.CATEGORICAL,this.cutout=70,this.defaultPieTooltipOptions={mode:"index",intersect:!0,position:"nearest",animation:{duration:150}}}getConfig(){return x(this,null,function*(){return this.config})}getDrawCenterTextPlugin(){return{id:"DrawCenterTextPlugin",afterDatasetDraw:t=>{let e=(t.chartArea.left+t.chartArea.right)/2,s=(t.chartArea.top+t.chartArea.bottom)/2,i=t.ctx;if(!i)return;i.restore();let a=t.chartArea.bottom-t.chartArea.top,c=(a/250).toFixed(2)+"em sans-serif",d=(a/180).toFixed(2)+"em sans-serif";i.fillStyle=P,i.textAlign="center",i.textBaseline="middle",i.font="500 "+d;let n=(D,g,y,o,p)=>{i.font="500 "+D;let u=i.measureText(g),f=u.actualBoundingBoxAscent+u.actualBoundingBoxDescent;p!="middle"&&(o=p==="top"?o-f:o+f),i.fillText(g,y,o)};this.center_value?(n(d,this.center_value,e,s,"top"),n(c,this.center_text,e,s,"bottom")):this.center_text&&n(c,this.center_text,e,s,"middle"),i.save()}}}initChart(){r.register(m,b,_,v,C);let t=A(this.color_palette);t&&this.applyPresetPalette(t);let e=this.plugins?[...this.plugins]:[];(this.center_text||this.center_value)&&e.push(this.getDrawCenterTextPlugin()),this.config={type:"doughnut",data:Object.assign(Object.assign({},this.data),{datasets:this.data.datasets.map(s=>Object.assign(Object.assign({},s),{cutout:`${this.cutout}%`}))}),options:Object.assign(Object.assign({animation:this.animations},this.options),{maintainAspectRatio:!0,aspectRatio:1,layout:{padding:16},plugins:{legend:this.legend_format,tooltip:this.tooltip_options||this.defaultPieTooltipOptions}}),plugins:e},new r(this.canvasEl,this.config),this.canvasEl.style.width="100%",this.canvasEl.style.height="100%"}applyPresetPalette(t){this.color_palette!==l.CUSTOM&&(this.data.datasets=this.data.datasets.map(e=>{let s=e.data.map((i,a)=>t[a%t.length]);return Object.assign(Object.assign({},e),{backgroundColor:s,hoverBackgroundColor:s,borderColor:s,hoverBorderColor:s})}))}componentDidUpdate(){this.data&&this.data.datasets.length&&this.initChart()}componentDidLoad(){this.data&&this.data.datasets.length&&this.initChart()}render(){return h(T,{key:"a543562fcba9bbdab4ae2d7cda53a1ca26ea9d7d",role:"region",class:`relative flex w-full flex-col items-center justify-center ${j[this.height]}`},h("canvas",{key:"9286262c3951d8ea2235113921d7601d4a389c9b",ref:t=>this.canvasEl=t,style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",maxWidth:"100%",maxHeight:"100%"}}))}};export{S as atui_chart_donut};
