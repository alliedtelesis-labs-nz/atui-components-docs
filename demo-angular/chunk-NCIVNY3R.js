import{i as r}from"./chunk-JLSND24P.js";import{a as h,c as d,d as n,f as c,g as p,h as m,i as g,j as f,k as u,l as b,m as y,n as x,o as C,p as o,q as _}from"./chunk-425CM2QU.js";import"./chunk-6KYLPBMC.js";import"./chunk-RPJ3H7NX.js";import{a as S,b as i,c as D}from"./chunk-CP7M2NO3.js";import{i as l}from"./chunk-7EPSDV5K.js";var E={xs:"h-[70px]",sm:"h-[160px]",md:"h-[235px]",lg:"h-[330px]",xl:"h-[440px]",auto:"h-full"},k=class{constructor(t){S(this,t),this.height="md",this.color_palette=o.CATEGORICAL,this.formatThresholds=()=>{if(!this.thresholds)return[];let e=[];return this.thresholds.forEach(a=>{e.push({type:"line",label:a.label,borderColor:a.color,borderCapStyle:"butt",backgroundColor:"white",fill:!1,data:a.data,pointRadius:0,borderDash:a.dashLine?[6,3]:void 0,tension:0,stepped:a.stepped,order:1})}),e}}getConfig(){return l(this,null,function*(){return this.config})}initChart(){n.register(x,h,y,m,C,d,c,p,g,u,b,f);let t=_(this.color_palette);if(t&&this.applyPresetPalette(t),this.point_styles&&this.pointStylesSetup(),this.config={type:this.type,data:{labels:this.data.labels,datasets:[...this.data.datasets,...this.formatThresholds()]},options:Object.assign(Object.assign({devicePixelRatio:2,maintainAspectRatio:!1,scales:{y:this.y_axis_format||{beginAtZero:!0,type:"linear",min:0},x:this.x_axis_format||{type:"time",time:{displayFormats:{day:"ddd",minute:"MMM D H:mm",hour:"MMM D H:mm"}},ticks:{font:{size:11},autoSkip:!0,align:"center",maxRotation:0,minRotation:0}}}},this.options),{plugins:{tooltip:this.tooltip_options||{mode:"index",intersect:!1,position:"nearest",animation:{duration:150}},legend:this.legend_format||{labels:{boxWidth:8,boxHeight:8,fontSize:10,borderRadius:2},onHover:e=>{e.native&&(e.native.target.style.cursor="pointer")},display:!0}},clip:!1,elements:{line:{tension:0,borderWidth:2}}})},this.time_range){let e=this.getMinMaxDateStrings(this.time_range);this.config.options.scales.x.min=e.min,this.config.options.scales.x.max=e.max}new n(this.canvasEl,this.config),this.canvasEl.style.width="",this.canvasEl.style.height=""}componentDidUpdate(){this.data&&this.data.datasets.length&&this.initChart()}componentDidLoad(){this.data&&this.data.datasets.length&&this.initChart()}pointStylesSetup(){this.data.datasets=this.data.datasets.map(t=>Object.assign(Object.assign({},t),this.point_styles))}applyPresetPalette(t){this.color_palette!==o.CUSTOM&&(this.data.datasets=this.data.datasets.map((e,a)=>{let s=t[a%t.length];return Object.assign(Object.assign({},e),{backgroundColor:s,borderColor:s})}))}getMinMaxDateStrings(t){let e=t.selected,a=t.custom?r.getAbsoluteDateRange(t.custom):null,{startDate:s,endDate:M}=r.getDateRange(a,e,null);return{min:s.toString(),max:M.toString()}}render(){return i(D,{key:"898778662cb387a3847e4bb65816d7c44a5b708e",style:{height:"100%",width:"100%"}},i("section",{key:"bada335acbdea9975e4f1b5a7f977ea64b8282e9",class:`min-w-100 ${E[this.height]}`},i("canvas",{key:"2efe1b250a941f2cf17101815f8a69c47cba33e9",ref:t=>this.canvasEl=t})))}};export{k as atui_chart_bar_line};
