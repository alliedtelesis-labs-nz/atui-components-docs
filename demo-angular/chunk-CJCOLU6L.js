import{a as T}from"./chunk-5H2OG7DN.js";import{a as _}from"./chunk-Y2EDR7QV.js";import{a as E,b as t,c as P,d as R,e as n,g as k}from"./chunk-EUD2XOUW.js";import{h as w}from"./chunk-B7O3QC5Z.js";var o=function(e){return e[e.None=0]="None",e[e.Up=1]="Up",e[e.Down=-1]="Down",e}(o||{}),C=_("text-base rounded-lg py-4",{variants:{role:{user:"ml-auto inline-block bg-surface-2 p-8 text-dark",assistant:"mr-auto text-dark"},loading:{true:"animate-pulse",false:""}},defaultVariants:{role:"user",loading:!1}}),H=class{constructor(e){E(this,e),this.atuiCopy=n(this,"atuiCopy",7),this.atuiVote=n(this,"atuiVote",7),this.atuiRetry=n(this,"atuiRetry",7),this.atuiEdit=n(this,"atuiEdit",7),this.role="user",this.content="",this.loading=!1,this.error=!1,this.vote_status=o.None,this.enable_vote=!1,this.enable_copy=!1,this.enable_edit=!1,this.copyFeedbackVisible=!1,this.handleCopy=()=>w(this,null,function*(){try{yield navigator.clipboard.writeText(this.content),this.copyFeedbackVisible=!0,this.atuiCopy.emit(this.content),setTimeout(()=>{this.copyFeedbackVisible=!1},2e3)}catch(i){console.error("Failed to copy text:",i)}}),this.handleRetry=()=>{this.atuiRetry.emit()},this.handleEdit=()=>{this.atuiEdit.emit(this.content)},this.handleVote=i=>{let s=this.vote_status===i?o.None:i;this.atuiVote.emit({messageId:this.message_id,score:s})}}componentWillLoad(){return w(this,null,function*(){this.translations=yield T(this.el)})}renderActions(){var e,i,s,a,l,r,d,h,p,c,v,u,g,m,b,y,f,x;return this.loading?null:t("div",{class:"mt-2 flex items-center justify-end gap-2","data-name":"message-actions"},this.role==="user"&&this.enable_edit&&t("atui-tooltip",{position:"top"},t("atui-button",{slot:"tooltip-trigger",size:"sm",type:"secondaryText",icon:"edit",class:"text-xs",onClick:this.handleEdit,"data-name":"edit-button"}),t("span",{slot:"tooltip-content"},((s=(i=(e=this.translations)===null||e===void 0?void 0:e.ATUI)===null||i===void 0?void 0:i.PROMPT)===null||s===void 0?void 0:s.EDIT)||"Edit")),this.role==="assistant"&&this.enable_vote&&t(k,null,t("atui-tooltip",{position:"top"},t("atui-button",{slot:"tooltip-trigger",size:"sm",type:"secondaryText",onClick:()=>this.handleVote(o.Up),"data-name":"vote-up-button"},this.vote_status===o.Up?t("svg",{xmlns:"http://www.w3.org/2000/svg",height:"15px",viewBox:"0 -960 960 960",width:"15px",fill:"#000000"},t("path",{d:"M720-144H264v-480l288-288 32 22q18 13 26.5 33t3.5 41l-38 192h264q30 0 51 21t21 51v57q0 8-1.5 14.5T906-467L787-188q-9 20-27 32t-40 12Z"})):t("svg",{xmlns:"http://www.w3.org/2000/svg",height:"15px",viewBox:"0 -960 960 960",width:"15px",fill:"#adb5bd"},t("path",{d:"M720-144H264v-480l288-288 32 22q17 12 26 30.5t5 38.5l-1 5-38 192h264q30 0 51 21t21 51v57q0 8-1.5 14.5T906-467L786.93-187.8Q778-168 760-156t-40 12Zm-384-72h384l120-279v-57H488l49-243-201 201v378Zm0-378v378-378Z"}))),t("span",{slot:"tooltip-content"},((r=(l=(a=this.translations)===null||a===void 0?void 0:a.ATUI)===null||l===void 0?void 0:l.PROMPT)===null||r===void 0?void 0:r.HELPFUL)||"Helpful")),t("atui-tooltip",{position:"top"},t("atui-button",{slot:"tooltip-trigger",size:"sm",type:"secondaryText",onClick:()=>this.handleVote(o.Down),"data-name":"vote-down-button"},this.vote_status===o.Down?t("svg",{xmlns:"http://www.w3.org/2000/svg",height:"15px",viewBox:"0 -960 960 960",width:"15px",fill:"#000000"},t("path",{d:"M240-816h456v480L408-48l-32-22q-18-13-26.5-33t-3.5-41l38-192H120q-30 0-51-21t-21-51v-57q0-8 1.5-14.5T54-493l119-279q8-20 26.5-32t40.5-12Z"})):t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15px",viewBox:"0 -960 960 960",height:"15px",fill:"#adb5bd"},t("path",{d:"M240-816h456v480L408-48l-32-22q-17-12-26-30.5t-5-38.5l1-5 38-192H120q-30 0-51-21t-21-51v-57q0-8 1.5-14.5T54-493l119-279q8-20 26.5-32t40.5-12Zm384 72H240L120-465v57h352l-49 243 201-201v-378Zm0 378v-378 378Z"}))),t("span",{slot:"tooltip-content"},((p=(h=(d=this.translations)===null||d===void 0?void 0:d.ATUI)===null||h===void 0?void 0:h.PROMPT)===null||p===void 0?void 0:p.NOT_HELPFUL)||"Not Helpful"))),this.role==="assistant"&&this.enable_copy&&t("atui-tooltip",{position:"top"},t("atui-button",{slot:"tooltip-trigger",size:"sm",icon:this.copyFeedbackVisible?"check":"content_copy",type:"secondaryText",onClick:this.handleCopy,"data-name":"copy-button"}),t("span",{slot:"tooltip-content"},this.copyFeedbackVisible?((u=(v=(c=this.translations)===null||c===void 0?void 0:c.ATUI)===null||v===void 0?void 0:v.PROMPT)===null||u===void 0?void 0:u.COPIED)||"Copied":((b=(m=(g=this.translations)===null||g===void 0?void 0:g.ATUI)===null||m===void 0?void 0:m.PROMPT)===null||b===void 0?void 0:b.COPY)||"Copy")),this.role==="assistant"&&this.error&&t("atui-tooltip",{position:"top"},t("atui-button",{slot:"tooltip-trigger",size:"sm",type:"secondaryText",icon:"refresh",onClick:this.handleRetry,"data-name":"retry-button"}),t("span",{slot:"tooltip-content"},((x=(f=(y=this.translations)===null||y===void 0?void 0:y.ATUI)===null||f===void 0?void 0:f.PROMPT)===null||x===void 0?void 0:x.RETRY)||"Retry")))}renderContent(){var e,i,s;return this.loading?t("div",{class:"py-8","data-name":"loading-wrapper"},t("atui-loading",{class:"flex items-center gap-4 py-8","data-name":"loading-content",variant:"typing",size:"sm"})):this.error?t("div",{class:"space-y-2",ref:a=>this.errorEl=a,"data-name":"error-content"},t("p",{class:"text-destructive-foreground"},this.error_message||((s=(i=(e=this.translations)===null||e===void 0?void 0:e.ATUI)===null||i===void 0?void 0:i.PROMPT)===null||s===void 0?void 0:s.ERROR_GENERATING_RESPONSE)||"Error generating response")):t("div",{class:"prose prose-sm preserve-newlines max-w-none","data-name":"message-content"},t("slot",null),this.content)}render(){let e=C({role:this.role,loading:this.loading});return t(P,{key:"9e3bd33653e63685fe07ce845c7675f2219d1548",class:"flex w-full gap-8","data-name":"message-container","data-role":this.role},t("div",{key:"2a71b744b7e7690f37cee010278aacd71efc6dbd",class:"flex flex-1 flex-col"},this.name&&t("span",{key:"c8da2be6f55c8762d9b9d4295e22c03fdb546a01",class:"self-start text-sm text-light","data-name":"message-name"},this.name),t("div",{key:"6aa116577468031e0b26e9c101b1b9ebba64615d",class:e},this.renderContent()),this.renderActions()))}get el(){return R(this)}};export{o as a,H as b};
