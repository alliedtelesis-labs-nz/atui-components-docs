import{a as o}from"./chunk-AHX5VE5O.js";import{a as i}from"./chunk-H66LYRGA.js";import{a as n,b as t,c as r,d as l,e as a,g as c}from"./chunk-CP7M2NO3.js";import{i as s}from"./chunk-7EPSDV5K.js";var h=i("text-base max-w-4xl rounded-lg px-8 py-4",{variants:{role:{user:"ml-auto bg-surface-2 text-dark",assistant:"mr-auto text-dark"},loading:{true:"animate-pulse",false:""}},defaultVariants:{role:"user",loading:!1}}),g=class{constructor(e){n(this,e),this.atuiCopy=a(this,"atuiCopy",7),this.atuiFeedbackPositive=a(this,"atuiFeedbackPositive",7),this.atuiFeedbackNegative=a(this,"atuiFeedbackNegative",7),this.atuiRetry=a(this,"atuiRetry",7),this.atuiEdit=a(this,"atuiEdit",7),this.role="user",this.content="",this.loading=!1,this.error=!1,this.handleCopy=()=>{this.atuiCopy.emit(this.content)},this.handleRetry=()=>{this.atuiRetry.emit()},this.handleEdit=()=>{this.atuiEdit.emit(this.content)},this.handleFeedbackPositive=()=>{this.atuiFeedbackPositive.emit()},this.handleFeedbackNegative=()=>{this.atuiFeedbackNegative.emit()}}componentWillLoad(){return s(this,null,function*(){this.translations=yield o(this.errorEl)})}renderAvatar(){let e=this.role==="user"?"primary":"secondary",d=this.name?this.name.charAt(0).toUpperCase():this.role==="user"?"U":"A";return t("atui-avatar",{src:this.avatar,alt:this.name||this.role,initials:d,variant:e,size:"sm","data-name":"message-avatar"})}renderActions(){return this.loading?null:t("div",{class:"mt-2 flex items-center justify-end gap-2","data-name":"message-actions"},this.role==="user"&&t("atui-tooltip",{position:"top"},t("atui-button",{slot:"tooltip-trigger",size:"sm",type:"secondaryText",icon:"edit",class:"text-xs",onClick:this.handleEdit,"data-name":"edit-button"}),t("span",{slot:"tooltip-content"},"Edit")),this.role==="assistant"&&t(c,null,t("atui-tooltip",{position:"top"},t("atui-button",{slot:"tooltip-trigger",size:"sm",type:"secondaryText",icon:"thumb_up",onClick:this.handleFeedbackPositive,"data-name":"feedback-positive-button"}),t("span",{slot:"tooltip-content"},"Helpful")),t("atui-tooltip",{position:"top"},t("atui-button",{slot:"tooltip-trigger",size:"sm",type:"secondaryText",icon:"thumb_down",onClick:this.handleFeedbackNegative,"data-name":"feedback-negative-button"}),t("span",{slot:"tooltip-content"},"Not helpful")),t("atui-tooltip",{position:"top"},t("atui-button",{slot:"tooltip-trigger",size:"sm",icon:"content_copy",type:"secondaryText",onClick:this.handleCopy,"data-name":"copy-button"}),t("span",{slot:"tooltip-content"},"Copy"))),this.role==="assistant"&&this.error&&t("atui-tooltip",{position:"top"},t("atui-button",{slot:"tooltip-trigger",size:"sm",type:"secondaryText",icon:"refresh",onClick:this.handleRetry,"data-name":"retry-button"}),t("span",{slot:"tooltip-content"},"Retry")))}renderContent(){return this.loading?t("div",{class:"py-8","data-name":"loading-content"},t("atui-loading",{variant:"typing",size:"sm"})):this.error?t("div",{class:"space-y-2",ref:e=>this.errorEl=e,"data-name":"error-content"},t("p",{class:"text-destructive"},this.error_message||this.translations.ATUI.PROMPT.ERROR_GENERATING_RESPONSE)):t("div",{class:"prose prose-sm preserve-newlines max-w-none","data-name":"message-content"},t("slot",null),this.content)}render(){let e=h({role:this.role,loading:this.loading});return t(r,{key:"fa97c7d1adf4ec3f4509e7f31e027e9849ffaa5a",class:"flex w-full gap-8","data-name":"message-container"},this.avatar&&this.renderAvatar(),t("div",{key:"c3d69887082551ccb90b05e65102d71f90e25e36",class:"space-y-1 flex-1"},t("div",{key:"ec7ee1d3f8e06921ce3d437f0e51461ef4c0984b",class:"flex items-center gap-8"},this.name&&t("span",{key:"2435e4d59fb451e58f3daf57d9afe4531af5bdae",class:"text-sm text-light","data-name":"message-name"},this.name)),t("div",{key:"ee144ff316888117ab76cabcf796fba7d15aa10a",class:e},this.renderContent()),this.renderActions()))}get el(){return l(this)}};export{g as atui_prompt_message};
