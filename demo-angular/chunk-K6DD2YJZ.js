import{a as n,b as s,c as i,e as r}from"./chunk-WNQGRM7V.js";import"./chunk-B7O3QC5Z.js";var l=class{constructor(e){n(this,e),this.atuiMessageCopy=r(this,"atuiMessageCopy",7),this.atuiMessageRetry=r(this,"atuiMessageRetry",7),this.atuiMessageEdit=r(this,"atuiMessageEdit",7),this.messages=[],this.loading=!1,this.empty_state_title="No messages yet",this.empty_state_description="Start a conversation by sending a message",this.auto_scroll=!0,this.chatbot_title="Assistant"}componentDidUpdate(){this.auto_scroll&&this.threadContainer&&this.scrollToBottom()}scrollToBottom(){this.threadContainer&&(this.threadContainer.scrollTop=this.threadContainer.scrollHeight)}handleMessageCopy(e){let t=this.getMessageIndexFromEvent(e);t!==-1&&this.atuiMessageCopy.emit({messageId:`msg-${t}`,content:e.detail})}handleMessageRetry(e){let t=this.getMessageIndexFromEvent(e);t!==-1&&this.atuiMessageRetry.emit({messageId:`msg-${t}`})}handleMessageEdit(e){let t=this.getMessageIndexFromEvent(e);t!==-1&&this.atuiMessageEdit.emit({messageId:`msg-${t}`,content:e.detail})}getMessageIndexFromEvent(e){let a=e.target.closest("[data-message-index]");return a?parseInt(a.dataset.messageIndex||"-1",10):-1}renderLoadingIndicator(){return this.loading?s("div",{class:"flex flex-col gap-16","data-name":"loading-container"},s("atui-prompt-message",{role:"assistant",content:"Typing...",name:this.chatbot_title,loading:!0,"data-name":"loading-message"})):null}renderEmptyState(){return s("div",{class:"flex h-full flex-col items-center justify-center p-8 text-center","data-name":"empty-state"},s("div",{class:"text-muted-foreground text-4xl mb-4"},"\u{1F4AC}"),s("h3",{class:"text-lg mb-2 font-semibold","data-name":"empty-state-title"},this.empty_state_title),s("p",{class:"text-muted-foreground text-sm","data-name":"empty-state-description"},this.empty_state_description))}renderMessage(e,t){let a=e.role==="system"?"assistant":e.role,o=e.role==="user"?e.name:e.name||this.chatbot_title;return s("div",{"data-message-index":t},s("atui-prompt-message",{role:a,content:e.content,name:o,avatar:e.avatar,loading:e.loading,error:e.error,error_message:e.error_message,"data-name":`message-${t}`}))}renderMessages(){return this.messages.map((e,t)=>s("div",{key:t,class:"flex flex-col gap-16 p-16 pb-0","data-name":"message-container"},this.renderMessage(e,t)))}render(){let e=this.messages&&this.messages.length>0;return s(i,{key:"c30e2b3ca68b1f6d6132630e9b3bf021aa7f9ffe",class:"block h-full overflow-y-auto scroll-smooth pb-32",ref:t=>this.threadContainer=t,"data-name":"thread-container"},e?s("div",{"data-name":"messages-container"},this.renderMessages(),this.renderLoadingIndicator()):this.renderEmptyState(),s("slot",{key:"dcbf13bca286be9b0be3072167ac013acaa93542",name:"messages"}))}};export{l as atui_prompt_thread};
