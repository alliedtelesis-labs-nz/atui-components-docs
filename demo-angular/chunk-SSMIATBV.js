import{a as p,b as u,c,d as g,e as f,f as m}from"./chunk-BQET5BRB.js";import{a as h,b as s,c as b,d as E}from"./chunk-OYGHDCNF.js";import{h as e}from"./chunk-B7O3QC5Z.js";var w=class{constructor(t){h(this,t)}render(){var t;return s("div",{key:"bcc4dfe305f44384713dc1594862c39392d98a9e",class:"flex items-center gap-8"},[(this.label||this.required)&&s("label",{key:"3a6bbb492697dd4c313d0d3768721c5446273389",htmlFor:(t=this.for)!==null&&t!==void 0?t:void 0,class:"flex gap-4"},this.label,this.required&&s("span",{key:"889253bed723ed0ca6fd16f9941e9fce8e82ce22",class:"text-error"},"*")),this.info_text&&s("atui-tooltip",{key:"31eeeb645d00c497a1fd5482217cc3a30c1c2646",position:"right"},s("span",{key:"888f9b50a50e822471f1689507f2ad7314ee9d58",slot:"tooltip-trigger",class:"material-icons !text-icon-sm text-light cursor-pointer"},"info_outline"),s("span",{key:"2034d8f2b7db1ac39e5e44853ad2114680326a4a"},this.info_text))])}},T=200,L=class{constructor(t){h(this,t),this.position="top",this.align="center",this.disabled=!1,this.width="200px",this.offset=8,this.delay=150,this.isOpen=!1,this.triggerEls=[],this.updatePosition=()=>e(this,null,function*(){this.triggerEl&&this.tooltipEl&&this.isOpen&&(yield this.updateFloatingPosition())}),this.externalTriggerListeners=[]}disabledChanged(t){return e(this,null,function*(){t&&this.isOpen&&(yield this.closeTooltip())})}openTooltip(){return e(this,null,function*(){this.disabled||(this.tooltipEl&&(this.tooltipEl.showPopover(),this.isOpen=!0),yield this.updatePosition(),this.updateAriaExpanded())})}closeTooltip(){return e(this,null,function*(){this.tooltipEl&&(this.tooltipEl.hidePopover(),this.isOpen=!1),this.updateAriaExpanded()})}updateAriaExpanded(){this.trigger_id&&this.triggerEl&&this.triggerEl.setAttribute("aria-expanded",this.isOpen?"true":"false")}componentDidLoad(){return e(this,null,function*(){if(this.popoverId=`atui-tooltip-${Math.random().toString(36).substr(2,9)}`,this.trigger_id){if(this.triggerEls=Array.from(document.querySelectorAll(`[data-id="${this.trigger_id}"]`)),this.triggerEls.length===0){console.warn(`atui-tooltip: No elements found with data-id="${this.trigger_id}"`);return}}else this.triggerEl=this.el.querySelector('[data-name="tooltip-trigger"]');yield this.setupFloatingUI(),setTimeout(()=>this.setupPopoverEventListeners(),0),this.trigger_id&&this.triggerEls.length&&this.setupExternalTriggerListeners()})}disconnectedCallback(){this.cleanupFloatingUI(),this.cleanupExternalTriggerListeners(),this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=void 0),this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=void 0)}cleanupExternalTriggerListeners(){this.externalTriggerListeners.forEach(({element:t,event:o,handler:i})=>{t.removeEventListener(o,i)}),this.externalTriggerListeners=[]}setupPopoverEventListeners(){return e(this,null,function*(){this.tooltipEl&&this.tooltipEl.addEventListener("toggle",t=>{let o=t;this.isOpen=o.newState==="open",this.isOpen?requestAnimationFrame(()=>{this.tooltipEl.style.opacity="1",this.updatePosition()}):this.tooltipEl.style.opacity="0"})})}setupExternalTriggerListeners(){!this.triggerEls||this.triggerEls.length===0||this.triggerEls.forEach(t=>{let o=()=>{this.disabled||(this.triggerEl=t,this.mouseEnterHandler())},i=()=>{this.disabled||(this.triggerEl=t,this.mouseLeaveHandler())};t.addEventListener("mouseenter",o),t.addEventListener("mouseleave",i),this.externalTriggerListeners.push({element:t,event:"mouseenter",handler:o},{element:t,event:"mouseleave",handler:i}),t.setAttribute("aria-haspopup","true"),t.setAttribute("aria-expanded","false")})}mouseEnterHandler(){return e(this,null,function*(){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=void 0),!this.isOpen&&(this.showTimeout&&clearTimeout(this.showTimeout),this.showTimeout=setTimeout(()=>e(this,null,function*(){!this.disabled&&!this.isOpen&&(yield this.openTooltip()),this.showTimeout=void 0}),this.delay||0))})}mouseLeaveHandler(){return e(this,null,function*(){if(this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=void 0),!this.isOpen)return;let t=Math.min(this.delay||0,150);this.hideTimeout=setTimeout(()=>e(this,null,function*(){this.isOpen&&(yield this.closeTooltip()),this.hideTimeout=void 0}),t)})}setupFloatingUI(){return e(this,null,function*(){if(this.cleanupAutoUpdate&&this.cleanupAutoUpdate(),this.triggerEl&&this.tooltipEl){let t=new IntersectionObserver(i=>{!i[0].isIntersecting&&this.isOpen&&this.closeTooltip()},{threshold:0});t.observe(this.triggerEl),this.cleanupAutoUpdate=p(this.triggerEl,this.tooltipEl,()=>{var i;if(this.isOpen){let a=this.getFloatingUIPlacement(),d="fixed";m(this.triggerEl,this.tooltipEl,{placement:a,strategy:d,middleware:[u((i=this.offset)!==null&&i!==void 0?i:8),g({fallbackStrategy:"bestFit",padding:8}),c({padding:8,mainAxis:!0,crossAxis:!0}),f({apply:({availableWidth:n,availableHeight:r,elements:l})=>{let y=parseInt((this.width||"200px").toString(),10)||T;Object.assign(l.floating.style,{maxWidth:`${Math.min(n,y)}px`,maxHeight:`${r}px`})}})]}).then(({x:n,y:r})=>{let l={position:d,left:`${n}px`,top:`${r}px`,margin:"0",transform:"none",maxWidth:this.width||"200px"};Object.assign(this.tooltipEl.style,l)})}},{ancestorScroll:!0,ancestorResize:!0,elementResize:!0,layoutShift:!0,animationFrame:!0});let o=this.cleanupAutoUpdate;this.cleanupAutoUpdate=()=>{o(),t.disconnect()}}})}cleanupFloatingUI(){var t;(t=this.cleanupAutoUpdate)===null||t===void 0||t.call(this),this.cleanupAutoUpdate=void 0}updateFloatingPosition(){return e(this,null,function*(){!this.triggerEl||!this.tooltipEl||this.setupFloatingUI()})}getFloatingUIPlacement(){let t={top:"top",bottom:"bottom",left:"left",right:"right"},o={start:"start",end:"end",center:"center"},i=t[this.position]||"bottom",a=o[this.align]||"center";return`${i}-${a}`}render(){return s(b,{key:"7069e77b2151799b5606bf5d7e8323baa51da61c",class:"relative"},!this.trigger_id&&s("div",{key:"cbcb9b5fcabac07549631274894b5d3ce7073dbc","aria-haspopup":"true","data-name":"tooltip-trigger",ref:t=>this.triggerEl=t,"aria-expanded":`${this.isOpen?"true":"false"}`,class:this.disabled?"contents":"",onMouseEnter:()=>this.disabled?null:this.mouseEnterHandler(),onMouseLeave:()=>this.disabled?null:this.mouseLeaveHandler()},s("slot",{key:"c00ae787af05445475d179bfb33e8c8b34573944",name:"tooltip-trigger"})),s("div",{key:"3685a033ca7b1bba1bcdc6cd49f9820b2fc5bdf6",ref:t=>this.tooltipEl=t,"data-position":this.position,"data-align":this.align,popover:"auto",id:this.popoverId,class:"pointer-events-none w-fit rounded-md bg-gray-950/80 px-[6px] py-2 text-sm text-white opacity-0 shadow-md transition-opacity duration-200 ease-out","data-name":"tooltip-content-wrapper"},s("slot",{key:"8c357671b4016c7acde9fd239f1a29ca34bfc75d"})))}get el(){return E(this)}static get watchers(){return{disabled:["disabledChanged"]}}};export{w as atui_form_label,L as atui_tooltip};
